var je=Object.defineProperty;var j=(t,e)=>()=>(t&&(e=t(t=0)),e);var G=(t,e)=>{for(var s in e)je(t,s,{get:e[s],enumerable:!0})};var te,$,B=j(()=>{te=_ymc_fg_object.path,$=_ymc_fg_object.ajax_url});var y,O=j(()=>{y={normalize(t){return t.replace(/\//g,".")},addAction(t,e,s=10){wp.hooks.addAction(this.normalize(t),"ymc-filter",e,s)},doAction(t,...e){wp.hooks.doAction(this.normalize(t),...e)},addFilter(t,e,s=10){wp.hooks.addFilter(this.normalize(t),"ymc-filter",e,s)},applyFilters(t,e,...s){return wp.hooks.applyFilters(this.normalize(t),e,...s)}};(!window.ymcHooks||typeof window.ymcHooks.addAction!="function"||typeof window.ymcHooks.doAction!="function")&&(window.ymcHooks=y)});function L(t,e){if(!t||!t.dataset.params)return;let s;try{s=JSON.parse(t.dataset.params)}catch(o){console.error("Error parsing data-params:",o);return}Object.assign(s,e),t.dataset.params=JSON.stringify(s)}function D(t){if(!t||!t.dataset.params)return;let e;try{e=JSON.parse(t.dataset.params)}catch(s){console.error("Error parsing data-params:",s);return}return e}function E(t,e){if(!t||!t.dataset.params)return;let s;try{s=JSON.parse(t.dataset.params)}catch(r){console.error("Error parsing data-params:",r);return}(Array.isArray(e)?e:[e]).forEach(r=>{delete s[r]}),t.dataset.params=JSON.stringify(s)}var N=j(()=>{});function se(t){t.querySelectorAll(".js-pagination-numeric li a").forEach(e=>{e.addEventListener("click",we(t))})}function we(t){return function(e){var o;e.preventDefault();let s=1;(o=this.getAttribute("href"))!=null&&o.startsWith("#page")?s=parseInt(this.getAttribute("href").replace("#page=","")):s=parseInt(this.innerText),L(t,{paged:s}),S(t)}}var re=j(()=>{N();M()});function oe(t){t.querySelector(".js-btn-load-more").addEventListener("click",Ee(t))}function Ee(t){return function(){this.classList.add("button--loading");let e=D(t),s=++e.paged;L(t,{paged:s}),S(t,"append")}}var ae=j(()=>{N();M()});function J(t,e="replace",s="js-ajax-content",o=null,r=null,a=null,d=null){var g;let c=e==="append"?"beforeend":"afterbegin",u=e==="append"?"preloader--is-load-more":"preloader--is-numeric",l={none:"none",brightness:"brightness(1.4)",contrast:"contrast(1.5)",grayscale:"grayscale(100%)",invert:"invert(100%)",opacity:"opacity(40%)",saturate:"saturate(2)",sepia:"sepia(100%)"},n=o||"dual_arc.svg",i=n.replace(/\.\w+$/,""),p=null;if(typeof ymcHooks!="undefined"){let h=[];d&&h.push(`ymc/grid/preloader_${d}`),h.push("ymc/grid/preloader");for(let b of h)if(p=ymcHooks.applyFilters(b,null),p)break}let m=p||`${te}/assets/images/preloaders/${n}`,f="";a==="custom_filter"?r&&(r.startsWith("filter:")&&(r=r.replace(/^filter:\s*/i,"")),f=` style="filter: ${r};"`):f=` style="filter: ${l[a]};"`;let v=`
        <div class="preloader ${u}">
            <img src="${m}" alt="preloader"${f}>
        </div>
        <div class="overlay"></div>`;(g=t.querySelector(`.${s}`))==null||g.insertAdjacentHTML(c,v)}function V(t){var e,s;(e=t.querySelector(".preloader"))==null||e.remove(),(s=t.querySelector(".overlay"))==null||s.remove()}var W=j(()=>{B()});function ne(t){let e={root:null,rootMargin:"0px",threshold:.8};return new IntersectionObserver((s,o)=>{s.forEach(r=>{if(r.isIntersecting){let a=D(t),d=++a.paged;L(t,{paged:d}),S(t,"append"),o.unobserve(r.target)}})},e)}var ie=j(()=>{N();M()});function U(t){return Array.isArray(t)?t.map(e=>U(e)):t!==null&&typeof t=="object"?Object.keys(t).reduce((e,s)=>{let o=Te(s);return e[o]=U(t[s]),e},{}):qe(t)}function Te(t){return t.replace(/_([a-z])/g,(e,s)=>s.toUpperCase())}function qe(t){if(typeof t=="string"){let e=t.toLowerCase();if(e==="true")return!0;if(e==="false")return!1;if(!isNaN(t)&&t.trim()!=="")return Number(t)}return t}var ce=j(()=>{});function X(t,e,s){let o=U(s),{general:r,pagination:a,navigation:d,scrollbar:c,useCustomSettings:u}=o,{autoHeight:l,autoplay:n,autoplayDelay:i,loop:p,centeredSlides:m,slidesPerView:f,spaceBetween:v,mousewheel:g,speed:h,effect:b}=r,_=document.querySelector(`.js-swiper-${t}-${e}`);_&&(d.visible&&_.querySelectorAll(".post-layout_carousel").forEach(T=>{T.classList.add("has-navigation-arrows")}),_.closest(".js-ajax-content").classList.add("posts-carousel"),!u&&new Swiper(_,{grabCursor:!0,spaceBetween:v,centeredSlides:m,autoHeight:l,autoplay:n?{delay:i}:!1,loop:p,slidesPerView:f,mousewheel:g?{invert:!0}:!1,speed:h,effect:b,fadeEffect:b==="fade"?{crossFade:!0}:"",creativeEffect:b==="creative"?{prev:{shadow:!0,translate:[0,0,-400]},next:{translate:["100%",0,0]}}:"",pagination:a.visible?{el:".swiper-pagination",clickable:!0,dynamicBullets:a.dynamicBullets,type:a.type}:!1,navigation:d.visible?{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}:{enabled:!1},scrollbar:{el:".swiper-scrollbar",draggable:!0,enabled:c.visible}}))}var le=j(()=>{ce()});async function S(t,e="replace"){var n;let s=JSON.parse(t.dataset.params),o=new FormData;o.append("action","get_filtered_posts"),o.append("nonce_code",_ymc_fg_object.getPosts_nonce),o.append("params",JSON.stringify(s)),o.append("filter_id",s.filter_id);let r=t.querySelector(".js-ajax-content");y.doAction("ymc/grid/before_update",t),y.doAction("ymc/grid/before_update_"+s.filter_id,t),y.doAction("ymc/grid/before_update_"+s.filter_id+"_"+s.counter,t);let a=s.preloader_settings.icon+".svg",d=s.preloader_settings.filter_preloader,c=s.preloader_settings.custom_filters_css,u=s.filter_id;a=y.applyFilters("ymc/grid/preloader",a),a=y.applyFilters("ymc/grid/preloader_"+s.filter_id,a),e==="append"?J(t,"append","js-ajax-content",a,c,d,u):J(t,"replace","js-ajax-content",a,c,d,u);let l;try{if(l=await fetch($,{method:"POST",body:o}),!l.ok){console.error(`HTTP error: ${l.status}`);return}let i=await l.json();if(!i.success){console.warn("No renderedHTML in response");return}(n=t.querySelector(".pagination"))==null||n.remove();let{rendered_posts:p,rendered_pagination:m,pagination_type:f,found_posts:v,paged:g,max_num_pages:h,posts_count:b,requires_swiper:_,scroll_filter_bar:T,results_text:C,filtered_posts_label:I}=i.data;if(v>0){r.classList.remove("posts-no-found");let x=t.querySelector(".filter-content .js-total-results-found");switch(x||(x=document.createElement("div"),x.className="total-results-found js-total-results-found",r.parentNode.insertBefore(x,r)),s.search!==void 0?x.innerHTML=C?`<span class="number-posts">${v}</span> ${C}`:"":I!=="none"?x.innerHTML=`${I} <span class="number-posts">${v}</span>`:x.innerHTML="",f){case"numeric":if(r.innerHTML=p,m&&(r.insertAdjacentHTML("afterend",m),se(t)),T==="yes"){t.querySelector(".filter-layout").scrollIntoView({behavior:"smooth",block:"start",inline:"start"});let A=t.getBoundingClientRect().top+window.scrollY-30;window.scrollTo({top:A,behavior:"smooth"})}break;case"loadmore":e==="append"?r.insertAdjacentHTML("beforeend",p):r.innerHTML=p,m&&h>g&&(r.insertAdjacentHTML("afterend",m),oe(t));break;case"infinite":e==="append"?r.insertAdjacentHTML("beforeend",p):r.innerHTML=p,h>g&&ne(t).observe(r.querySelector(".post-card:last-child"));break;default:r.innerHTML=p;break}if(_)if(typeof Swiper=="undefined"){let q=document.createElement("link");q.rel="stylesheet",q.href=_ymc_fg_object.path+"assets/css/lib/swiper.min.css",document.head.appendChild(q);let A=document.createElement("script");A.src=_ymc_fg_object.path+"assets/js/lib/swiper.min.js",A.onload=()=>{X(s.filter_id,s.counter,s.carousel_settings)},document.body.appendChild(A)}else X(s.filter_id,s.counter,s.carousel_settings)}else{r.classList.add("posts-no-found"),r.innerHTML=p;let x=t.querySelector(".filter-content .js-total-results-found");x&&(x.innerHTML="")}y.doAction("ymc/grid/after_update",i.data,t),y.doAction("ymc/grid/after_update_"+s.filter_id,i.data,t),y.doAction("ymc/grid/after_update_"+s.filter_id+"_"+s.counter,i.data,t)}catch(i){console.error("Error occurred:",i)}finally{V(t),y.doAction("ymc/grid/after_complete",l.status,t),y.doAction("ymc/grid/after_complete_"+s.filter_id,l.status,t),y.doAction("ymc/grid/after_complete_"+s.filter_id+"_"+s.counter,l.status,t)}}var M=j(()=>{B();O();re();ae();W();ie();le()});function F(t){var s;let e=t.querySelector(".js-search-field");if(e){let o=t.querySelector(".js-autocomplete-results");(s=t.querySelector(".js-clear-button"))==null||s.classList.remove("is-visible"),o.classList.remove("is-visible"),o.innerHTML="",e.dataset.postTitle="",e.value=""}}var R=j(()=>{});var k,Q=j(()=>{k=new Set});function H(t){let e=new Set,s=t.dataset.filterId,o=Array.from(t.querySelectorAll("[data-filter-type]")),r=Array.from(document.querySelectorAll(`[data-extra-filter-id="${s}"] [data-filter-type]`)),a=[...o,...r],d=new Map;for(let l of a){let n=l.querySelector("[data-all-terms]");if(!n)continue;let i;try{let p=JSON.parse(n.dataset.allTerms);i=JSON.stringify([...new Set(p)].sort((m,f)=>m-f))}catch(p){console.warn("Parsing error data-all-terms:",p);continue}if(d.has(i)){let p=d.get(i),m=l.closest("[data-extra-filter-id]"),f=p.closest("[data-extra-filter-id]");m&&!f&&d.set(i,l)}else d.set(i,l)}let c={dropdown:l=>Array.from(l.querySelectorAll('input[type="checkbox"]:not(.js-dropdown-all-checkbox)')).filter(n=>n.checked).map(n=>Number(n.dataset.value)),default:l=>Array.from(l.querySelectorAll(".filter-button.is-active:not(.js-filter-button-all)")).map(n=>Number(n.dataset.termid)),range:l=>{let n="";return l.querySelectorAll(".js-tag-values").forEach(i=>{n+=i.dataset.selectedTags+","}),n=n.split(","),n=n.filter(i=>i!==""),n.map(i=>Number(i))},_default:()=>[]};for(let l of d.values()){let i=(c[l.dataset.filterType]||c._default)(l);if(i.length>0)i.forEach(p=>e.add(p));else if(!l.querySelector('.filter-button.is-active:not(.js-filter-button-all), input[type="checkbox"]:checked:not(.js-dropdown-all-checkbox)')){let m=l.querySelector("[data-all-terms]");if(m)try{JSON.parse(m.dataset.allTerms).map(Number).forEach(f=>{e.add(f)})}catch(f){console.warn("Parsing error data-all-terms",f)}}}return Array.from(e)}var Y=j(()=>{});function P(t){if(!t)return null;let e=t.closest(".ymc-extra-filter");if(e){let s=e.dataset.extraFilterId;if(s){let o=document.querySelector(`.ymc-filter-${s}`);if(o)return o}}return t.closest(".js-ymc-container")}var z=j(()=>{});var de={};G(de,{initDefaultFilter:()=>ke});function ke(){document.querySelectorAll('.js-ymc-container [data-filter-type="default"]').forEach(e=>{let s=e.querySelectorAll(".filter-button:not(.js-filter-button-all)"),o=e.querySelectorAll(".filter-button.js-filter-button-all");s.forEach(r=>{r.addEventListener("click",Fe)}),o.forEach(r=>{r.addEventListener("click",Ce)})})}async function Fe(){let t=this,e=P(t),s=t.closest(".filter"),o=s.querySelectorAll(".filter-button:not(.js-filter-button-all)"),r=s.dataset.selectionMode==="multiple";r?t.classList.toggle("is-active"):(s.querySelectorAll("button.is-active").forEach(c=>c.classList.remove("is-active")),t.classList.add("is-active")),o.forEach(c=>{let u=Number(c.dataset.termid);c.classList.contains("is-active")?k.add(u):k.delete(u)});let a=s.querySelectorAll(".filter-button.is-active:not(.js-filter-button-all)");if(r&&a.length===0){let c=s.querySelector(".js-filter-button-all");if(c){let u=JSON.parse(c.dataset.allTerms).map(Number);o.forEach(l=>{let n=Number(l.dataset.termid);u.includes(n)&&(k.add(n),l.classList.remove("is-active"))})}}let d=s.querySelector(".js-filter-button-all");d&&(s.querySelectorAll(".filter-button.is-active:not(.js-filter-button-all)").length>0?d.classList.remove("is-active"):d.classList.add("is-active")),s.classList.toggle("js-has-selection",s.querySelectorAll("button.is-active:not(.js-filter-button-all)").length>0),F(e),E(e,"search"),L(e,{terms:H(e),paged:1}),await S(e)}async function Ce(){let t=this,e=P(t),s=t.closest(".filter-buttons"),o=JSON.parse(t.dataset.allTerms).map(Number);s.querySelectorAll(".filter-button:not(.js-filter-button-all)").forEach(a=>{let d=Number(a.dataset.termid);k.delete(d)}),o.forEach(a=>k.add(a)),s.querySelectorAll("button.is-active").forEach(a=>a.classList.remove("is-active")),t.closest(".filter").classList.remove("js-has-selection"),t.classList.add("is-active"),F(e),E(e,"search"),L(e,{terms:H(e),paged:1}),await S(e)}var ue=j(()=>{M();N();R();Q();Y();z()});var pe={};G(pe,{initDropdownFilter:()=>Pe});function Pe(){let t=document.querySelectorAll('[data-filter-type="dropdown"]'),e=new Map,s=new Map;t.forEach(d=>{let c=d,u=d.querySelectorAll(".js-dropdown"),l=d.getAttribute("data-selection-mode")||"single";e.has(c)||e.set(c,[]),u.forEach(i=>{let p=i.querySelector(".js-dropdown-selected"),m=i.querySelector(".js-dropdown-label"),f=i.querySelectorAll(".js-dropdown-item"),v=i.querySelector(".dropdown-close-btn");if(!s.has(c)){let g=Array.from(d.querySelectorAll('input[type="checkbox"]')).map(h=>Number(h.getAttribute("data-value")));s.set(c,g)}if(v&&v.addEventListener("click",g=>{g.stopPropagation(),i.classList.remove("open")}),l==="multiple"){let g=i.querySelector(".ymc-dropdown__list"),h=i.querySelector(".js-dropdown-all"),b;if(!h){h=document.createElement("li"),h.className="ymc-dropdown__item js-dropdown-item js-dropdown-all",h.innerHTML=`
                    <label class="ymc-dropdown__checkbox">
                        <input type="checkbox" class="js-dropdown-all-checkbox" />
                        <span class="checkmark"></span>
                        <span class="ymc-dropdown__checkbox">All</span>
                    </label>`;let T=g.querySelector(".ymc-dropdown__close");T?T.insertAdjacentElement("afterend",h):g.insertBefore(h,g.firstChild)}b=h.querySelector(".js-dropdown-all-checkbox");let _=b.cloneNode(!0);b.parentNode.replaceChild(_,b),b=_,b.addEventListener("change",async T=>{T.stopPropagation();let C=P(b),I=e.get(c),x=s.get(c)||[],q=b.checked;I.length=0,i.querySelectorAll('input[type="checkbox"]:not(.js-dropdown-all-checkbox)').forEach(A=>{A.checked=!1;let w=A.closest(".js-dropdown-item");w&&w.classList.remove("is-selected")}),q?x.forEach(A=>{let w=i.querySelector(`input[data-value="${A}"]`);if(w){w.checked=!0;let ee=w.closest(".js-dropdown-item");ee.classList.add("is-selected");let Ae=ee.textContent.trim();I.push({value:A.toString(),text:Ae,dropdown:i}),k.add(A)}}):x.forEach(A=>k.delete(A)),r(c,I),F(C),E(C,"search"),L(C,{terms:H(C),paged:1}),await S(C)})}p.addEventListener("click",g=>{g.stopPropagation(),a(i),i.classList.toggle("open")}),f.forEach(g=>{let h=g.querySelector('input[type="checkbox"]');h.addEventListener("change",async b=>{b.stopPropagation();let _=P(h),T=h.getAttribute("data-value"),C=Number(T),I=g.querySelector(".term-name").textContent.trim(),x=e.get(c);if(l==="multiple"){if(g.classList.toggle("is-selected",h.checked),h.checked)x.some(q=>q.value===T)||(x.push({value:T,text:I,dropdown:i}),k.add(C));else{let q=x.findIndex(w=>w.value===T);q!==-1&&x.splice(q,1),k.delete(C);let A=i.querySelector(".js-dropdown-all-checkbox");A&&(A.checked=!1)}r(c,x),F(_),E(_,"search"),L(_,{terms:H(_),paged:1}),await S(_)}else{let q=h.checked;f.forEach(w=>{w.classList.remove("is-selected"),w.querySelector('input[type="checkbox"]').checked=!1});let A=x.findIndex(w=>w.dropdown===i);if(A!==-1){let w=x[A].value;k.delete(Number(w)),x.splice(A,1)}q?(h.checked=!0,g.classList.add("is-selected"),m.textContent=I,x.push({value:T,text:I,dropdown:i}),k.add(C)):m.textContent=i.getAttribute("data-label")||"Select option",r(c,x),F(_),E(_,"search"),L(_,{terms:H(_),paged:1}),await S(_)}})})});let n=o(c);n.dataset.listenerAdded||(n.addEventListener("click",async i=>{if(i.target.classList.contains("tag__remove")){let p=i.target.getAttribute("data-value"),m=Number(p),f=e.get(c),v=f.findIndex(g=>g.value===p);if(v!==-1){let{dropdown:g}=f[v];f.splice(v,1);let h=g.querySelector(`input[data-value="${p}"]`);h&&(h.checked=!1,h.closest(".js-dropdown-item").classList.remove("is-selected")),k.delete(m),r(c,f);let b=P(g);F(b),E(b,"search"),L(b,{terms:H(b),paged:1}),await S(b)}}}),n.dataset.listenerAdded="true")});function o(d){let c=d.querySelector(".js-dropdown-selected-tags");return c||(c=document.createElement("div"),c.className="filter-dropdown-selected-tags js-dropdown-selected-tags",d.appendChild(c)),c}function r(d,c){if((d.getAttribute("data-selection-mode")||"single")!=="multiple")return;let n=o(d);n.innerHTML="",c.forEach(({value:i,text:p})=>{let m=document.createElement("div");m.className="tag",m.dataset.value=i,m.innerHTML=`${p} <span class="tag__remove" data-value="${i}">\xD7</span>`,n.appendChild(m)})}function a(d){document.querySelectorAll(".ymc-dropdown.open").forEach(c=>{c!==d&&c.classList.remove("open")})}document.addEventListener("click",d=>{d.target.closest(".ymc-dropdown")||document.querySelectorAll(".ymc-dropdown.open").forEach(c=>c.classList.remove("open"))})}var me=j(()=>{M();N();R();Q();Y();z()});var ye={};G(ye,{initRangeSliderFilter:()=>Me});function Me(){document.querySelectorAll('[data-filter-type="range"]').forEach(e=>{let s=e.querySelector("[data-tags]").dataset.tags,o=e.querySelector("[data-selected-tags]");if(s&&o){s=JSON.parse(s);let r=e.querySelector(".slider-1"),a=e.querySelector(".slider-2"),d=e.querySelector(".range1"),c=e.querySelector(".range2"),u=[],l=e.querySelector(".slider-track"),n=Object.keys(s).length,i=Object.entries(s),p=0;i.sort((f,v)=>!isNaN(Number(f[1]))&&!isNaN(Number(v[1]))?f[1]-v[1]:f[1].localeCompare(v[1]));for(let[f,v]of i)u.push([f,v]);r.setAttribute("max",n-1),a.setAttribute("max",n-1),a.setAttribute("value",n-1),d.textContent=u[0][1],c.textContent=u[n-1][1];let m=r.max;r.addEventListener("input",function(f){parseInt(a.value)-parseInt(r.value)<=p&&(r.value=parseInt(a.value)-p),r.style.zIndex=10,a.style.zIndex=0,d.textContent=u[r.value][1];let v=Number(r.value),g=Number(a.value);o.dataset.selectedTags=fe(v,g,u),Z(r,a,m,l)}),a.addEventListener("input",function(f){parseInt(a.value)-parseInt(r.value)<=p&&(a.value=parseInt(r.value)+p),r.style.zIndex=0,a.style.zIndex=10,c.textContent=u[a.value][1];let v=Number(r.value),g=Number(a.value);o.dataset.selectedTags=fe(v,g,u),Z(r,a,m,l)}),Z(r,a,m,l)}e.querySelector(".apply-button button").addEventListener("click",async function(r){let a=P(e);F(a),E(a,"search"),L(a,{terms:H(a),paged:1}),await S(a)})})}function Z(t,e,s,o){let r=t.value/s*100,a=e.value/s*100;o.style.background=`linear-gradient(to right, #1F1F1F ${r}% , #1F1F1F ${r}% , #1F1F1F ${a}%, #1F1F1F ${a}%)`}function fe(t,e,s){let o="";for(let r=t;r<=e;r++)o+=s[r][0]+",";return o.replace(/,\s*$/,"")}var ge=j(()=>{M();N();R();Y();z()});var he={};G(he,{initDatePickerFilter:()=>Ie});function Ie(){document.querySelectorAll(".date-picker-wrapper").forEach(e=>{let s=e.querySelector(".js-dropdown-selected"),o=e.querySelector(".date-picker__dropdown"),r=e.querySelector(".js-date-range"),a=e.querySelectorAll(".js-dropdown-item"),d=e.querySelector(".js-dropdown-close"),c=e.querySelector(".js-btn-cancel"),u=e.querySelector(".js-btn-apply");s.addEventListener("click",()=>{o.classList.toggle("is-open"),s.classList.toggle("is-open")}),a.forEach(l=>{l.addEventListener("change",async n=>{var f,v;let i=P(n.target),p=l.querySelector("input"),m=p.dataset.value;a.forEach(g=>g.classList.remove("is-selected")),l.classList.add("is-selected"),s.textContent=p.value,m==="other_time"?(r.classList.add("is-open"),(f=o.classList)==null||f.remove("is-open")):(v=r.classList)==null||v.remove("is-open"),F(i),E(i,"search"),L(i,{date_filter:{type:m},paged:1}),m!=="other_time"&&await S(i)})}),c&&c.addEventListener("click",l=>{var i;l.stopPropagation(),(i=r.classList)==null||i.remove("is-open"),o.querySelector(".js-dropdown-item").classList.add("is-selected");let n=o.querySelector('input[data-value="all_time"]');n&&(n.checked=!0,s.textContent=n.value,n.dispatchEvent(new Event("change",{bubbles:!0})))}),d&&d.addEventListener("click",l=>{l.stopPropagation(),o.classList.remove("is-open"),s.classList.remove("is-open")}),u&&u.addEventListener("click",async l=>{l.stopPropagation();let n=P(l.target),i=parseInt(e.querySelector('.js-date-range input[name="date_from"]').dataset.timestamp),p=parseInt(e.querySelector('.js-date-range input[name="date_to"]').dataset.timestamp),m=e.querySelector(".notification");p>=i?(m.classList.add("is-hidden"),F(n),E(n,"search"),L(n,{date_filter:{type:"other_time",from:i,to:p},paged:1}),await S(n)):m.classList.remove("is-hidden")}),document.addEventListener("click",l=>{e.contains(l.target)||(o.classList.remove("is-open"),s.classList.remove("is-open"))}),jQuery(".datepicker").datepicker({dateFormat:"M dd, yy",showAnim:"slideDown",monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],onSelect:function(l,n){let i=new Date(l).getTime()/1e3,p=n.input[0];p.dataset.timestamp=i}})})}var ve=j(()=>{z();R();N();M()});async function be(t){let e=document.querySelectorAll(".js-ymc-container [data-filter-type]"),s=new Set;e.forEach(o=>{let r=o.dataset.filterType;s.add(r)});for(let o of s)switch(o){case"default":let{initDefaultFilter:r}=await Promise.resolve().then(()=>(ue(),de));r();break;case"dropdown":let{initDropdownFilter:a}=await Promise.resolve().then(()=>(me(),pe));a();break;case"range":let{initRangeSliderFilter:d}=await Promise.resolve().then(()=>(ge(),ye));d();break;case"date_picker":let{initDatePickerFilter:c}=await Promise.resolve().then(()=>(ve(),he));c();break;default:console.warn(`Unknown filter type: ${o}`)}}M();O();function K(t){if(t&&t.dataset.gridStyle==="masonry"){let e=t.dataset.filterId;y.addAction(`ymc/grid/after_update_${e}`,function(s,o){let r=o.querySelector(".js-ajax-content"),a=s.posts_count;r.classList.add("posts-grid--masonry"),Ne(r,e,a)})}}function Ne(t,e,s){let o=!1,r=s||4,a=20,d=4,c=!1,u=!0,l=!1,n=!1;o=y.applyFilters("ymc/grid/masonry/staticContent",o),o=y.applyFilters("ymc/grid/masonry/staticContent_"+e,o),a=y.applyFilters("ymc/grid/masonry/gutter",a),a=y.applyFilters("ymc/grid/masonry/gutter_"+e,a),d=y.applyFilters("ymc/grid/masonry/maxColumns",d),d=y.applyFilters("ymc/grid/masonry/maxColumns_"+e,d),c=y.applyFilters("ymc/grid/masonry/useMin",c),c=y.applyFilters("ymc/grid/masonry/useMin_"+e,c),u=y.applyFilters("ymc/grid/masonry/useTransform",u),u=y.applyFilters("ymc/grid/masonry/useTransform_"+e,u),l=y.applyFilters("ymc/grid/masonry/animate",l),l=y.applyFilters("ymc/grid/masonry/animate_"+e,l),n=y.applyFilters("ymc/grid/masonry/center",n),n=y.applyFilters("ymc/grid/masonry/center_"+e,n);let i=new MagicGrid({container:t,static:o,items:r,gutter:a,maxColumns:d,useMin:c,useTransform:u,animate:l,center:n});i.onReady(()=>{y.doAction("ymc/grid/masonry/magicGrid_ready",t),y.doAction("ymc/grid/masonry/magicGrid_ready_"+e,t)}),i.onPositionComplete(()=>{y.doAction("ymc/grid/masonry/magicGrid_position_complete",t),y.doAction("ymc/grid/masonry/magicGrid_position_complete_"+e,t)}),i.listen(),i.positionItems()}O();async function Se(){document.querySelectorAll(".js-ymc-container").forEach(e=>{y.doAction("ymc/grid/cancel_fetch",e),e.dataset.loadingEnabled==="true"&&(S(e),K(e))})}B();O();W();function Le(){y.addAction("ymc/grid/after_update",function(t,e){document.querySelectorAll(".ymc-filter-grids .js-ymc-popup-trigger").forEach(s=>{s.addEventListener("click",He)})})}async function He(t){t.preventDefault();let e=document.querySelector("body"),s=this.closest(".js-ymc-container"),o=JSON.parse(s.dataset.params),r=this.closest(".post-card"),a=this.getAttribute("data-grid-id"),d=this.getAttribute("data-post-id"),c=this.getAttribute("data-counter"),u=document.querySelector(`#ymc-popup-${a}`),l=u.querySelector(".js-ymc-popup-wrapper"),n=u.querySelector(".js-ymc-btn-popup-close"),i=u.querySelector(".js-ymc-popup-body"),p=o.preloader_settings.icon+".svg",m=o.preloader_settings.filter_preloader,f=o.preloader_settings.custom_filters_css,v=o.filter_id;if(!u)return;e.style.overflow="hidden",n.addEventListener("click",function(b){u.classList.remove("is-open"),e.style.overflow="auto"}),u.addEventListener("click",function(b){b.target===u&&(u.classList.remove("is-open"),e.style.overflow="auto")});let g=new FormData;g.append("action","get_post_to_popup"),g.append("nonce_code",_ymc_fg_object.getPostToPopup_nonce),g.append("post_id",d),g.append("grid_id",a),g.append("counter",c),i.innerHTML="",p=y.applyFilters("ymc/grid/preloader",p),p=y.applyFilters("ymc/grid/preloader_"+o.filter_id,p),J(r,"replace","js-grid-item",p,f,m,v),y.doAction("ymc/popup/before_open",u),y.doAction("ymc/popup/before_open_"+o.filter_id,u);let h;try{if(h=await fetch($,{method:"POST",body:g}),!h.ok){console.error(`HTTP error: ${h.status}`);return}let b=await h.json();if(!b.success){console.warn("No renderedHTML in response");return}let{body:_}=b.data;i.innerHTML=_,u.classList.add("is-open"),y.doAction("ymc/popup/after_open",u,_),y.doAction("ymc/popup/after_open_"+o.filter_id,u,_)}catch(b){console.error("Error occurred:",b)}finally{V(r)}}B();N();M();function _e(){let t=document.querySelectorAll(".js-ymc-container .js-search-field"),e=document.querySelectorAll(".js-ymc-container .js-search-button"),s=document.querySelectorAll(".js-ymc-container .js-clear-button");t&&t.forEach(o=>{o.addEventListener("keydown",Ge),o.addEventListener("input",De($e,400))}),e&&e.forEach(o=>{o.addEventListener("click",Oe)}),s&&s.forEach(o=>{o.addEventListener("click",Je)}),document.addEventListener("click",ze)}function De(t,e){let s;return function(...o){let r=this;clearTimeout(s),s=setTimeout(()=>t.apply(r,o),e)}}async function $e(t){let e=this.value,s=this.closest(".js-ymc-container"),o=this.closest(".ymc-extra-search"),r=s.querySelector(".js-autocomplete-results"),a=s.querySelector(".js-clear-button"),d=this.dataset.gridId,c=this.dataset.stateAutocomplete,u=this.dataset.searchMode,l=[];if(a.classList.add("is-visible"),c==="no")return;let n=e.trim().replace(/[^\p{L}\p{N}\s\-]/gu,"");if(n.length<3){r.classList.remove("is-visible"),r.innerHTML="",a.classList.remove("is-visible");return}if(u==="filtered")if(o){let p=o.dataset.extraFilterId;l=D(document.querySelector(`.ymc-filter-${p}`)).terms}else l=D(s).terms;let i=new FormData;i.append("action","get_autocomplete_suggestions"),i.append("nonce_code",_ymc_fg_object.getAutocompletePosts_nonce),i.append("keyword",n),i.append("grid_id",d),i.append("terms",JSON.stringify(l));try{let p=await fetch($,{method:"POST",body:i});if(!p.ok){console.error(`HTTP error: ${p.status}`);return}let m=await p.json();if(!m.success){console.warn("No renderedHTML in response");return}let{results:f}=m.data;if(f.length===0){r.classList.remove("is-visible"),r.innerHTML="";return}r.innerHTML=f.map(v=>`<div class="clue-item js-clue-item" data-post-title="${v.title}" data-post-id="${v.id}">
                ${Re(v.context)}
             </div>`).join(""),Be(s),r.classList.add("is-visible")}catch(p){console.error("Error occurred:",p)}finally{}}function Be(t){t.querySelectorAll(".js-autocomplete-results .js-clue-item").forEach(e=>{e.addEventListener("click",async function(s){let o=s.target.closest(".js-clue-item"),r=o.closest(".ymc-extra-search"),a=o.dataset.postTitle;if(!o)return;let d=o.closest(".js-ymc-container"),c=d.querySelector(".js-search-field"),u=d.querySelector(".js-autocomplete-results"),l=d.querySelector(".js-clear-button"),n=document.createElement("div");n.innerHTML=o.innerHTML;let i=n.textContent.trim();if(c.value=i,c.dataset.postTitle=a,u.innerHTML="",u.classList.remove("is-visible"),l.classList.add("is-visible"),r){let p=r.dataset.extraFilterId;d=document.querySelector(`.ymc-filter-${p}`)}L(d,{search:a,paged:1}),await S(d)})})}async function Oe(){let t=this.closest(".js-ymc-container"),e=this.closest(".ymc-extra-search"),s=this.closest(".search-form").querySelector(".js-search-field"),o=t.querySelector(".js-autocomplete-results"),r=s.dataset.postTitle;r||(r=s.value);let a=r.trim().replace(/[^\p{L}\p{N}\s\-]/gu,"");if(a.length<3){console.log("Minimum keyword length: 2 characters");return}if(o.classList.remove("is-visible"),o.innerHTML="",s.dataset.postTitle="",e){let d=e.dataset.extraFilterId;t=document.querySelector(`.ymc-filter-${d}`)}L(t,{search:a}),await S(t)}async function Je(){let t=this.closest(".js-ymc-container"),e=this.closest(".ymc-extra-search"),s=this.closest(".search-form").querySelector(".js-search-field"),o=t.querySelector(".js-autocomplete-results");if(this.classList.remove("is-visible"),s.value="",o.classList.remove("is-visible"),o.innerHTML="",s.dataset.postTitle="",e){let r=e.dataset.extraFilterId;t=document.querySelector(`.ymc-filter-${r}`)}E(t,"search"),await S(t)}function Re(t){let e=document.createElement("div");e.innerHTML=t;function s(o){if(o.nodeType===Node.TEXT_NODE&&o.textContent.trim())return o.textContent=o.textContent.replace(/^(\s*)(\S)/,(r,a,d)=>a+d.toUpperCase()),!0;for(let r of o.childNodes)if(s(r))return!0;return!1}return s(e),e.innerHTML}function ze(t){document.querySelectorAll(".filter-posts-search").forEach(s=>{let o=s.querySelector(".js-autocomplete-results");s.contains(t.target)||(o.classList.remove("is-visible"),o.innerHTML="")})}async function Ge(t){let e=t.target,s=e.closest(".js-ymc-container"),o=e.closest(".ymc-extra-search"),r=s.querySelector(".js-autocomplete-results"),a=r.querySelectorAll(".js-clue-item"),c=e.dataset.stateAutocomplete!=="no",u=-1;if(c&&a.length&&r.classList.contains("is-visible")){if(a.forEach((n,i)=>{n.classList.contains("is-active")&&(u=i)}),t.key==="ArrowDown")if(t.preventDefault(),u<a.length-1){u>=0&&a[u].classList.remove("is-active");let n=a[u+1];n.classList.add("is-active"),l(e,n)}else{a[u].classList.remove("is-active");let n=a[0];n.classList.add("is-active"),l(e,n)}if(t.key==="ArrowUp")if(t.preventDefault(),u>0){a[u].classList.remove("is-active");let n=a[u-1];n.classList.add("is-active"),l(e,n)}else if(u===0){a[u].classList.remove("is-active");let n=a[a.length-1];n.classList.add("is-active"),l(e,n)}else{let n=a[a.length-1];n.classList.add("is-active"),l(e,n)}}if(t.key==="Enter"){if(t.preventDefault(),c&&r.classList.contains("is-visible")){let i=r.querySelector(".js-clue-item.is-active");if(i){let p=i.dataset.postTitle,m=document.createElement("div");m.innerHTML=i.innerHTML;let f=m.textContent.trim();if(e.value=f,e.dataset.postTitle=p,r.innerHTML="",r.classList.remove("is-visible"),s.querySelector(".js-clear-button").classList.add("is-visible"),o){let g=o.dataset.extraFilterId;s=document.querySelector(`.ymc-filter-${g}`)}L(s,{search:p,paged:1}),await S(s);return}}let n=s.querySelector(".js-search-button");n&&n.click()}t.key==="Escape"&&(r.classList.remove("is-visible"),r.innerHTML="",a.forEach(n=>n.classList.remove("is-active")),e.focus());function l(n,i){let p=document.createElement("div");p.innerHTML=i.innerHTML;let m=p.textContent.trim(),f=i.dataset.postTitle;n.value=m,n.dataset.postTitle=f}}N();M();function xe(){let t=document.querySelectorAll(".js-ymc-container .js-sort-dropdown");t&&t.forEach(e=>{let s=e.closest(".js-ymc-container"),o=e.closest(".ymc-extra-sort"),r=e.querySelector(".js-sort-dropdown-toggle"),a=e.querySelector(".js-sort-dropdown-menu"),d=e.querySelector(".js-sort-order-input"),c=e.querySelector(".js-selected-value");r.addEventListener("click",function(){e.classList.toggle("dropdown-open")}),a.querySelectorAll(".js-sort-item").forEach(u=>{u.addEventListener("click",async function(){let l=this.getAttribute("data-orderby"),n=this.getAttribute("data-order");if(u.closest(".js-sort-dropdown-menu").querySelectorAll(".js-sort-item").forEach(i=>{i.classList.remove("is-asc","is-desc")}),n==="DESC"?(n="ASC",this.setAttribute("data-order","ASC"),this.classList.add("is-asc"),this.classList.remove("is-desc"),c.classList.add("is-asc"),c.classList.remove("is-desc")):(n="DESC",this.setAttribute("data-order","DESC"),this.classList.add("is-desc"),this.classList.remove("is-asc"),c.classList.add("is-desc"),c.classList.remove("is-asc")),c.textContent=this.textContent,d.value=l,o){let i=o.dataset.extraFilterId;s=document.querySelector(`.ymc-filter-${i}`)}L(s,{order:n,orderby:l,paged:1}),await S(s)})}),document.addEventListener("click",function(u){e.contains(u.target)||e.classList.remove("dropdown-open")})})}document.addEventListener("DOMContentLoaded",()=>{be(),Se(),Le(),_e(),xe(),K()});
