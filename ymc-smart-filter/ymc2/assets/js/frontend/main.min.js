var Je=Object.defineProperty;var M=(t,e)=>()=>(t&&(e=t(t=0)),e);var K=(t,e)=>{for(var s in e)Je(t,s,{get:e[s],enumerable:!0})};var ue,$,Y=M(()=>{ue=_ymc_fg_object.path,$=_ymc_fg_object.ajax_url});var b,Z=M(()=>{b={normalize(t){return t.replace(/\//g,".")},addAction(t,e,s=10){wp.hooks.addAction(this.normalize(t),"ymc-filter",e,s)},doAction(t,...e){wp.hooks.doAction(this.normalize(t),...e)},addFilter(t,e,s=10){wp.hooks.addFilter(this.normalize(t),"ymc-filter",e,s)},applyFilters(t,e,...s){return wp.hooks.applyFilters(this.normalize(t),e,...s)}};(!window.ymcHooks||typeof window.ymcHooks.addAction!="function"||typeof window.ymcHooks.doAction!="function")&&(window.ymcHooks=b)});function A(t,e){if(!t||!t.dataset.params)return;let s;try{s=JSON.parse(t.dataset.params)}catch(r){console.error("Error parsing data-params:",r);return}Object.assign(s,e),t.dataset.params=JSON.stringify(s)}function G(t){if(!t||!t.dataset.params)return;let e;try{e=JSON.parse(t.dataset.params)}catch(s){console.error("Error parsing data-params:",s);return}return e}function F(t,e){if(!t||!t.dataset.params)return;let s;try{s=JSON.parse(t.dataset.params)}catch(a){console.error("Error parsing data-params:",a);return}(Array.isArray(e)?e:[e]).forEach(a=>{delete s[a]}),t.dataset.params=JSON.stringify(s)}var J=M(()=>{});function me(t){t.querySelectorAll(".js-pagination-numeric li a").forEach(e=>{e.addEventListener("click",Re(t))})}function Re(t){return function(e){var r;e.preventDefault();let s=1;(r=this.getAttribute("href"))!=null&&r.startsWith("#page")?s=parseInt(this.getAttribute("href").replace("#page=","")):s=parseInt(this.innerText),A(t,{paged:s}),w(t)}}var pe=M(()=>{J();B()});function fe(t){t.querySelector(".js-btn-load-more").addEventListener("click",Ue(t))}function Ue(t){return function(){this.classList.add("button--loading");let e=G(t),s=++e.paged;A(t,{paged:s}),w(t,"append")}}var ye=M(()=>{J();B()});function ee(t,e="replace",s="js-ajax-content",r=null,a=null,i=null,f=null){var n;let h=e==="append"?"beforeend":"afterbegin",d=e==="append"?"preloader--is-load-more":"preloader--is-numeric",y={none:"none",brightness:"brightness(1.4)",contrast:"contrast(1.5)",grayscale:"grayscale(100%)",invert:"invert(100%)",opacity:"opacity(40%)",saturate:"saturate(2)",sepia:"sepia(100%)"},l=r||"dual_arc.svg",c=l.replace(/\.\w+$/,""),o=null;if(typeof ymcHooks!="undefined"){let m=[];f&&m.push(`ymc/grid/preloader_${f}`),m.push("ymc/grid/preloader");for(let v of m)if(o=ymcHooks.applyFilters(v,null),o)break}let u=o||`${ue}/assets/images/preloaders/${l}`,p="";i==="custom_filter"?a&&(a.startsWith("filter:")&&(a=a.replace(/^filter:\s*/i,"")),p=` style="filter: ${a};"`):p=` style="filter: ${y[i]};"`;let g=`
        <div class="preloader ${d}">
            <img src="${u}" alt="preloader"${p}>
        </div>
        <div class="overlay"></div>`;(n=t.querySelector(`.${s}`))==null||n.insertAdjacentHTML(h,g)}function se(t){var e,s;(e=t.querySelector(".preloader"))==null||e.remove(),(s=t.querySelector(".overlay"))==null||s.remove()}var ae=M(()=>{Y()});function he(t){let e={root:null,rootMargin:"0px",threshold:.8};return new IntersectionObserver((s,r)=>{s.forEach(a=>{if(a.isIntersecting){let i=G(t),f=++i.paged;A(t,{paged:f}),w(t,"append"),r.unobserve(a.target)}})},e)}var ge=M(()=>{J();B()});function re(t){return Array.isArray(t)?t.map(e=>re(e)):t!==null&&typeof t=="object"?Object.keys(t).reduce((e,s)=>{let r=ze(s);return e[r]=re(t[s]),e},{}):Ve(t)}function ze(t){return t.replace(/_([a-z])/g,(e,s)=>s.toUpperCase())}function Ve(t){if(typeof t=="string"){let e=t.toLowerCase();if(e==="true")return!0;if(e==="false")return!1;if(!isNaN(t)&&t.trim()!=="")return Number(t)}return t}var ve=M(()=>{});function ne(t,e,s){let r=re(s),{general:a,pagination:i,navigation:f,scrollbar:h,useCustomSettings:d}=r,{autoHeight:y,autoplay:l,autoplayDelay:c,loop:o,centeredSlides:u,slidesPerView:p,spaceBetween:g,mousewheel:n,speed:m,effect:v}=a,x=document.querySelector(`.js-swiper-${t}-${e}`);x&&(f.visible&&x.querySelectorAll(".post-layout_carousel").forEach(j=>{j.classList.add("has-navigation-arrows")}),x.closest(".js-ajax-content").classList.add("posts-carousel"),!d&&new Swiper(x,{grabCursor:!0,spaceBetween:g,centeredSlides:u,autoHeight:y,autoplay:l?{delay:c}:!1,loop:o,slidesPerView:p,mousewheel:n?{invert:!0}:!1,speed:m,effect:v,fadeEffect:v==="fade"?{crossFade:!0}:"",creativeEffect:v==="creative"?{prev:{shadow:!0,translate:[0,0,-400]},next:{translate:["100%",0,0]}}:"",pagination:i.visible?{el:".swiper-pagination",clickable:!0,dynamicBullets:i.dynamicBullets,type:i.type}:!1,navigation:f.visible?{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}:{enabled:!1},scrollbar:{el:".swiper-scrollbar",draggable:!0,enabled:h.visible}}))}var be=M(()=>{ve()});async function w(t,e="replace"){var c;let s=JSON.parse(t.dataset.params),r=new FormData;r.append("action","get_filtered_posts"),r.append("nonce_code",_ymc_fg_object.getPosts_nonce),r.append("params",JSON.stringify(s)),r.append("filter_id",s.filter_id);let a=t.querySelector(".js-ajax-content"),i=t.getAttribute("data-first-load")===null;b.doAction("ymc/grid/before_update",t),b.doAction("ymc/grid/before_update_"+s.filter_id,t),b.doAction("ymc/grid/before_update_"+s.filter_id+"_"+s.counter,t);let f=s.preloader_settings.icon+".svg",h=s.preloader_settings.filter_preloader,d=s.preloader_settings.custom_filters_css,y=s.filter_id;f=b.applyFilters("ymc/grid/preloader",f),f=b.applyFilters("ymc/grid/preloader_"+s.filter_id,f),e==="append"?ee(t,"append","js-ajax-content",f,d,h,y):ee(t,"replace","js-ajax-content",f,d,h,y);let l;try{if(l=await fetch($,{method:"POST",body:r}),!l.ok){console.error(`HTTP error: ${l.status}`);return}let o=await l.json();if(!o.success){console.warn("No renderedHTML in response");return}(c=t.querySelector(".pagination"))==null||c.remove();let{rendered_posts:u,rendered_pagination:p,pagination_type:g,found_posts:n,paged:m,max_num_pages:v,posts_count:x,requires_swiper:j,scroll_filter_bar:q,results_text:S,filtered_posts_label:_}=o.data;if(n>0){a.classList.remove("posts-no-found");let L=t.querySelector(".filter-content .js-total-results-found");switch(L||(L=document.createElement("div"),L.className="total-results-found js-total-results-found",a.parentNode.insertBefore(L,a)),s.search!==void 0?L.innerHTML=S?`<span class="number-posts">${n}</span> ${S}`:"":_!=="none"?L.innerHTML=`${_} <span class="number-posts">${n}</span>`:L.innerHTML="",g){case"numeric":if(a.innerHTML=u,p&&(a.insertAdjacentHTML("afterend",p),me(t)),q==="yes"&&!i){t.querySelector(".filter-layout").scrollIntoView({behavior:"smooth",block:"start",inline:"start"});let k=t.getBoundingClientRect().top+window.scrollY-30;window.scrollTo({top:k,behavior:"smooth"})}t.setAttribute("data-first-load","false");break;case"loadmore":e==="append"?a.insertAdjacentHTML("beforeend",u):a.innerHTML=u,p&&v>m&&(a.insertAdjacentHTML("afterend",p),fe(t));break;case"infinite":e==="append"?a.insertAdjacentHTML("beforeend",u):a.innerHTML=u,v>m&&he(t).observe(a.querySelector(".post-card:last-child"));break;default:a.innerHTML=u;break}j&&await Ye(s)}else{a.classList.add("posts-no-found"),a.innerHTML=u;let L=t.querySelector(".filter-content .js-total-results-found");L&&(L.innerHTML="")}b.doAction("ymc/grid/after_update",o.data,t),b.doAction("ymc/grid/after_update_"+s.filter_id,o.data,t),b.doAction("ymc/grid/after_update_"+s.filter_id+"_"+s.counter,o.data,t)}catch(o){console.error("Error occurred:",o)}finally{se(t),b.doAction("ymc/grid/after_complete",l.status,t),b.doAction("ymc/grid/after_complete_"+s.filter_id,l.status,t),b.doAction("ymc/grid/after_complete_"+s.filter_id+"_"+s.counter,l.status,t)}}async function Ye(t){return new Promise(e=>{if(typeof Swiper!="undefined"){ne(t.filter_id,t.counter,t.carousel_settings),e();return}let s=document.createElement("link");s.rel="stylesheet",s.href=_ymc_fg_object.path+"assets/css/lib/swiper.min.css",document.head.appendChild(s);let r=document.createElement("script");r.src=_ymc_fg_object.path+"assets/js/lib/swiper.min.js",r.onload=()=>{ne(t.filter_id,t.counter,t.carousel_settings),e()},document.body.appendChild(r)})}var B=M(()=>{Y();Z();pe();ye();ae();ge();be()});function P(t){var s;let e=t.querySelector(".js-search-field");if(e){let r=t.querySelector(".js-autocomplete-results");(s=t.querySelector(".js-clear-button"))==null||s.classList.remove("is-visible"),r.classList.remove("is-visible"),r.innerHTML="",e.dataset.postTitle="",e.value=""}}var X=M(()=>{});var R,ce=M(()=>{R=new Set});function U(t,e){let s=e instanceof Map?e:new Map,r=new Set,a=t.dataset.filterId,i=Array.from(t.querySelectorAll("[data-filter-type]")),f=Array.from(document.querySelectorAll(`[data-extra-filter-id="${a}"] [data-filter-type]`)),h=[...i,...f],d=new Map;for(let c of h){let o=c.querySelector("[data-all-terms]");if(!o)continue;let u;try{let p=JSON.parse(o.dataset.allTerms);u=JSON.stringify([...new Set(p)].sort((g,n)=>g-n))}catch(p){console.warn("Parsing error data-all-terms:",p);continue}if(d.has(u)){let p=d.get(u),g=c.closest("[data-extra-filter-id]"),n=p.closest("[data-extra-filter-id]");g&&!n&&d.set(u,c)}else d.set(u,c)}let y={dropdown:c=>{let o=Array.from(c.querySelectorAll('input[type="checkbox"]:not(.js-dropdown-all-checkbox)')).filter(n=>n.checked);if(o.length>0)return o.map(n=>Number(n.dataset.value));let u=s.get(c)||[];if(u.length>0)return u.map(n=>Number(n.value));if(Array.from(s.values()).some(n=>n&&n.length>0))return[];let g=c.querySelector("[data-all-terms]");if(g)try{return JSON.parse(g.dataset.allTerms||"[]").map(Number)}catch(n){console.warn("Invalid data-all-terms:",n)}return[]},default:c=>Array.from(c.querySelectorAll(".filter-button.is-active:not(.js-filter-button-all)")).map(o=>Number(o.dataset.termid)),dependent:c=>{let o=(c.dataset.sequence||"").split(",").map(n=>n.trim()),u={};o.forEach(n=>{let m=c.querySelector(`[data-taxonomy="${n}"]`);if(!m)return;let v=Array.from(m.querySelectorAll(".js-dependent-checkbox:checked")).map(x=>Number(x.value));u[n]=v});let p=[],g=!0;for(let n=0;n<o.length;n++){let m=o[n],v=u[m]||[];g&&v.length>0?p.push(...v):g=!1}if(p.length===0){let n=c.querySelector(`[data-taxonomy="${o[0]}"]`);if(n)try{let m=JSON.parse(n.dataset.allTerms||"[]");p.push(...m.map(Number))}catch(m){console.warn("Parse root data-all-terms error",m)}}return p},range:c=>{let o="";return c.querySelectorAll(".js-tag-values").forEach(u=>{o+=u.dataset.selectedTags+","}),o=o.split(","),o=o.filter(u=>u!==""),o.map(u=>Number(u))},_default:()=>[]};for(let c of d.values()){let u=(y[c.dataset.filterType]||y._default)(c);if(u.length>0)u.forEach(p=>r.add(p));else if(!c.querySelector('.filter-button.is-active:not(.js-filter-button-all), input[type="checkbox"]:checked:not(.js-dropdown-all-checkbox)')){let g=c.querySelector("[data-all-terms]");if(g)try{JSON.parse(g.dataset.allTerms).map(Number).forEach(n=>{r.add(n)})}catch(n){console.warn("Parsing error data-all-terms",n)}}}return Array.from(r)}var te=M(()=>{});function I(t){if(!t)return null;let e=t.closest(".ymc-extra-filter");if(e){let s=e.dataset.extraFilterId;if(s){let r=document.querySelector(`.ymc-filter-${s}`);if(r)return r}}return t.closest(".js-ymc-container")}var W=M(()=>{});var Se={};K(Se,{initDefaultFilter:()=>Ge});function Ge(){document.querySelectorAll('.js-ymc-container [data-filter-type="default"]').forEach(e=>{let s=e.querySelectorAll(".filter-button:not(.js-filter-button-all)"),r=e.querySelectorAll(".filter-button.js-filter-button-all");s.forEach(a=>{a.addEventListener("click",Xe)}),r.forEach(a=>{a.addEventListener("click",We)})})}async function Xe(){let t=this,e=I(t),s=t.closest(".filter"),r=s.querySelectorAll(".filter-button:not(.js-filter-button-all)"),a=s.dataset.selectionMode==="multiple";a?t.classList.toggle("is-active"):(s.querySelectorAll("button.is-active").forEach(h=>h.classList.remove("is-active")),t.classList.add("is-active")),r.forEach(h=>{let d=Number(h.dataset.termid);h.classList.contains("is-active")?R.add(d):R.delete(d)});let i=s.querySelectorAll(".filter-button.is-active:not(.js-filter-button-all)");if(a&&i.length===0){let h=s.querySelector(".js-filter-button-all");if(h){let d=JSON.parse(h.dataset.allTerms).map(Number);r.forEach(y=>{let l=Number(y.dataset.termid);d.includes(l)&&(R.add(l),y.classList.remove("is-active"))})}}let f=s.querySelector(".js-filter-button-all");f&&(s.querySelectorAll(".filter-button.is-active:not(.js-filter-button-all)").length>0?f.classList.remove("is-active"):f.classList.add("is-active")),s.classList.toggle("js-has-selection",s.querySelectorAll("button.is-active:not(.js-filter-button-all)").length>0),P(e),F(e,"search"),A(e,{terms:U(e),paged:1}),await w(e)}async function We(){let t=this,e=I(t),s=t.closest(".filter-buttons"),r=JSON.parse(t.dataset.allTerms).map(Number);s.querySelectorAll(".filter-button:not(.js-filter-button-all)").forEach(i=>{let f=Number(i.dataset.termid);R.delete(f)}),r.forEach(i=>R.add(i)),s.querySelectorAll("button.is-active").forEach(i=>i.classList.remove("is-active")),t.closest(".filter").classList.remove("js-has-selection"),t.classList.add("is-active"),P(e),F(e,"search"),A(e,{terms:U(e),paged:1}),await w(e)}var _e=M(()=>{B();J();X();ce();te();W()});var Le={};K(Le,{initDropdownFilter:()=>Ke});function Ke(){let t=document.querySelectorAll('[data-filter-type="dropdown"]'),e=new Map;function s(c){return Number(c)}function r(c,o,u,p){let g=e.get(c)||[],n=String(u);g.some(m=>m.value===n)||(g.push({value:n,text:p||"",dropdown:o}),e.set(c,g),R.add(s(n)))}function a(c,o){let u=e.get(c)||[],p=String(o),g=u.findIndex(n=>n.value===p);g!==-1&&u.splice(g,1),e.set(c,u),R.delete(s(p))}function i(c,o){let u=e.get(o)||[];u.forEach(({value:p})=>{let g=c.querySelector(`input[data-value="${p}"]`);if(g){g.checked=!0;let n=g.closest(".js-dropdown-item");n&&n.classList.add("is-selected")}}),d(o,u)}function f(c){let o=U(c,e).map(n=>Number(n)),u=[];return c.querySelectorAll('[data-filter-type="dropdown"]').forEach(n=>{(e.get(n)||[]).forEach(v=>{let x=Number(v.value);isNaN(x)||u.push(x)})}),Array.from(new Set([...o,...u]))}function h(c){let o=c.querySelector(".js-dropdown-selected-tags");return o||(o=document.createElement("div"),o.className="filter-dropdown-selected-tags js-dropdown-selected-tags",c.appendChild(o)),o}function d(c,o){if((c.getAttribute("data-selection-mode")||"single")!=="multiple")return;let g=h(c);g.innerHTML="",o.forEach(({value:n,text:m})=>{let v=document.createElement("div");v.className="tag",v.dataset.value=n,v.innerHTML=`${m} <span class="tag__remove" data-value="${n}">\xD7</span>`,g.appendChild(v)})}function y(c){document.querySelectorAll(".ymc-dropdown.open").forEach(o=>{o!==c&&o.classList.remove("open")})}t.forEach(c=>{let o=c,u=c.querySelectorAll(".js-dropdown"),p=c.getAttribute("data-selection-mode")||"single";e.has(o)||e.set(o,[]),Array.from(c.querySelectorAll('input[type="checkbox"]:checked:not(.js-dropdown-all-checkbox)')).forEach(m=>{var q,S;let v=String(m.dataset.value),x=((S=(q=m.closest(".js-dropdown-item"))==null?void 0:q.querySelector(".term-name"))==null?void 0:S.textContent.trim())||"",j=m.closest(".js-dropdown");r(o,j,v,x)}),u.forEach(m=>{let v=m.querySelector(".js-dropdown-selected"),x=m.querySelector(".js-dropdown-label"),j=m.querySelector(".ymc-dropdown__list"),q=v.classList.contains("is-extended");if(p==="multiple"){let S=m.querySelector(".js-dropdown-all"),_;if(!S){S=document.createElement("li"),S.className="ymc-dropdown__item js-dropdown-item js-dropdown-all";let E=_ymc_fg_object.all_dropdown_label;S.innerHTML=`
                    <label class="ymc-dropdown__checkbox">
                        <input type="checkbox" class="js-dropdown-all-checkbox" /> 
                        <span class="checkmark"></span>
                        <span class="ymc-dropdown__checkbox">${E}</span>
                    </label>`;let k=j.querySelector(".ymc-dropdown__close");k?k.insertAdjacentElement("afterend",S):j.insertBefore(S,j.firstChild)}_=S.querySelector(".js-dropdown-all-checkbox");let L=_.cloneNode(!0);_.parentNode.replaceChild(L,_),_=L,_.addEventListener("change",async E=>{E.stopPropagation();let k=I(_),O=e.get(o),N=_.checked;O.length=0,m.querySelectorAll('input[type="checkbox"]:not(.js-dropdown-all-checkbox)').forEach(T=>{T.checked=!1;let C=T.closest(".js-dropdown-item");C&&C.classList.remove("is-selected")}),N?m.querySelectorAll("input[data-value]:not(.js-dropdown-all-checkbox)").forEach(T=>{T.checked=!0;let C=T.closest(".js-dropdown-item");C&&C.classList.add("is-selected");let D=C.textContent.trim();r(o,m,T.dataset.value,D),O.push({value:T.dataset.value,text:D,dropdown:m})}):O.splice(0,O.length),d(o,O),P(k),F(k,"search");let H=f(k);A(k,{terms:H,paged:1}),await w(k)})}if(v.addEventListener("click",S=>{if(S.stopPropagation(),y(m),m.classList.toggle("open")&&q){let L=v.querySelector(".js-dropdown-search");L.readOnly=!1,L.focus()}}),j&&(j.addEventListener("click",S=>{S.target.closest(".dropdown-close-btn")&&(S.stopPropagation(),m.classList.remove("open"))}),j.addEventListener("change",async S=>{var T;let _=S.target.closest('input[type="checkbox"]');if(!_||_.classList.contains("js-dropdown-all-checkbox"))return;let L=_.closest(".js-dropdown-item");if(!L)return;let E=I(_),k=_.getAttribute("data-value"),O=Number(k),N=((T=L.querySelector(".term-name"))==null?void 0:T.textContent.trim())||"",H=e.get(o);if(p==="multiple"){if(L.classList.toggle("is-selected",_.checked),_.checked)r(o,m,k,N);else{a(o,k);let D=H.findIndex(V=>V.value===k);D!==-1&&H.splice(D,1);let Q=m.querySelector(".js-dropdown-all-checkbox");Q&&(Q.checked=!1)}d(o,H),P(E),F(E,"search");let C=f(E);A(E,{terms:C,paged:1}),await w(E)}else{let C=_.checked;j.querySelectorAll(".js-dropdown-item").forEach(V=>{V.classList.remove("is-selected"),V.querySelector('input[type="checkbox"]').checked=!1});let D=H.findIndex(V=>V.dropdown===m);if(D!==-1){let V=H[D].value;a(o,V),H.splice(D,1)}C?(_.checked=!0,L.classList.add("is-selected"),x.textContent=N,r(o,m,k,N),H.push({value:k,text:N,dropdown:m}),q&&(v.querySelector(".js-dropdown-search").value=N)):(x.textContent=m.getAttribute("data-label")||"Select option",q&&(v.querySelector(".js-dropdown-search").value="")),d(o,H),P(E),F(E,"search");let Q=f(E);A(E,{terms:Q,paged:1}),await w(E)}})),q){let O=function(N,H,T=""){m.dataset.page="1",m.dataset.hasMore="true",fetch($,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"get_filter_search_terms",nonce_code:_ymc_fg_object.getFilterSearchTerms_nonce,taxonomy:N,filter_id:H,query:T})}).then(C=>C.json()).then(C=>{_.style.display="none",j.innerHTML="",C.data.close_btn&&j.insertAdjacentHTML("beforeend",C.data.close_btn),C.data.terms&&j.insertAdjacentHTML("beforeend",C.data.terms),m.dataset.page="1";let D=Number(C.data.terms_count||0);m.dataset.hasMore=D>=10?"true":"false",i(m,o),d(o,e.get(o)||[])}).catch(C=>{_.style.display="none",console.error("AJAX error:",C)})},S=v.querySelector(".js-dropdown-search"),_=v.querySelector(".js-dropdown-loader"),L=v.querySelector(".js-dropdown-clear"),E=S.dataset.taxonomy,k=S.dataset.filterId;if(L&&L.addEventListener("click",function(){S.value="",this.style.display="none",O(E,k)}),S){let N=null;S.addEventListener("input",H=>{let T=H.target.value.toLowerCase();clearTimeout(N),N=setTimeout(()=>{L&&(L.style.display=T.length>=2?"inline-block":"none"),T.length>=2?(_.style.display="inline-block",m.classList.add("open"),O(E,k,T)):T.length===0?O(E,k):_.style.display="none"},300)})}}});let n=h(o);n.dataset.listenerAdded||(n.addEventListener("click",async m=>{if(m.target.classList.contains("tag__remove")){let v=m.target.getAttribute("data-value"),x=Number(v),j=e.get(o),q=j.findIndex(S=>S.value===v);if(q!==-1){let{dropdown:S}=j[q];j.splice(q,1),a(o,v);let _=S.querySelector(`input[data-value="${v}"]`);_&&(_.checked=!1,_.closest(".js-dropdown-item").classList.remove("is-selected")),R.delete(x),d(o,j);let L=I(S);P(L),F(L,"search");let E=f(L);A(L,{terms:E,paged:1}),await w(L)}}}),n.dataset.listenerAdded="true")}),document.addEventListener("click",c=>{c.target.closest(".ymc-dropdown")||document.querySelectorAll(".ymc-dropdown.open").forEach(o=>o.classList.remove("open"))});function l(){document.querySelectorAll(".filter-dropdown .js-dropdown").forEach(n=>{let m=n.querySelector(".ymc-dropdown__list"),v=Number(n.dataset.termCount),x=Number(n.dataset.termThreshold)||40;v<x||m&&(n.dataset.page||(n.dataset.page="1"),n.dataset.hasMore||(n.dataset.hasMore="true"),n.dataset.loading||(n.dataset.loading="false"),m.addEventListener("scroll",async()=>{if(n.dataset.loading==="true"||n.dataset.hasMore==="false"||!(m.scrollTop+m.clientHeight>=m.scrollHeight-40))return;let q=Number(n.dataset.page)+1;n.dataset.loading="true",p(m);let S=await u(n,q,20);g(m),n.dataset.loading="false",S?n.dataset.page=String(q):n.dataset.hasMore="false"}))});async function u(n,m=1,v=20){var L,E,k,O;let x=n.querySelector(".ymc-dropdown__list");if(!x)return!1;let j=((E=(L=n.querySelector(".js-dropdown-search"))==null?void 0:L.dataset)==null?void 0:E.taxonomy)||n.dataset.taxonomy||"",q=((O=(k=n.querySelector(".js-dropdown-search"))==null?void 0:k.dataset)==null?void 0:O.filterId)||n.dataset.filterId||"",S=n.querySelector(".js-dropdown-search"),_=S?S.value.trim():"";try{let N=new URLSearchParams({action:"get_filter_search_terms",nonce_code:_ymc_fg_object.getFilterSearchTerms_nonce,taxonomy:j,filter_id:q,query:_,paged:m,per_page:v}),T=await(await fetch($,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:N})).json();if(!T.success)return console.warn("fetchDropdownTerms: server returned error",T),!1;if(T.data.close_btn&&(x.querySelector(".ymc-dropdown__close")||x.insertAdjacentHTML("afterbegin",T.data.close_btn)),T.data.terms&&T.data.terms.trim()!==""){x.insertAdjacentHTML("beforeend",T.data.terms);let C=n.closest('[data-filter-type="dropdown"]');if(typeof i=="function"&&C)try{i(n,C)}catch(Q){}let D=Number(T.data.terms_count||0);return!(isNaN(D)||D<v)}else return!1}catch(N){return console.error("fetchDropdownTerms error",N),!1}}function p(n){let m=n.querySelector(".ymc-dropdown__loader");m||(m=document.createElement("li"),m.className="ymc-dropdown__loader",m.textContent=window._ymc_fg_object&&_ymc_fg_object.loadingText?_ymc_fg_object.loadingText:"Loading\u2026",m.style.textAlign="center",m.style.padding="8px 0",n.appendChild(m)),m.style.display="block"}function g(n){let m=n.querySelector(".ymc-dropdown__loader");m&&(m.style.display="none")}}l()}var xe=M(()=>{B();J();X();ce();te();W();Y()});var je={};K(je,{initRangeSliderFilter:()=>Qe});function Qe(){document.querySelectorAll('[data-filter-type="range"]').forEach(e=>{let s=e.querySelector("[data-tags]").dataset.tags,r=e.querySelector("[data-selected-tags]");if(s&&r){s=JSON.parse(s);let a=e.querySelector(".slider-1"),i=e.querySelector(".slider-2"),f=e.querySelector(".range1"),h=e.querySelector(".range2"),d=[],y=e.querySelector(".slider-track"),l=Object.keys(s).length,c=Object.entries(s),o=0;c.sort((p,g)=>!isNaN(Number(p[1]))&&!isNaN(Number(g[1]))?p[1]-g[1]:p[1].localeCompare(g[1]));for(let[p,g]of c)d.push([p,g]);a.setAttribute("max",l-1),i.setAttribute("max",l-1),i.setAttribute("value",l-1),f.textContent=d[0][1],h.textContent=d[l-1][1];let u=a.max;a.addEventListener("input",function(p){parseInt(i.value)-parseInt(a.value)<=o&&(a.value=parseInt(i.value)-o),a.style.zIndex=10,i.style.zIndex=0,f.textContent=d[a.value][1];let g=Number(a.value),n=Number(i.value);r.dataset.selectedTags=we(g,n,d),ie(a,i,u,y)}),i.addEventListener("input",function(p){parseInt(i.value)-parseInt(a.value)<=o&&(i.value=parseInt(a.value)+o),a.style.zIndex=0,i.style.zIndex=10,h.textContent=d[i.value][1];let g=Number(a.value),n=Number(i.value);r.dataset.selectedTags=we(g,n,d),ie(a,i,u,y)}),ie(a,i,u,y)}e.querySelector(".apply-button button").addEventListener("click",async function(a){let i=I(e);P(i),F(i,"search"),A(i,{terms:U(i),paged:1}),await w(i)})})}function ie(t,e,s,r){let a=t.value/s*100,i=e.value/s*100;r.style.background=`linear-gradient(to right, #1F1F1F ${a}% , #1F1F1F ${a}% , #1F1F1F ${i}%, #1F1F1F ${i}%)`}function we(t,e,s){let r="";for(let a=t;a<=e;a++)r+=s[a][0]+",";return r.replace(/,\s*$/,"")}var Ae=M(()=>{B();J();X();te();W()});var qe={};K(qe,{initDatePickerFilter:()=>Ze});function Ze(){document.querySelectorAll(".date-picker-wrapper").forEach(e=>{let s=e.querySelector(".js-dropdown-selected"),r=e.querySelector(".date-picker__dropdown"),a=e.querySelector(".js-date-range"),i=e.querySelectorAll(".js-dropdown-item"),f=e.querySelector(".js-dropdown-close"),h=e.querySelector(".js-btn-cancel"),d=e.querySelector(".js-btn-apply");s.addEventListener("click",()=>{r.classList.toggle("is-open"),s.classList.toggle("is-open")}),i.forEach(y=>{y.addEventListener("change",async l=>{var p,g;let c=I(l.target),o=y.querySelector("input"),u=o.dataset.value;i.forEach(n=>n.classList.remove("is-selected")),y.classList.add("is-selected"),s.textContent=o.value,u==="other_time"?(a.classList.add("is-open"),(p=r.classList)==null||p.remove("is-open")):(g=a.classList)==null||g.remove("is-open"),P(c),F(c,"search"),A(c,{date_filter:{type:u},paged:1}),u!=="other_time"&&await w(c)})}),h&&h.addEventListener("click",y=>{var c;y.stopPropagation(),(c=a.classList)==null||c.remove("is-open"),r.querySelector(".js-dropdown-item").classList.add("is-selected");let l=r.querySelector('input[data-value="all_time"]');l&&(l.checked=!0,s.textContent=l.value,l.dispatchEvent(new Event("change",{bubbles:!0})))}),f&&f.addEventListener("click",y=>{y.stopPropagation(),r.classList.remove("is-open"),s.classList.remove("is-open")}),d&&d.addEventListener("click",async y=>{y.stopPropagation();let l=I(y.target),c=parseInt(e.querySelector('.js-date-range input[name="date_from"]').dataset.timestamp),o=parseInt(e.querySelector('.js-date-range input[name="date_to"]').dataset.timestamp),u=e.querySelector(".notification");o>=c?(u.classList.add("is-hidden"),P(l),F(l,"search"),A(l,{date_filter:{type:"other_time",from:c,to:o},paged:1}),await w(l)):u.classList.remove("is-hidden")}),document.addEventListener("click",y=>{e.contains(y.target)||(r.classList.remove("is-open"),s.classList.remove("is-open"))}),jQuery(".datepicker").datepicker({dateFormat:"M dd, yy",showAnim:"slideDown",monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],onSelect:function(y,l){let c=new Date(y).getTime()/1e3,o=l.input[0];o.dataset.timestamp=c}})})}var Te=M(()=>{W();X();J();B()});var Ee={};K(Ee,{initDependentFilter:()=>et});function et(){document.querySelectorAll('[data-filter-type="dependent"]').forEach(e=>{e.addEventListener("change",st),e.addEventListener("click",tt);let s=e.querySelector(".js-apply-button");s&&s.addEventListener("click",async function(r){r.preventDefault();let a=I(e);P(a),F(a,"search"),A(a,{terms:U(a),paged:1}),await w(a)})}),document.addEventListener("click",e=>{e.target.closest(".js-dependent")||document.querySelectorAll(".js-dependent.is-open").forEach(s=>s.classList.remove("is-open"))})}function tt(t){let e=t.target.closest(".js-dependent"),s=t.target.closest(".js-dropdown-close-btn");e&&e.classList.toggle("is-open"),s&&e.classList.remove("is-open")}async function st(t){if(!t.target.classList.contains("js-dependent-checkbox"))return;let e=t.target.closest(".js-dependent"),s=e.dataset.taxonomy,r=e.dataset.mode,a=e.closest(".filter-dependent").dataset.updateMode,i=e.closest(".filter-dependent"),f=i.className.match(/filter-(\d+)/)[1],h=I(e),d=e.querySelector(".js-dropdown-label"),y=`Select ${e.dataset.taxonomyLabel||s}`;if(r==="single")if(e.querySelectorAll(".js-dependent-checkbox").forEach(o=>{o!==t.target&&(o.checked=!1)}),t.target.checked){let o=t.target.closest(".ymc-dependent__checkbox").querySelector(".term-name").textContent;d.textContent=o}else{let o=`Select ${e.dataset.taxonomyLabel||s}`;d.textContent=o}if(r==="multiple"){let o=e.querySelectorAll(".js-dependent-checkbox:checked");if(o.length===0)d.textContent=y;else if(o.length===1){let u=o[0].closest(".ymc-dependent__checkbox").querySelector(".term-name").textContent;d.textContent=u}else d.textContent=`${o.length} selected`}let l=[...e.querySelectorAll(".js-dependent-checkbox:checked")].map(o=>o.value);a==="auto"&&(P(h),F(h,"search"),A(h,{terms:U(h),paged:1}),await w(h));let c={action:"load_dependent_terms",nonce_code:_ymc_fg_object.loadDependentTerms_nonce,payload:JSON.stringify({filter_id:f,taxonomy:s,selected:l})};try{let o=await fetch($,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(c).toString()});if(o.ok){let u=await o.json();if(u.success&&u.data.html){let p=i.querySelector(".filter-dependent-inner"),g=(i.dataset.sequence||"").split(","),n=g.indexOf(u.data.taxonomy),m=i.dataset.displayAllLevels==="true";g.slice(n+1).forEach(j=>{let q=p.querySelector(`[data-taxonomy="${j}"]`);if(q)if(m){let S=q.querySelector(".ymc-dependent__list");S&&(S.innerHTML='<li class="ymc-dependent__placeholder">No terms available</li>'),q.classList.add("is-disabled"),q.classList.remove("is-open");let _=q.querySelector(".js-dropdown-label"),L=`Select ${q.dataset.taxonomyLabel||j}`;_&&(_.textContent=L)}else q.remove()});let v=p.querySelector(`[data-taxonomy="${u.data.taxonomy}"]`);if(v)v.outerHTML=u.data.html;else{let j=p.querySelector(".js-apply-button");j?j.insertAdjacentHTML("beforebegin",u.data.html):p.insertAdjacentHTML("beforeend",u.data.html)}let x=p.querySelector(`[data-taxonomy="${u.data.taxonomy}"]`);x&&(x.querySelectorAll(".ymc-dependent__item").length>0?x.classList.remove("is-disabled"):x.classList.add("is-disabled"))}}}catch(o){console.error(o)}}var ke=M(()=>{Y();B();J();X();W();te()});var Ce={};K(Ce,{initAlphabeticalFilter:()=>rt});function rt(){console.log("Run initAlphabeticalFilter"),document.querySelectorAll('.js-ymc-container [data-filter-type="alphabetical"]').forEach(e=>{e.querySelectorAll(".filter-alphabetical__btn").forEach(r=>{r.addEventListener("click",ot)})})}async function ot(){let t=this,e=I(t),s=t.dataset.letter;t.closest(".filter-alphabetical").querySelectorAll(".filter-alphabetical__btn").forEach(r=>{r.classList.remove("is-active")}),t.classList.add("is-active"),P(e),F(e,"search"),A(e,{letter:s}),await w(e)}var Me=M(()=>{B();J();X();W()});async function Fe(t){let e=document.querySelectorAll(".js-ymc-container [data-filter-type]"),s=new Set;e.forEach(r=>{let a=r.dataset.filterType;s.add(a)});for(let r of s)switch(r){case"default":let{initDefaultFilter:a}=await Promise.resolve().then(()=>(_e(),Se));a();break;case"dropdown":let{initDropdownFilter:i}=await Promise.resolve().then(()=>(xe(),Le));i();break;case"range":let{initRangeSliderFilter:f}=await Promise.resolve().then(()=>(Ae(),je));f();break;case"date_picker":let{initDatePickerFilter:h}=await Promise.resolve().then(()=>(Te(),qe));h();break;case"dependent":let{initDependentFilter:d}=await Promise.resolve().then(()=>(ke(),Ee));d();break;case"alphabetical":let{initAlphabeticalFilter:y}=await Promise.resolve().then(()=>(Me(),Ce));y();break;default:console.warn(`Unknown filter type: ${r}`)}}Z();var at=!1,Pe=5,nt=400,ct=!1,le=new WeakSet;function z(...t){at&&console.log("[YMC Grid]",...t)}function Ie(t,e){let s=document.querySelectorAll(".js-ymc-container");z(`Containers found: ${s.length}`),s.length&&(s.forEach(r=>{if(!r.dataset.params){z("Skipped container without data-params",r);return}if(le.has(r)){z("The container is already initialized, skipping",r.dataset.filterId||"");return}b.doAction("ymc/grid/cancel_fetch",r),r.dataset.loadingEnabled==="true"?(z("Container initialization",r.dataset.filterId||""),t(r),e(r),le.add(r)):z("Loading for container is disabled",r.dataset.filterId||"")}),ct=!0)}function de(t,e,s=Pe){document.querySelector(".js-ymc-container[data-params]")?Ie(t,e):s>0?(z(`Container not found. Try again. (${Pe-s+1})`),setTimeout(()=>de(t,e,s-1),nt)):console.warn("The container never showed up.")}function it(t,e){new MutationObserver((r,a)=>{let i=document.querySelector(".js-ymc-container[data-params]");i&&!le.has(i)&&(z("Container detected via MutationObserver"),Ie(t,e),a.disconnect())}).observe(document.body,{childList:!0,subtree:!0})}function Ne(t,e){document.readyState==="complete"||document.readyState==="interactive"?(z("DOM is already loaded"),de(t,e)):(z("Waiting for the event DOMContentLoaded"),document.addEventListener("DOMContentLoaded",()=>{de(t,e)})),it(t,e)}B();Z();function oe(t){if(t&&t.dataset.gridStyle==="masonry"){let e=t.dataset.filterId;b.addAction(`ymc/grid/after_update_${e}`,function(s,r){let a=r.querySelector(".js-ajax-content"),i=s.posts_count;a.classList.add("posts-grid--masonry"),lt(a,e,i)})}}function lt(t,e,s){let r=!1,a=s||4,i=20,f=4,h=!1,d=!0,y=!1,l=!1;r=b.applyFilters("ymc/grid/masonry/staticContent",r),r=b.applyFilters("ymc/grid/masonry/staticContent_"+e,r),i=b.applyFilters("ymc/grid/masonry/gutter",i),i=b.applyFilters("ymc/grid/masonry/gutter_"+e,i),f=b.applyFilters("ymc/grid/masonry/maxColumns",f),f=b.applyFilters("ymc/grid/masonry/maxColumns_"+e,f),h=b.applyFilters("ymc/grid/masonry/useMin",h),h=b.applyFilters("ymc/grid/masonry/useMin_"+e,h),d=b.applyFilters("ymc/grid/masonry/useTransform",d),d=b.applyFilters("ymc/grid/masonry/useTransform_"+e,d),y=b.applyFilters("ymc/grid/masonry/animate",y),y=b.applyFilters("ymc/grid/masonry/animate_"+e,y),l=b.applyFilters("ymc/grid/masonry/center",l),l=b.applyFilters("ymc/grid/masonry/center_"+e,l);let c=new MagicGrid({container:t,static:r,items:a,gutter:i,maxColumns:f,useMin:h,useTransform:d,animate:y,center:l});c.onReady(()=>{b.doAction("ymc/grid/masonry/magicGrid_ready",t),b.doAction("ymc/grid/masonry/magicGrid_ready_"+e,t)}),c.onPositionComplete(()=>{b.doAction("ymc/grid/masonry/magicGrid_position_complete",t),b.doAction("ymc/grid/masonry/magicGrid_position_complete_"+e,t)}),c.listen(),c.positionItems()}async function He(){Ne(w,oe)}Y();Z();ae();function De(){b.addAction("ymc/grid/after_update",function(t,e){document.querySelectorAll(".ymc-filter-grids .js-ymc-popup-trigger").forEach(s=>{s.addEventListener("click",dt)})})}async function dt(t){t.preventDefault();let e=document.querySelector("body"),s=this.closest(".js-ymc-container"),r=JSON.parse(s.dataset.params),a=this.closest(".post-card"),i=this.getAttribute("data-grid-id"),f=this.getAttribute("data-post-id"),h=this.getAttribute("data-counter"),d=document.querySelector(`#ymc-popup-${i}`),y=d.querySelector(".js-ymc-popup-wrapper"),l=d.querySelector(".js-ymc-btn-popup-close"),c=d.querySelector(".js-ymc-popup-body"),o=r.preloader_settings.icon+".svg",u=r.preloader_settings.filter_preloader,p=r.preloader_settings.custom_filters_css,g=r.filter_id;if(!d)return;e.style.overflow="hidden",l.addEventListener("click",function(v){d.classList.remove("is-open"),e.style.overflow="auto"}),d.addEventListener("click",function(v){v.target===d&&(d.classList.remove("is-open"),e.style.overflow="auto")});let n=new FormData;n.append("action","get_post_to_popup"),n.append("nonce_code",_ymc_fg_object.getPostToPopup_nonce),n.append("post_id",f),n.append("grid_id",i),n.append("counter",h),c.innerHTML="",o=b.applyFilters("ymc/grid/preloader",o),o=b.applyFilters("ymc/grid/preloader_"+r.filter_id,o),ee(a,"replace","js-grid-item",o,p,u,g),b.doAction("ymc/popup/before_open",d),b.doAction("ymc/popup/before_open_"+r.filter_id,d);let m;try{if(m=await fetch($,{method:"POST",body:n}),!m.ok){console.error(`HTTP error: ${m.status}`);return}let v=await m.json();if(!v.success){console.warn("No renderedHTML in response");return}let{body:x}=v.data;c.innerHTML=x,d.classList.add("is-open"),b.doAction("ymc/popup/after_open",d,x),b.doAction("ymc/popup/after_open_"+r.filter_id,d,x)}catch(v){console.error("Error occurred:",v)}finally{se(a)}}Y();J();B();function $e(){let t=document.querySelectorAll(".js-ymc-container .js-search-field"),e=document.querySelectorAll(".js-ymc-container .js-search-button"),s=document.querySelectorAll(".js-ymc-container .js-clear-button");t&&t.forEach(r=>{r.addEventListener("keydown",vt),r.addEventListener("input",ut(mt,400))}),e&&e.forEach(r=>{r.addEventListener("click",ft)}),s&&s.forEach(r=>{r.addEventListener("click",yt)}),document.addEventListener("click",gt)}function ut(t,e){let s;return function(...r){let a=this;clearTimeout(s),s=setTimeout(()=>t.apply(a,r),e)}}async function mt(t){let e=this.value,s=this.closest(".js-ymc-container"),r=this.closest(".ymc-extra-search"),a=s.querySelector(".js-autocomplete-results"),i=s.querySelector(".js-clear-button"),f=this.dataset.gridId,h=this.dataset.stateAutocomplete,d=this.dataset.searchMode,y=[];if(i.classList.add("is-visible"),h==="no")return;let l=e.trim().replace(/[^\p{L}\p{N}\s\-]/gu,"");if(l.length<3){a.classList.remove("is-visible"),a.innerHTML="",i.classList.remove("is-visible");return}if(d==="filtered")if(r){let o=r.dataset.extraFilterId;y=G(document.querySelector(`.ymc-filter-${o}`)).terms}else y=G(s).terms;let c=new FormData;c.append("action","get_autocomplete_suggestions"),c.append("nonce_code",_ymc_fg_object.getAutocompletePosts_nonce),c.append("keyword",l),c.append("grid_id",f),c.append("terms",JSON.stringify(y));try{let o=await fetch($,{method:"POST",body:c});if(!o.ok){console.error(`HTTP error: ${o.status}`);return}let u=await o.json();if(!u.success){console.warn("No renderedHTML in response");return}let{results:p}=u.data;if(p.length===0){a.classList.remove("is-visible"),a.innerHTML="";return}a.innerHTML=p.map(g=>`<div class="clue-item js-clue-item" data-post-title="${g.title}" data-post-id="${g.id}">
                ${ht(g.context)}
             </div>`).join(""),pt(s),a.classList.add("is-visible")}catch(o){console.error("Error occurred:",o)}finally{}}function pt(t){t.querySelectorAll(".js-autocomplete-results .js-clue-item").forEach(e=>{e.addEventListener("click",async function(s){let r=s.target.closest(".js-clue-item"),a=r.closest(".ymc-extra-search"),i=r.dataset.postTitle;if(!r)return;let f=r.closest(".js-ymc-container"),h=f.querySelector(".js-search-field"),d=f.querySelector(".js-autocomplete-results"),y=f.querySelector(".js-clear-button"),l=document.createElement("div");l.innerHTML=r.innerHTML;let c=l.textContent.trim();if(h.value=c,h.dataset.postTitle=i,d.innerHTML="",d.classList.remove("is-visible"),y.classList.add("is-visible"),a){let o=a.dataset.extraFilterId;f=document.querySelector(`.ymc-filter-${o}`)}A(f,{search:i,paged:1}),await w(f)})})}async function ft(){let t=this.closest(".js-ymc-container"),e=this.closest(".ymc-extra-search"),s=this.closest(".search-form").querySelector(".js-search-field"),r=t.querySelector(".js-autocomplete-results"),a=s.dataset.postTitle;a||(a=s.value);let i=a.trim().replace(/[^\p{L}\p{N}\s\-]/gu,"");if(i.length<3){console.log("Minimum keyword length: 2 characters");return}if(r.classList.remove("is-visible"),r.innerHTML="",s.dataset.postTitle="",e){let f=e.dataset.extraFilterId;t=document.querySelector(`.ymc-filter-${f}`)}A(t,{search:i}),await w(t)}async function yt(){let t=this.closest(".js-ymc-container"),e=this.closest(".ymc-extra-search"),s=this.closest(".search-form").querySelector(".js-search-field"),r=t.querySelector(".js-autocomplete-results");if(this.classList.remove("is-visible"),s.value="",r.classList.remove("is-visible"),r.innerHTML="",s.dataset.postTitle="",e){let a=e.dataset.extraFilterId;t=document.querySelector(`.ymc-filter-${a}`)}F(t,"search"),await w(t)}function ht(t){let e=document.createElement("div");e.innerHTML=t;function s(r){if(r.nodeType===Node.TEXT_NODE&&r.textContent.trim())return r.textContent=r.textContent.replace(/^(\s*)(\S)/,(a,i,f)=>i+f.toUpperCase()),!0;for(let a of r.childNodes)if(s(a))return!0;return!1}return s(e),e.innerHTML}function gt(t){document.querySelectorAll(".filter-posts-search").forEach(s=>{let r=s.querySelector(".js-autocomplete-results");s.contains(t.target)||(r.classList.remove("is-visible"),r.innerHTML="")})}async function vt(t){let e=t.target,s=e.closest(".js-ymc-container"),r=e.closest(".ymc-extra-search"),a=s.querySelector(".js-autocomplete-results"),i=a.querySelectorAll(".js-clue-item"),h=e.dataset.stateAutocomplete!=="no",d=-1;if(h&&i.length&&a.classList.contains("is-visible")){if(i.forEach((l,c)=>{l.classList.contains("is-active")&&(d=c)}),t.key==="ArrowDown")if(t.preventDefault(),d<i.length-1){d>=0&&i[d].classList.remove("is-active");let l=i[d+1];l.classList.add("is-active"),y(e,l)}else{i[d].classList.remove("is-active");let l=i[0];l.classList.add("is-active"),y(e,l)}if(t.key==="ArrowUp")if(t.preventDefault(),d>0){i[d].classList.remove("is-active");let l=i[d-1];l.classList.add("is-active"),y(e,l)}else if(d===0){i[d].classList.remove("is-active");let l=i[i.length-1];l.classList.add("is-active"),y(e,l)}else{let l=i[i.length-1];l.classList.add("is-active"),y(e,l)}}if(t.key==="Enter"){if(t.preventDefault(),h&&a.classList.contains("is-visible")){let c=a.querySelector(".js-clue-item.is-active");if(c){let o=c.dataset.postTitle,u=document.createElement("div");u.innerHTML=c.innerHTML;let p=u.textContent.trim();if(e.value=p,e.dataset.postTitle=o,a.innerHTML="",a.classList.remove("is-visible"),s.querySelector(".js-clear-button").classList.add("is-visible"),r){let n=r.dataset.extraFilterId;s=document.querySelector(`.ymc-filter-${n}`)}A(s,{search:o,paged:1}),await w(s);return}}let l=s.querySelector(".js-search-button");l&&l.click()}t.key==="Escape"&&(a.classList.remove("is-visible"),a.innerHTML="",i.forEach(l=>l.classList.remove("is-active")),e.focus());function y(l,c){let o=document.createElement("div");o.innerHTML=c.innerHTML;let u=o.textContent.trim(),p=c.dataset.postTitle;l.value=u,l.dataset.postTitle=p}}J();B();function Oe(){let t=document.querySelectorAll(".js-ymc-container .js-sort-dropdown");t&&t.forEach(e=>{let s=e.closest(".js-ymc-container"),r=e.closest(".ymc-extra-sort"),a=e.querySelector(".js-sort-dropdown-toggle"),i=e.querySelector(".js-sort-dropdown-menu"),f=e.querySelector(".js-sort-order-input"),h=e.querySelector(".js-selected-value");a.addEventListener("click",function(){e.classList.toggle("dropdown-open")}),i.querySelectorAll(".js-sort-item").forEach(d=>{d.addEventListener("click",async function(){let y=this.getAttribute("data-orderby"),l=this.getAttribute("data-order");if(d.closest(".js-sort-dropdown-menu").querySelectorAll(".js-sort-item").forEach(c=>{c.classList.remove("is-asc","is-desc")}),l==="DESC"?(l="ASC",this.setAttribute("data-order","ASC"),this.classList.add("is-asc"),this.classList.remove("is-desc"),h.classList.add("is-asc"),h.classList.remove("is-desc")):(l="DESC",this.setAttribute("data-order","DESC"),this.classList.add("is-desc"),this.classList.remove("is-asc"),h.classList.add("is-desc"),h.classList.remove("is-asc")),h.textContent=this.textContent,f.value=y,r){let c=r.dataset.extraFilterId;s=document.querySelector(`.ymc-filter-${c}`)}A(s,{order:l,orderby:y,paged:1}),await w(s)})}),document.addEventListener("click",function(d){e.contains(d.target)||e.classList.remove("dropdown-open")})})}Y();function Be(){ymcHooks.addAction("ymc/grid/after_update",function(t,e){e.querySelectorAll(".post-card .js-post-link").forEach(s=>{s.addEventListener("click",()=>{let r=s.dataset.postId;if(!r)return;let a=`ymc_post_view_${r}`,i=Date.now(),f=24*60*60*1e3,h=localStorage.getItem(a);if(h)try{let l=JSON.parse(h);if(l.timestamp&&i-l.timestamp<f)return}catch(l){}localStorage.setItem(a,JSON.stringify({timestamp:i}));let d="action=update_track_view&post_id="+encodeURIComponent(r),y=new Blob([d],{type:"application/x-www-form-urlencoded;charset=UTF-8"});navigator.sendBeacon?navigator.sendBeacon($,y):fetch($,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:d,keepalive:!0}).then(l=>l.json()).then(l=>{if(l.success&&l.data.views){let c=s.closest(".post-card").querySelector(".js-post-views");c&&(c.textContent=l.data.views)}}).catch(console.error)})})})}document.addEventListener("DOMContentLoaded",()=>{Fe(),He(),De(),$e(),Oe(),oe(),Be()});
