var f=document.querySelector("body.js-ymc-admin"),a=document.querySelector("#ymc_main_meta_box .ymc-main"),S=a.dataset.postId,Y=_ymc_fg_object.path,_=_ymc_fg_object.ajax_url,M=a.querySelector("#ymc_main_meta_box .ymc-main #general"),A=a.querySelector("#ymc_main_meta_box .ymc-main #layouts"),b=a.querySelector("#ymc_main_meta_box .ymc-main #appearance"),V=a.querySelector("#ymc_main_meta_box .ymc-main #search"),N=a.querySelector("#ymc_main_meta_box .ymc-main #typography"),E=a.querySelector("#ymc_main_meta_box .ymc-main #advanced"),St=a.querySelector("#ymc_main_meta_box .ymc-main #shortcode"),G=a.querySelector("#ymc_main_meta_box .ymc-main #tools"),xt=a.querySelector("#ymc_main_meta_box .ymc-main #license");function F(e,t,r){let o="";if(r){let s=new Date;s.setTime(s.getTime()+r*24*60*60*1e3),o="; expires="+s.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/"}function R(e){let t=e+"=",r=document.cookie.split(";");for(let o=0;o<r.length;o++){let s=r[o];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null}function U(){if(a.querySelectorAll(".tabs-content .js-headline-accordion").forEach(e=>{e.addEventListener("click",Oe)}),R("hashAccordionYmc")){let e=R("hashAccordionYmc");a.querySelectorAll(`.tabs-content .js-headline-accordion[data-hash="${e}"]`).forEach(t=>{t.classList.add("is-active"),t.nextElementSibling.style.display="block",t.querySelector(".js-icon-accordion").classList.add("fa-chevron-up"),t.querySelector(".js-icon-accordion").classList.remove("fa-chevron-down")})}}function Oe(e){let t=e.target.closest(".js-headline-accordion"),r=t.nextElementSibling,o=t.querySelector(".js-icon-accordion"),s=t.dataset.hash;t.classList.toggle("is-active"),jQuery(r).slideToggle(),o.classList.toggle("fa-chevron-down"),o.classList.toggle("fa-chevron-up"),F("hashAccordionYmc",s,30),(s==="custom_css"||s==="custom_js")&&setTimeout(function(){window.ymcEditors&&(window.ymcEditors.css&&window.ymcEditors.css.refresh(),window.ymcEditors.js&&window.ymcEditors.js.refresh())},300)}function se(){let e=a.querySelectorAll(".tabs-sidebar .nav .nav__item"),t=a.querySelectorAll(".tabs-content .section");if(e.forEach(r=>{r.addEventListener("click",o=>{let s=o.target.closest(".nav__item"),n=s.dataset.hash;F("hashymc",n,30),e.forEach(d=>{d.classList.remove("is-current")}),t.forEach(d=>{n===d.getAttribute("id")?d.classList.add("is-active"):d.classList.remove("is-active")}),s.classList.add("is-current")})}),R("hashymc")!==""){let r=R("hashymc");e.forEach(o=>{r===o.dataset.hash&&(e.forEach(s=>{s.classList.remove("is-current")}),o.classList.add("is-current"),t.forEach(s=>{r===s.getAttribute("id")?s.classList.add("is-active"):s.classList.remove("is-active")}))})}U()}function J(e){e(".js-btn-tooltip").tooltip({classes:{"ui-tooltip":"ymc-tooltip","ui-tooltip-content":"ymc-tooltip-content"},position:{my:"center bottom-20",at:"center",collision:"fit"},content:function(){return e(this).attr("data-tooltip-html")}})}function j(e){e===void 0?f.insertAdjacentHTML("afterbegin",`<div class="preloader"><img src="${Y}/assets/images/preloader.svg" alt="preloader"></div>
                    <div class="overlay"></div>`):f.querySelector(e).insertAdjacentHTML("afterbegin",`<div class="preloader preloader--is-local"><img src="${Y}/assets/images/preloader.svg" alt="preloader"></div>
                    <div class="overlay overlay--is-local"></div>`)}function T(){var e,t;(e=f.querySelector(".preloader"))==null||e.remove(),(t=f.querySelector(".overlay"))==null||t.remove()}function q(e,t,r){typeof e=="string"?this.el=document.querySelector(e):this.el=e,this.tempName=t,this.data=r||null,this.folderPath=Y+"src/admin/js-templates/"}q.prototype.create=function(e){let t=new XMLHttpRequest,r=this;t.open("get",this.folderPath+this.tempName+".hbs",!0),t.onreadystatechange=function(){if(t.readyState===4&&t.status===200){let o=Handlebars.compile(t.response);r.el.innerHTML=o(r.data),e()}},t.send()};q.prototype.createAndWait=function(e){let t=new XMLHttpRequest,r=this;t.open("get",this.folderPath+this.tempName+".hbs",!0),t.onreadystatechange=function(){if(t.readyState===4&&t.status===200){let o=Handlebars.compile(t.response);e(o,r.el)}},t.send()};function W(){jQuery(".js-term-insert .js-term-sortable").sortable({cursor:"move",opacity:1,delay:150,handle:".js-term-handle",scroll:!1,start:function(e,t){t.item[0].classList.add("is-item-dragging"),t.item[0].closest(".terms-inner").classList.add("dragging")},stop:function(e,t){t.item[0].classList.remove("is-item-dragging"),t.item[0].closest(".terms-inner").classList.remove("dragging");let r=[];a.querySelectorAll('.js-term-insert .js-term-sortable input[type="checkbox"]').forEach(o=>{r.push(o.value)}),Ye(r)}})}async function Ye(e){let t=_,r=new URLSearchParams({action:"action_terms_sort",nonce_code:_ymc_fg_object.sortTermAjax_nonce,payload:JSON.stringify({terms_sort:e,post_id:S})});fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}).then(function(o){if(o.ok===!0)return o.json();console.error("Error occurred:",o.status)}).catch(o=>console.error(o))}function Q(){jQuery(".selected-posts .js-post-sortable").sortable({axis:"y",cursor:"move",opacity:1,delay:150,containment:"parent",start:function(e,t){t.item[0].closest(".js-post-sortable").classList.add("dragging")},stop:function(e,t){t.item[0].closest(".js-post-sortable").classList.remove("dragging")}})}function I(){let e=this.dataset.postId,t=this.querySelector(".post-title").innerText,r={postId:e,postTitle:t};this.classList.add("is-disabled"),new q(".ymc-main #general .selected-posts .list-posts","tmpl-selected-posts").createAndWait(function(s,n){n.insertAdjacentHTML("beforeend",s(r)),a.querySelector("#general .selected-posts .number-posts").innerText=a.querySelectorAll("#general .selected-posts .list-posts .post-selected").length,Q(),z()})}function B(){a.querySelectorAll("#general .feed-posts .js-scroll-posts .js-add-post").forEach(e=>{e.addEventListener("click",I)})}function z(){a.querySelectorAll("#general .selected-posts .post-selected .js-post-remove").forEach(e=>{e.addEventListener("click",function(){let t=this.dataset.postId;this.closest(".post-selected").remove(),a.querySelectorAll("#general .feed-posts .js-add-post").forEach(r=>{t===r.dataset.postId&&r.classList.remove("is-disabled")}),a.querySelector("#general .selected-posts .number-posts").innerText=a.querySelectorAll("#general .selected-posts .list-posts .post-selected").length})})}function L(e,t=document.body,r="seccess",o=3e3){let s=document.createElement("div");s.classList.add("notification",`notification--${r}`),s.innerHTML=e,document.querySelector(t).appendChild(s),setTimeout(()=>s.remove(),o)}function $(){a.querySelectorAll("#general .js-tax-insert .js-tax-settings").forEach(e=>{e.addEventListener("click",Ne)})}function Ne(){var c,i;a.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(m=>m.classList.remove("is-open"));let e=this.closest(".taxonomies-list__item");e.classList.add("is-open");let{taxName:t,taxOriginalName:r,taxLabel:o,taxBg:s,taxColor:n,taxStatus:d}=e.dataset;o=o||r,s=s||"#ffffff",n=n||"#ffffff",tb_show("&#9998; Taxonomy: &#91; "+o+" &#93;","/?TB_inline&inlineId=thickbox-tax-modal&width=800&height=500");let l=f.querySelector("#TB_window #TB_ajaxContent .form-taxonomy");jQuery(l.querySelector(".js-tax-bg")).wpColorPicker("color",s),jQuery(l.querySelector(".js-tax-color")).wpColorPicker("color",n),l.querySelector(".js-tax-name").value=o,(c=f.querySelector("#TB_window #TB_ajaxContent .js-btn-tax-save"))==null||c.addEventListener("click",Ie),(i=f.querySelector("#TB_window #TB_ajaxContent .js-btn-tax-reset"))==null||i.addEventListener("click",He)}function Ie(){let e=a.querySelector("#general .js-tax-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-taxonomy"),r=t.querySelector(".js-tax-bg").value,o=t.querySelector(".js-tax-color").value,s=t.querySelector(".js-tax-name").value,n=e.dataset.taxOriginalName,d=[];e.classList.add("changed"),e.dataset.taxBg=r,e.dataset.taxColor=o,e.dataset.taxLabel=s,e.dataset.taxStatus="changed",e.querySelector(".field-label").innerHTML=s||n,a.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(l=>{d.push({name:l.dataset.taxName,label:l.dataset.taxLabel,background:l.dataset.taxBg,color:l.dataset.taxColor,status:l.dataset.taxStatus})}),ae(d)}function He(){let e=a.querySelector("#general .js-tax-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-taxonomy"),r=[];jQuery(t.querySelector(".js-tax-bg")).wpColorPicker("color","#ffffff"),jQuery(t.querySelector(".js-tax-color")).wpColorPicker("color","#ffffff"),t.querySelector(".js-tax-name").value=e.dataset.taxOriginalName,e.classList.remove("changed"),e.dataset.taxBg="",e.dataset.taxColor="",e.dataset.taxLabel="",e.dataset.taxStatus="",e.querySelector(".field-label").innerHTML=e.dataset.taxOriginalName,a.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(o=>{r.push({name:o.dataset.taxName,label:o.dataset.taxLabel,background:o.dataset.taxBg,color:o.dataset.taxColor,status:o.dataset.taxStatus})}),ae(r)}async function ae(e){let t="#TB_window #TB_ajaxContent",r=_,o=new URLSearchParams({action:"action_save_taxonomy_attrs",nonce_code:_ymc_fg_object.saveTaxAttrAjax_nonce,payload:JSON.stringify({post_id:S,tax_attrs:e})});try{j(t);let s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()});if(s.ok){let n=await s.json();L(n.message,"#TB_window #TB_ajaxContent","success",2e3)}else console.error("Error HTTP: "+s.status)}catch(s){console.error("Error occurred:",s)}finally{T(t)}}function X(){a.querySelectorAll("#general .js-term-insert .js-term-settings").forEach(e=>{e.addEventListener("click",Re)})}function Re(){var P,ee,te,oe,re;a.querySelectorAll("#general .js-term-insert .term-item").forEach(H=>H.classList.remove("is-open"));let e=this.closest(".term-item");e.classList.add("is-open");let{termId:t,termName:r,termNameOrig:o,termBackground:s,termColor:n,termClass:d,termDefault:l,termVisible:c,termSlug:i,termTaxonomy:m,termIconAlignment:u,termIconClass:p,termIconColor:y,termIconUrl:x}=e.dataset;s=s||"",n=n||"",d=d||"",l=l||"false",c=c||"true",r=r||o,u=u||"left",p=p||"",y=y||"#ffffff",x=x||"",tb_show("&#9998; Term: &#91; "+r+" &#93;","/?TB_inline&inlineId=thickbox-term-modal&width=800&height=500");let g=f.querySelector("#TB_window #TB_ajaxContent .form-term"),v=g.querySelector(".js-term-bg"),h=g.querySelector(".js-term-color");if(s?jQuery(v).wpColorPicker("color",s):jQuery(v).val("").trigger("change"),n?jQuery(h).wpColorPicker("color",n):jQuery(h).val("").trigger("change"),jQuery(g.querySelector(".js-icon-color")).wpColorPicker("color",y),g.querySelector(".js-term-class").value=d,g.querySelector(".js-term-name").value=r,g.querySelector(".js-term-default").checked=l==="true",g.querySelector(".js-term-visible").checked=c==="true",g.querySelector(".js-icon-class").value=p,g.querySelectorAll(".js-icon-alignment").forEach(H=>{H.checked=H.value===u}),g.querySelector(".js-tax-sequence")){let H=g.querySelector(".js-related-terms-wrapper"),Be=(P=g.querySelector(".js-tax-sequence"))==null?void 0:P.dataset.taxSequence;H.innerHTML="",Ue(Be,i,t,g,m)}let w=g.querySelector(".js-domain"),C=g.querySelector(".js-icon-preview"),O=g.querySelector(".js-btn-icon-remove");x?C.innerHTML=`<img src="${w.getAttribute("value")}${x}" width="20">`:p?C.innerHTML=`<i class="${p}"></i>`:C.innerHTML="",O.classList.toggle("is-visible",!!p||!!x),(ee=f.querySelector("#TB_window #TB_ajaxContent .js-btn-term-save"))==null||ee.addEventListener("click",De),(te=f.querySelector("#TB_window #TB_ajaxContent .js-btn-term-reset"))==null||te.addEventListener("click",Fe),(oe=f.querySelector("#TB_window #TB_ajaxContent .js-enable-custom-icon"))==null||oe.addEventListener("change",Xe),(re=f.querySelector("#TB_window #TB_ajaxContent .js-upload-file"))==null||re.addEventListener("change",Ve),O==null||O.addEventListener("click",Z);let k=f.querySelector("#TB_window #TB_ajaxContent .js-enable-custom-icon");k.checked=!!x,k.dispatchEvent(new Event("change",{bubbles:!0})),Je(),We(),Qe(),$e()}async function De(){let e=a.querySelector("#general .js-term-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-term");e.classList.add("changed");let r=t.querySelector(".js-term-bg").value,o=t.querySelector(".js-term-color").value,s=t.querySelector(".js-term-class").value,n=t.querySelector(".js-term-name").value,d=t.querySelector(".js-term-default").checked,l=t.querySelector(".js-term-visible").checked,c=e.dataset.termNameOrig,i="left";t.querySelectorAll(".js-icon-alignment").forEach(h=>{h.checked&&(i=h.value)});let m=t.querySelector(".js-icon-class").value,u=t.querySelector(".js-icon-url").value,p=t.querySelector(".js-icon-color").value,y=e.querySelector(".checkbox-control").checked,x=t.querySelectorAll('.js-related-terms-list input[type="checkbox"]:checked'),g=Array.from(x).map(h=>parseInt(h.value,10)),v=[];e.querySelectorAll(".field-label").forEach(h=>{h.childNodes.forEach(w=>{w.nodeType===Node.TEXT_NODE&&w.textContent.trim()&&(w.remove(),h.insertAdjacentHTML("afterbegin",n||c))})}),t.querySelectorAll(".js-accordion-terms-header").forEach(h=>{let w=h.nextElementSibling;if(!w)return;let C=w.querySelectorAll('input[type="checkbox"]:checked').length>0;h.classList.toggle("has-checked",C)}),e.dataset.termBackground=r,e.dataset.termColor=o,e.dataset.termClass=s,e.dataset.termName=n,e.dataset.termDefault=d,e.dataset.termVisible=l,e.dataset.termIconAlignment=i,e.dataset.termIconClass=m,e.dataset.termIconUrl=u,e.dataset.termIconColor=p,e.dataset.termChecked=y,e.dataset.termStatus="changed",e.dataset.termRelatedTerms=JSON.stringify(g),a.querySelectorAll("#general .js-term-insert .term-item").forEach(h=>{v.push({term_id:h.dataset.termId,term_taxonomy:h.dataset.termTaxonomy,term_slug:h.dataset.termSlug,term_name_orig:h.dataset.termNameOrig,term_background:h.dataset.termBackground,term_color:h.dataset.termColor,term_class:h.dataset.termClass,term_default:h.dataset.termDefault,term_visible:h.dataset.termVisible,term_name:h.dataset.termName,term_checked:h.dataset.termChecked,term_status:h.dataset.termStatus,icon_class:h.dataset.termIconClass,icon_alignment:h.dataset.termIconAlignment,icon_color:h.dataset.termIconColor,icon_url:h.dataset.termIconUrl,related_terms:h.dataset.termRelatedTerms})}),await ne(v)}async function Fe(){let e=a.querySelector("#general .js-term-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-term"),r=[],{termNameOrig:o}=e.dataset,s=t.querySelector(".js-term-bg"),n=t.querySelector(".js-term-color");jQuery(s).val("").trigger("change"),jQuery(n).val("").trigger("change"),jQuery(t.querySelector(".js-icon-color")).wpColorPicker("color","#ffffff"),t.querySelector(".js-term-class").value="",t.querySelector(".js-term-name").value=o,t.querySelector(".js-term-default").checked=!1,t.querySelector(".js-term-visible").checked=!0,t.querySelector('.js-icon-alignment[value="left"]').checked=!0,t.querySelector(".js-icon-class").value="",t.querySelector(".js-icon-url").value="",t.querySelector(".js-icon-preview").innerHTML="",t.querySelector(".js-btn-icon-remove").classList.remove("is-visible"),t.querySelector(".upload-term-icon .label-file span").innerHTML="Choose a icon",t.querySelectorAll('.js-related-terms-list input[type="checkbox"]').forEach(l=>{l.checked=!1}),t.querySelectorAll(".js-accordion-terms-header").forEach(l=>{l.classList.remove("is-active","has-checked"),l.setAttribute("aria-expanded","false");let c=l.nextElementSibling;c&&(c.style.display="none")}),e.dataset.termRelatedTerms="[]";let d=e.querySelector(".field-label");if(d){let l=Array.from(d.childNodes).find(c=>c.nodeType===Node.TEXT_NODE&&c.textContent.trim()!=="");l&&(l.textContent=`${o} `)}e.classList.remove("changed"),e.dataset.termBackground="",e.dataset.termColor="",e.dataset.termClass="",e.dataset.termName=o,e.dataset.termDefault="false",e.dataset.termVisible="true",e.dataset.termIconAlignment="",e.dataset.termIconClass="",e.dataset.termIconUrl="",e.dataset.termIconColor="",e.dataset.termChecked=e.querySelector(".checkbox-control").checked,e.dataset.termStatus="",a.querySelectorAll("#general .js-term-insert .term-item").forEach(l=>{r.push({term_id:l.dataset.termId,term_slug:l.dataset.termSlug,term_name_orig:l.dataset.termNameOrig,term_background:l.dataset.termBackground,term_color:l.dataset.termColor,term_class:l.dataset.termClass,term_default:l.dataset.termDefault,term_visible:l.dataset.termVisible,term_name:l.dataset.termName,term_checked:l.dataset.termChecked,term_status:l.dataset.termStatus,icon_class:l.dataset.termIconClass,icon_alignment:l.dataset.termIconAlignment,icon_color:l.dataset.termIconColor,icon_url:l.dataset.termIconUrl,related_terms:l.dataset.termRelatedTerms||"[]"})}),await ne(r)}async function ne(e){let t="#TB_window #TB_ajaxContent",r=_,o=new URLSearchParams({action:"action_save_term_attrs",nonce_code:_ymc_fg_object.saveTermAttrAjax_nonce,payload:JSON.stringify({post_id:S,term_attrs:e})});try{j(t);let s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()});if(s.ok){let n=await s.json();L(n.message,"#TB_window #TB_ajaxContent","success",2e3)}else console.error("Error HTTP: "+s.status)}catch(s){console.error("Error occurred:",s)}finally{T(t)}}async function Ue(e,t,r,o,s){let n="#TB_window #TB_ajaxContent .js-related-terms-wrapper",d=o.querySelector(".js-related-terms-wrapper"),l=o.querySelector(".js-tax-dependency-chain"),c=_,i=new URLSearchParams({action:"action_update_related_terms",nonce_code:_ymc_fg_object.updateRelatedTerms_nonce,payload:JSON.stringify({post_id:S,sequence:e,current_term:t,current_tax:s,term_id:r})});try{j(n);let m=await fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i.toString()});if(m.ok){let u=await m.json();d.innerHTML=u.data.html,l.innerHTML=u.data.tax_chain,Ge(o)}else console.error("Error HTTP: "+m.status)}catch(m){console.error("Error occurred:",m)}finally{T(n)}}function Je(){let e=f.querySelectorAll("#TB_window #TB_ajaxContent .tab-button"),t=f.querySelectorAll("#TB_window #TB_ajaxContent .tab-content");e.forEach(r=>{r.addEventListener("click",()=>{e.forEach(o=>o.classList.remove("is-active")),t.forEach(o=>o.classList.remove("is-active")),r.classList.add("is-active"),f.querySelector("#TB_window #TB_ajaxContent #"+r.dataset.tab).classList.add("is-active")})})}function We(){var o,s;let e=f.querySelector("#TB_window #TB_ajaxContent"),t=e.querySelectorAll(".tab-button"),r=e.querySelectorAll(".tab-content");t.forEach(n=>n.classList.remove("is-active")),r.forEach(n=>n.classList.remove("is-active")),(o=e.querySelector('.tabs [data-tab="tabTerm"]'))==null||o.classList.add("is-active"),(s=e.querySelector(".tabs #tabTerm"))==null||s.classList.add("is-active")}function Qe(){let e=f.querySelector("#TB_window #TB_ajaxContent .form-term .js-field-search-icon"),t=f.querySelectorAll("#TB_window #TB_ajaxContent .form-term .js-icon-item i");e.addEventListener("input",()=>{let r=e.value.toLowerCase();t.forEach(o=>{let s=o.getAttribute("class").replace(/[\s.-]/g," ").toLowerCase();o.style.display=s.includes(r)?"inline-block":"none"})})}function $e(){let e=f.querySelectorAll("#TB_window #TB_ajaxContent .form-term .js-icon-item i"),t=f.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove");e.forEach(r=>{r.addEventListener("click",()=>{f.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove").classList.add("is-visible"),f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-class").value=r.getAttribute("class"),f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-preview").innerHTML=r.outerHTML,f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-url").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-upload-file").value="",t.addEventListener("click",Z)})})}function Z(){f.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove").classList.remove("is-visible"),f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-class").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-url").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-preview").innerHTML="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-upload-file").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .upload-term-icon .label-file span").innerHTML="Choose a icon"}function Xe(e){let t=f.querySelector("#TB_window #TB_ajaxContent"),r=t.querySelector(".js-upload-icon-wrap"),o=t.querySelector(".js-term-icon-selector"),s=this.checked;r.classList.toggle("is-hidden",!s),o.classList.toggle("is-hidden",s)}async function Ve(e){let t=_,r=e.target.files[0],o="#TB_window #TB_ajaxContent",s=f.querySelector("#TB_window #TB_ajaxContent .form-term"),n=s.querySelector(".js-icon-preview"),d=s.querySelector(".js-btn-icon-remove"),l=s.querySelector(".js-icon-class"),c=s.querySelector(".js-icon-url"),i=e.target.value.split("\\").pop(),m=s.querySelector(".js-domain");if(!r)return;let u=new FormData;u.append("icon",r),u.append("action","action_upload_term_icon"),u.append("post_id",S),u.append("nonce_code",_ymc_fg_object.uploadTermIconAjax_nonce);try{j(o);let p=await fetch(t,{method:"POST",credentials:"same-origin",body:u});if(p.ok){let y=await p.json();y.success&&y.data.url?(n.innerHTML=`<img src="${m.getAttribute("value")}${y.data.url}" width="20">`,l.value="",c.value=y.data.url,d.classList.add("is-visible"),d.addEventListener("click",Z),this.nextElementSibling.querySelector("span").innerHTML=i,L(y.data.message,"#TB_window #TB_ajaxContent","success",2e3)):L(y.data.message,"#TB_window #TB_ajaxContent","error",2e3)}else console.error("Error HTTP: "+p.status)}catch(p){console.error("Error occurred:",p)}finally{T(o)}}function Ge(e){let t=e.querySelector(".js-accordion-terms");if(t){let r=function(o){let s=o.nextElementSibling;if(!s)return;let n=s.querySelectorAll('input[type="checkbox"]:checked').length>0;o.classList.toggle("has-checked",n)};t.querySelectorAll(".js-accordion-terms-header").forEach(o=>{o.classList.remove("is-active","has-checked"),o.setAttribute("aria-expanded","false");let s=o.nextElementSibling;s&&(s.style.display="none",r(o),s.querySelectorAll('input[type="checkbox"]').forEach(n=>{n.addEventListener("change",()=>r(o))})),o.replaceWith(o.cloneNode(!0))}),t.querySelectorAll(".js-accordion-terms-header").forEach(o=>{o.addEventListener("click",function(){this.classList.toggle("is-active");let s=this.nextElementSibling,n=this.getAttribute("aria-expanded")==="true";this.setAttribute("aria-expanded",n?"false":"true"),s.style.display=n?"none":"block"})})}}function ce(){a.querySelector("#general .js-post-types").addEventListener("change",ze)}function le(){a.querySelector("#general .js-tax-insert").addEventListener("click",Ze)}function ie(){a.querySelector("#general .js-tax-clear").addEventListener("click",Ke)}function de(){a.querySelector("#general .js-tax-updated").addEventListener("click",et)}async function ze(){if(confirm("Are you sure change Post Type? IMPORTANT! Post Type Changes remove all taxonomies, terms and selected posts.")){let t=a.querySelectorAll("#general #ymc-post-types option:checked"),r=Array.from(t).map(s=>s.value),o={action:"action_get_taxonomies",nonce_code:_ymc_fg_object.getTaxAjax_nonce,payload:JSON.stringify({post_types:r,post_id:S})};try{j(),_ymc_fg_object.loadedFeedPosts_page=2;let s=await fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(s.ok){let n=await s.json(),d=n.taxonomies,l=n.posts,c={},i={},m=n.found_posts,u=a.querySelector("#general .posts-wrapper .js-scroll-posts"),p=a.querySelector("#general .posts-wrapper .feed-posts .number-posts");p.innerHTML=m,l.length>0?i={isPosts:!0,posts:l}:i={noPosts:!0,no_posts_found:"No posts found"},new q(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(g,v){var w;M.querySelector(".feed-posts .js-scroll-posts").innerHTML="",M.querySelector(".selected-posts .js-post-sortable").innerHTML="",(w=M.querySelector(".js-tax-sequence-wrapper"))==null||w.remove(),A.querySelector(".js-filter-group").innerHTML="";let h=A.querySelector(".js-toggle-filter-builder");h.value="default",h.dispatchEvent(new Event("change")),v.insertAdjacentHTML("beforeend",g(i)),u.querySelectorAll(".js-add-post").forEach(C=>{C.removeEventListener("click",I)}),B()}),Object.keys(d).length>0?c={taxonomies:d,isTax:!0}:c={isTax:!1},new q(".ymc-main .js-tax-insert","tmpl-taxonomy",c).create(function(){T(),d.length===0?a.querySelector(".js-control-bar").classList.add("is-hidden"):a.querySelector(".js-control-bar").classList.remove("is-hidden"),a.querySelector(".terms-wrapper .js-term-insert").innerHTML="",a.querySelector(".terms-wrapper").classList.add("is-hidden"),$()})}else console.error("Error HTTP: "+s.status)}catch(s){console.error("Error occurred:",s)}}else{let t=this.dataset.previousValue.split(",");a.querySelectorAll("#general #ymc-post-types option").forEach(r=>{r.selected=t.includes(r.value)})}}async function Ze(e){if(e.target.nodeName==="INPUT"){let t=e.target.value,r=e.target.dataset.label;if(e.target.checked){let o={action:"action_get_terms",nonce_code:_ymc_fg_object.getTermAjax_nonce,payload:JSON.stringify({slug:t,label:r,post_id:S})};try{j();let s=await fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(s.ok){let d=(await s.json()).data_obj,c={isTerms:d.terms.length>0?!0:[],tax_slug:d.tax_slug,tax_label:d.tax_label,terms:d.terms,no_terms:"No terms found"};new q(".ymc-main .js-term-insert","tmpl-term").createAndWait(function(m,u){T(),u.insertAdjacentHTML("beforeend",m(c)),a.querySelector(".terms-wrapper").classList.remove("is-hidden"),W(),X()})}}catch(s){console.error("Error occurred:",s)}}else confirm("Are you sure you want to disable this taxonomy?")?(a.querySelector(`.js-term-insert .js-tax-${t}`).remove(),a.querySelectorAll(".js-term-insert .cel").length===0&&a.querySelector(".terms-wrapper").classList.add("is-hidden")):e.target.checked=!0}}async function Ke(e){if(e.preventDefault(),confirm("Are you sure you want to remove all terms of taxonomies?")){let r={action:"action_remove_terms",nonce_code:_ymc_fg_object.removeTermsAjax_nonce,payload:JSON.stringify({post_id:S})};try{j();let o=await fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(r).toString()});if(o.ok){let s=await o.json();T(),a.querySelectorAll(".terms-wrapper .terms-grid .cel").forEach(n=>{n.remove()}),a.querySelector(".terms-wrapper").classList.add("is-hidden"),a.querySelectorAll("#general .js-tax-insert .js-tax-checkbox").forEach(n=>{n.checked=!1})}}catch(o){console.error("Error occurred:",o)}}}async function et(e){e.preventDefault();let t=a.querySelectorAll("#general #ymc-post-types option:checked"),r=Array.from(t).map(s=>s.value),o={action:"action_updated_taxonomies",nonce_code:_ymc_fg_object.updatedTaxAjax_nonce,payload:JSON.stringify({post_types:r})};try{j();let s=await fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(s.ok){let d=(await s.json()).taxonomies,l=[],c={},i=Object.keys(d).length,m=new q(".ymc-main .js-tax-insert","tmpl-taxonomy");if(a.querySelectorAll(".js-tax-insert .taxonomies-list__item").forEach(u=>{let p=u.dataset.taxName;l.push(p)}),i>0){if(i>l.length)for(let u in d)l.includes(u)||(c={taxonomies:{[u]:d[u]},isTax:!0},m.createAndWait(function(p,y){y.insertAdjacentHTML("beforeend",p(c))}));i<l.length&&l.forEach(u=>{var p,y;Object.keys(d).includes(u)||((p=a.querySelector('.js-tax-insert [data-tax-name="'+u+'"]'))==null||p.remove(),(y=a.querySelector(".js-term-insert .js-tax-"+u))==null||y.remove())})}T()}}catch(s){console.error("Error occurred:",s)}}function me(){let e=a.querySelector(".js-tax-sortable");jQuery(e).sortable({cursor:"move",handle:".js-tax-handle",opacity:1,delay:150,scroll:!1,start:function(t,r){r.item[0].classList.add("is-item-dragging"),e.classList.add("dragging")},stop:function(t,r){r.item[0].classList.remove("is-item-dragging"),e.classList.remove("dragging");let o=[];e.querySelectorAll(".taxonomies-list__item").forEach(s=>{o.push(s.dataset.taxName)}),tt(o)}})}async function tt(e){let t=_,r=new URLSearchParams({action:"action_taxonomies_sort",nonce_code:_ymc_fg_object.sortTaxAjax_nonce,payload:JSON.stringify({tax_sort:e,post_id:S})});fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}).then(function(o){if(o.ok===!0)return o.json();console.error("Error occurred:",o.status)}).catch(o=>console.error(o))}function ue(){a.querySelectorAll("#general .js-term-insert").forEach(e=>{e.addEventListener("click",function(t){if(t.target.closest(".tax-name")){let r=t.target.closest(".cel").querySelectorAll(".term-item .checkbox-control");t.target.checked?r.forEach(o=>{o.checked=!0}):r.forEach(o=>{o.checked=!1})}})})}function pe(){a.querySelector("#general .posts-wrapper .js-scroll-posts").addEventListener("scroll",K)}function fe(){a.querySelector("#general .posts-wrapper .js-field-search").addEventListener("input",rt),a.querySelector("#general .posts-wrapper .js-btn-search").addEventListener("click",ot),a.querySelector("#general .posts-wrapper .js-btn-clear").addEventListener("click",ye)}function K(){let e=a.querySelector("#general .posts-wrapper .js-scroll-posts"),t={root:e,rootMargin:"0px",threshold:.9};new IntersectionObserver((o,s)=>{o.forEach(n=>{if(n.isIntersecting&&!n.target.classList.contains("is-loaded")){n.target.classList.add("is-loaded");let d=Array.from(a.querySelectorAll("#general #ymc-post-types option:checked")).map(c=>c.value),l={action:"action_selected_posts",nonce_code:_ymc_fg_object.selectPostsAjax_nonce,payload:JSON.stringify({post_types:d,paged:_ymc_fg_object.loadedFeedPosts_page,post_id:S,posts_per_page:20})};j("#general .posts-wrapper .js-scroll-posts"),fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(l).toString()}).then(function(c){if(c.ok===!0)return c.json();console.error("Error occurred:",c.status)}).then(c=>{let i={};c.posts.length>0&&(i={isPosts:!0,posts:c.posts}),new q(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(u,p){T(),p.insertAdjacentHTML("beforeend",u(i)),_ymc_fg_object.loadedFeedPosts_page++,e.querySelectorAll(".js-add-post").forEach(y=>{y.removeEventListener("click",I)}),B()})}).catch(c=>console.error(c))}})},t).observe(e.querySelector("li:last-child"))}async function ot(){let e=a.querySelector("#general .posts-wrapper .js-scroll-posts"),t=a.querySelector("#general .posts-wrapper .feed-posts .number-posts"),r=a.querySelector("#general .posts-wrapper .js-field-search").value.toLowerCase();if(r.length>0){let o=a.querySelectorAll("#general #ymc-post-types option:checked"),s=Array.from(o).map(d=>d.value),n={action:"action_search_feed_posts",nonce_code:_ymc_fg_object.searchFeedPostsAjax_nonce,payload:JSON.stringify({post_types:s,post_id:S,phrase:r})};try{j("#general .posts-wrapper .js-scroll-posts"),this.classList.add("button--disabled");let d=await fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});if(d.ok){let l=await d.json(),c={},i=l.found_posts;l.posts.length>0?c={isPosts:!0,posts:l.posts}:c={noPosts:!0,no_posts_found:"No posts found"},t.innerHTML=i,this.classList.remove("button--disabled"),e.removeEventListener("scroll",K),e.scrollTo({top:0,left:0,behavior:"smooth"}),new q(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(u,p){T(),p.innerHTML=u(c),e.querySelectorAll(".js-add-post").forEach(y=>{y.removeEventListener("click",I)}),B()})}}catch(d){console.error("Error occurred:",d)}}}function rt(){this.value.length>0?this.nextElementSibling.classList.remove("is-hidden"):(this.nextElementSibling.classList.add("is-hidden"),ye().then(e=>{}))}async function ye(){let e=a.querySelector("#general .posts-wrapper .js-scroll-posts"),t=a.querySelector("#general .posts-wrapper .feed-posts .number-posts"),r=a.querySelector("#general .posts-wrapper .js-field-search"),o=a.querySelector("#general .posts-wrapper .js-btn-clear"),s=a.querySelectorAll("#general #ymc-post-types option:checked"),n=Array.from(s).map(i=>i.value),d=_,l="#general .posts-wrapper .js-scroll-posts",c=new URLSearchParams({action:"action_selected_posts",nonce_code:_ymc_fg_object.selectPostsAjax_nonce,payload:JSON.stringify({post_types:n,paged:1,post_id:S,posts_per_page:20})});o.classList.add("is-hidden"),r.value="",r.focus();try{j(l);let i=await fetch(d,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c.toString()});if(i.ok){let m=await i.json(),u={},p=m.found_posts;m.posts.length>0?u={isPosts:!0,posts:m.posts}:u={noPosts:!0,no_posts_found:"No posts found"},t.innerHTML=p,e.scrollTo({top:0,left:0,behavior:"smooth"}),new q(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(x,g){g.innerHTML=x(u),_ymc_fg_object.loadedFeedPosts_page=2,e.querySelectorAll(".js-add-post").forEach(v=>{v.removeEventListener("click",I)}),B(),e.addEventListener("scroll",K)})}}catch(i){console.error("Error occurred:",i)}finally{T(l)}}function he(){a.querySelector("#general .button-expand-wrapper .js-button-expand").addEventListener("click",function(){this.classList.toggle("is-expanded"),a.querySelectorAll("#general .select-posts-display__inner .cel .list-posts").forEach(e=>{e.classList.contains("is-expanded")?e.classList.remove("is-expanded"):e.classList.add("is-expanded")})})}function ge(){a.querySelector("#general .excluded-posts-checkbox .js-excluded-checkbox").addEventListener("click",function(e){let t=a.querySelector("#general .selected-posts .js-post-sortable");this.checked?t.classList.add("is-excluded"):t.classList.remove("is-excluded")})}function Se(){_e(),xe();let e=a.querySelectorAll("#layouts .filter-builder .js-filter-group .filter-item").length;a.querySelector("#layouts .filter-builder .js-add-filter").addEventListener("click",st(e)),a.querySelector("#layouts .js-toggle-filter-builder").addEventListener("change",_e)}function xe(){a.querySelectorAll("#layouts .filter-builder .js-remove-filter").forEach(e=>{e.addEventListener("click",at)})}function st(e){return async function(){let t=a.querySelector(".filter-builder .js-filter-group"),r={action:"action_get_selected_taxonomies",nonce_code:_ymc_fg_object.getSelectTaxAjax_nonce,payload:JSON.stringify({post_id:S})};try{j();let o=await fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(r).toString()});if(o.ok){let s=await o.json(),n=s.taxSelected.length>0,d=s.taxSelected.length>0?"":"is-disabled",l={filterIndex:e,isTaxSelected:n,isDisabledTax:d,taxSelected:s.taxSelected,filtersTypes:s.filtersTypes,placements:s.placements};new q(t,"tmpl-filter-builder").createAndWait(function(i,m){m.insertAdjacentHTML("beforeend",i(l)),xe()}),e++}}catch(o){console.error("Error occurred:",o)}finally{T()}}}function at(){let e=this.closest(".filter-item");e&&e.remove()}function _e(){let e=a.querySelector(".js-toggle-filter-builder"),t=a.querySelector(".filter-builder"),r=b.querySelector(".js-filter-button-all");e.value==="composite"?t.style.display="block":t.style.display="none",e.value==="default"||e.value==="composite"?r.style.display="block":r.style.display="none"}function je(e){b.querySelector(".js-term-sort-direction").addEventListener("change",nt),b.querySelector(".js-pagination_type").addEventListener("change",ct),b.querySelector(".js-post-order-by").addEventListener("change",lt),b.querySelector(".js-add-order-multiple-field").addEventListener("click",it(0,e)),b.querySelectorAll(".js-remove-order-field").forEach(t=>{t.addEventListener("click",Te)})}function nt(){let e=this.value,t=b.querySelector(".js-term-sort-field"),r=e==="manual";t.style.display=r?"none":"block"}function ct(){let e=this.value,t=b.querySelector(".js-navigation-buttons"),r=b.querySelector(".js-load-more-button"),o=e==="numeric",s=e==="loadmore";t.style.display=o?"block":"none",r.style.display=s?"block":"none"}function lt(){let e=this.value,t=b.querySelector(".js-order-fields-meta-key"),r=b.querySelector(".js-order-fields-multiple-fields"),o=e==="meta_key";t.style.display=o?"block":"none";let s=e==="multiple_fields";r.style.display=s?"block":"none"}function it(e,t){return function(){let r=b.querySelector(".post-order-fields-inner"),o=r.querySelectorAll(".field-group").length;o>0&&(e=o);let n=b.querySelector(".field-multiple-template").innerHTML.replace(/index/g,e);r.insertAdjacentHTML("beforeend",n),e++,J(t),b.querySelectorAll(".js-remove-order-field").forEach(d=>{d.addEventListener("click",Te)})}}function Te(){this.closest(".field-group").remove()}function ve(){let e=A.querySelector(".js-selected-post-layout"),t=A.querySelector(".js-grid-settings"),r=A.querySelector(".js-grid-style"),o=A.querySelector(".js-carousel-settings"),s=A.querySelector(".js-default-carousel-settings"),n=A.querySelector(".js-checkbox-custom-carousel-settings");e&&e.addEventListener("change",function(){this.value==="layout_carousel"?(t.style.display="none",r.style.display="none",o.style.display="block"):(t.style.display="block",r.style.display="block",o.style.display="none")}),s&&n.addEventListener("change",function(){this.checked?s.style.display="none":s.style.display="block"}),mt(),dt()}function dt(){let e=A.querySelector(".js-tooltip-trigger"),t=A.querySelector(".js-field-example"),r;function o(){clearTimeout(r),t.classList.add("visible")}function s(){r=setTimeout(()=>{t.classList.remove("visible")},200)}e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",s),t.addEventListener("mouseenter",o),t.addEventListener("mouseleave",s)}function mt(){A.querySelectorAll(".field-description pre code").forEach(e=>{let t=e.innerHTML.split(`
`);for(;t.length&&t[0].trim()==="";)t.shift();for(;t.length&&t[t.length-1].trim()==="";)t.pop();let r=Math.min(...t.filter(o=>o.trim()).map(o=>o.match(/^(\s*)/)[0].length));e.innerHTML=t.map(o=>o.slice(r)).join(`
`)})}function be(){N.querySelector(".js-filter-font-family").addEventListener("change",ut),N.querySelector(".js-post-title-font-family").addEventListener("change",pt),N.querySelector(".js-post-link-font-family").addEventListener("change",ft)}function ut(){let e=this.value,t=N.querySelector(".js-filter-custom-font-fields"),r=e==="custom";t.style.display=r?"block":"none"}function pt(){let e=this.value,t=N.querySelector(".js-post-title-custom-font-fields"),r=e==="custom";t.style.display=r?"block":"none"}function ft(){let e=this.value,t=N.querySelector(".js-post-link-custom-font-fields"),r=e==="custom";t.style.display=r?"block":"none"}function qe(){V.querySelector(".js-autocomplete-enabled").addEventListener("change",yt)}function yt(){let e=V.querySelector(".js-autocomplete-settings");e&&(this.checked?e.classList.remove("is-hidden"):e.classList.add("is-hidden"))}function we(){E.querySelector(".js-advanced-query-type").addEventListener("change",ht)}function ht(){let e=this.value,t=E.querySelector(".js-callback-function"),r=E.querySelector(".js-advanced-query"),o=e==="callback",s=e==="advanced";t&&(t.style.display=o?"block":"none"),r&&(r.style.display=s?"block":"none")}function Ce(e){e(".js-picker-color").wpColorPicker(),e(".js-picker-color-alpha").wpColorPicker({palettes:!0,alpha:!0,clear:!0})}function Le(){D("#appearance .js-toggle-switch-filter-state","#appearance .js-is-disabled-filter-options","hide"),D("#appearance .js-toggle-switch-pagination","#appearance .js-is-disabled-pagination","hide"),D("#appearance .js-toggle-switch-popup","#appearance .js-is-enable-popup","show"),D("#search .js-toggle-switch-search-posts","#search .js-is-disabled-search-options","show"),D("#advanced .js-toggle-switch-advanced-query",".js-is-enable-advanced-query","show"),D("#advanced .js-toggle-switch-sort-posts",".js-is-enable-sort-posts","show")}function D(e,t,r="show"){document.querySelectorAll(`${e} .js-toggle-switch input[type="checkbox"]`).forEach(o=>{let n=o.closest(e).querySelector(t);if(!n)return;let d=()=>{let l=o.checked&&r==="show"||!o.checked&&r==="hide";n.style.display=l?"block":"none"};o.addEventListener("change",d),d()})}function Ae(){let e=E.querySelector(".js-preloader-icon"),t=E.querySelector(".js-preloader-filters"),r=E.querySelector(".js-preloader-custom-filters"),o=E.querySelector(".js-preview-preloader"),s=Y+"assets/images/preloaders/",n=c=>{var u;let i=o.querySelector("img");if(!i)return;let m={none:"none",brightness:"brightness(1.4)",contrast:"contrast(1.5)",grayscale:"grayscale(100%)",invert:"invert(100%)",opacity:"opacity(40%)",saturate:"saturate(2)",sepia:"sepia(100%)"};if(c==="custom_filter"){let p=r==null?void 0:r.querySelector("input"),y=((u=p==null?void 0:p.value)==null?void 0:u.trim())||"none";y.startsWith("filter:")&&(y=y.replace(/^filter:\s*/i,"")),i.style.cssText=`filter: ${y};`}else i.style.filter=m[c]||"none"},d=c=>{if(!r)return;let i=r.querySelector("input");c==="custom_filter"?(r.style.display="block",i&&!i.dataset.listenerAttached&&(i.addEventListener("input",()=>{n("custom_filter")}),i.dataset.listenerAttached="true")):r.style.display="none"},l=c=>{if(c==="none")o.innerHTML="";else{let i=document.createElement("img");i.src=s+c+".svg",i.alt=c+" preloader",i.width=70,i.height=70,o.innerHTML="",o.appendChild(i);let m=(t==null?void 0:t.value)||"none";m==="custom_filter"?setTimeout(()=>{n("custom_filter")},0):n(m)}};e==null||e.addEventListener("change",function(){l(this.value)}),t==null||t.addEventListener("change",function(){let c=this.value;d(c),n(c)}),e!=null&&e.value&&e.value!=="none"&&l(e.value),t!=null&&t.value&&d(t.value)}function ke(e){let t=M.querySelector(".js-tax-sequence-wrapper");if(t){let n=function(){let c=t.querySelectorAll(".js-sequence-taxonomies .taxonomy-by-related-terms"),i=t.querySelectorAll(".js-available-taxonomies .taxonomy-by-related-terms"),m=[],u=t.querySelector(".js-sequence-input");i.forEach(p=>{var y,x,g;(y=p.querySelector(".taxonomy-order"))==null||y.remove(),(x=p.querySelector(".radio-buttons-wrap"))==null||x.remove(),(g=p.querySelector(".js-icon-config"))==null||g.remove()}),c.forEach((p,y)=>{let x=p.querySelector(".taxonomy-order");x||(x=document.createElement("span"),x.className="taxonomy-order",p.append(x)),x.textContent=y+1,m.push(p.getAttribute("data-tax"));let g=p.querySelector(".js-icon-config");g||(g=document.createElement("span"),g.className="icon-config js-icon-config",p.append(g));let v=p.querySelector(".radio-buttons-wrap");if(!v){let h=p.getAttribute("data-tax");v=document.createElement("div"),v.className="radio-buttons-wrap";let w=document.createElement("label"),C=document.createElement("input");C.type="radio",C.name=`tax_mode_${h}`,C.value="single",C.className="input-radio js-tax-radio",w.append(C,"Single");let O=document.createElement("label"),k=document.createElement("input");k.type="radio",k.name=`tax_mode_${h}`,k.value="multiple",k.className="input-radio js-tax-radio",O.append(k,"Multiple"),v.append(w,O),p.append(v);let P=v.querySelector(".header-config");P||(P=document.createElement("div"),P.className="header-config",P.textContent="Mode Taxonomy",v.prepend(P)),C.checked=!0}}),u&&(u.value=m.join(",")),l(),d()},d=function(){let c=t.querySelectorAll(".js-sequence-taxonomies .taxonomy-by-related-terms"),i=t.querySelector(".js-sequence-tax-settings"),m=[];c.forEach(u=>{let p=u.getAttribute("data-tax"),y=u.querySelector(`input[name="tax_mode_${p}"]:checked`),x=y?y.value:"single";m.push({taxonomy:p,mode:x})}),i&&(i.value=JSON.stringify(m))},l=function(){o.children("li").length?o.closest(".sequence-selected").addClass("hide-placeholder"):o.closest(".sequence-selected").removeClass("hide-placeholder")},r=e(".js-available-taxonomies"),o=e(".js-sequence-taxonomies"),s=".js-available-taxonomies, .js-sequence-taxonomies";[r,o].forEach(c=>{if(c.data("ui-sortable"))try{c.sortable("destroy")}catch(i){}}),r.add(o).sortable({connectWith:s,items:"> li",handle:".js-tax-handle",appendTo:"body",zIndex:9999,tolerance:"pointer",placeholder:"ui-sortable-placeholder",helper:function(c,i){let m=i.clone();return m.addClass("taxonomy-by-related-terms"),m.css({width:i.outerWidth(),height:i.outerHeight(),boxSizing:"border-box"}),m},start:function(c,i){i.placeholder.height(i.helper.outerHeight())},stop:function(c,i){setTimeout(n,0)},receive:function(c,i){e(this).hasClass("js-sequence-taxonomies")&&(n(),Ee(t))},update:function(c,i){e(this).hasClass("js-sequence-taxonomies")&&i.sender===null&&(n(),Ee(t))}}).disableSelection(),t.addEventListener("change",function(c){c.target.matches(".js-tax-radio")&&d()}),t.addEventListener("click",function(c){if(c.target.matches(".js-icon-config")){let m=c.target.closest(".taxonomy-by-related-terms").querySelector(".radio-buttons-wrap");c.target.classList.toggle("is-close"),m&&m.classList.toggle("is-visible")}}),l(),gt()}}function gt(){let e=M.querySelectorAll('.js-root-source input[type="radio"]'),t=M.querySelector(".js-root-terms");e.forEach(r=>{r.addEventListener("change",()=>{r.value==="manual"?t.classList.add("is-visible"):(t.classList.remove("is-visible"),t.querySelectorAll(".js-root-term").forEach(s=>s.checked=!1))})})}async function Ee(e){var i;let t=_,r=".js-root-terms-list",o=e.querySelector(".js-root-terms-list"),s=e.querySelector(".js-sequence-input").value,n=((i=e.querySelector(".js-root-source:checked"))==null?void 0:i.value)||"top_level",d=[];e.querySelectorAll(".js-root-term:checked").forEach(m=>{d.push(parseInt(m.value))});let l={post_id:S,sequence:s,root_source:n,root_terms:d},c=new URLSearchParams({action:"action_update_root_source_terms",nonce_code:_ymc_fg_object.updateRootSourceTerms_nonce,payload:JSON.stringify(l)});try{j(r);let m=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c.toString()});if(m.ok){let u=await m.json();o.innerHTML=u.data.root_terms}else console.error("Error HTTP: "+m.status)}catch(m){console.error("Error occurred:",m)}finally{T(r)}}function Pe(){var e;(e=G.querySelector(".export-wrapper .js-button-export-settings"))==null||e.addEventListener("click",async t=>{let r=new Date().getFullYear(),o=new Date().getDate(),s=new Date().getMonth(),n=new Date().getHours(),d=new Date().getMinutes(),l=new Date().getSeconds(),c=new FormData;c.append("action","action_export_settings"),c.append("nonce_code",_ymc_fg_object.exportSettingsAjax_nonce),c.append("post_id",S);try{j(".ymc-main #tools");let i=await fetch(_,{method:"POST",body:c});if(!i.ok){L(`HTTP error! Status: ${i.status}`,"#tools .export-wrapper .notify-wrapper","error",2e3);return}let m=await i.blob(),u=document.createElement("a"),p=`ymc-fg-export-${o}-${s+1}-${r}-${n}:${d}:${l}.json`,y=window.URL.createObjectURL(m);u.href=y,u.download=p,document.body.appendChild(u),u.click(),u.remove(),URL.revokeObjectURL(y),L("Settings exported","#tools .export-wrapper .notify-wrapper","success",2e3)}catch(i){console.error("Error occurred:",i),L("Error occurred","#tools .export-wrapper .notify-wrapper","error",2e3)}finally{T()}})}function Me(e){var t;(t=G.querySelector(".import-wrapper .js-file-import-settings"))==null||t.addEventListener("change",_t)}function _t(){let e=this,t=e.files[0];if(t)if(t.type==="application/json"&&t.name.indexOf("ymc-fg-export-")===0){let r=new FileReader;r.readAsText(t),r.onload=async function(){let o=new FormData;o.append("file",t),o.append("action","action_import_settings"),o.append("post_id",S),o.append("params",r.result),o.append("nonce_code",_ymc_fg_object.importSettingsAjax_nonce);try{j(".ymc-main #tools");let s=await fetch(_,{method:"POST",credentials:"same-origin",body:o});if(!s.ok){L(`HTTP error! Status: ${s.status}`,"#tools .import-wrapper .notify-wrapper","error",2e3);return}let n=await s.json();L(n.data.message,"#tools .import-wrapper .notify-wrapper","success",2e3),e.value="",location.reload()}catch(s){console.error("Error occurred:",s),L("Error occurred","#tools .import-wrapper .notify-wrapper","error",2e3)}finally{T()}}}else L("Invalid file format","#tools .import-wrapper .notify-wrapper","error",2e3)}(function(e){document.addEventListener("DOMContentLoaded",()=>{se(),U(),ce(),le(),ie(),de(),B(),z(),me(),W(),he(),ue(),pe(),fe(),Q(),ge(),Se(),je(e),ve(),be(),qe(),we(),J(e),$(),X(),Ce(e),Le(),Ae(),Pe(),ke(e),Me()})})(jQuery);
