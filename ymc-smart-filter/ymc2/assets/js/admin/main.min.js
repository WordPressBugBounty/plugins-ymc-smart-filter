var f=document.querySelector("body.js-ymc-admin"),a=document.querySelector("#ymc_main_meta_box .ymc-main"),S=a.dataset.postId,Y=_ymc_fg_object.path,g=_ymc_fg_object.ajax_url,L=a.querySelector("#ymc_main_meta_box .ymc-main #general"),E=a.querySelector("#ymc_main_meta_box .ymc-main #layouts"),b=a.querySelector("#ymc_main_meta_box .ymc-main #appearance"),V=a.querySelector("#ymc_main_meta_box .ymc-main #search"),N=a.querySelector("#ymc_main_meta_box .ymc-main #typography"),k=a.querySelector("#ymc_main_meta_box .ymc-main #advanced"),Tt=a.querySelector("#ymc_main_meta_box .ymc-main #shortcode"),G=a.querySelector("#ymc_main_meta_box .ymc-main #tools"),jt=a.querySelector("#ymc_main_meta_box .ymc-main #license");function U(e,t,s){let o="";if(s){let r=new Date;r.setTime(r.getTime()+s*24*60*60*1e3),o="; expires="+r.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/"}function R(e){let t=e+"=",s=document.cookie.split(";");for(let o=0;o<s.length;o++){let r=s[o];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(t)===0)return r.substring(t.length,r.length)}return null}function F(){if(a.querySelectorAll(".tabs-content .js-headline-accordion").forEach(e=>{e.addEventListener("click",Ye)}),R("hashAccordionYmc")){let e=R("hashAccordionYmc");a.querySelectorAll(`.tabs-content .js-headline-accordion[data-hash="${e}"]`).forEach(t=>{t.classList.add("is-active"),t.nextElementSibling.style.display="block",t.querySelector(".js-icon-accordion").classList.add("fa-chevron-up"),t.querySelector(".js-icon-accordion").classList.remove("fa-chevron-down")})}}function Ye(e){let t=e.target.closest(".js-headline-accordion"),s=t.nextElementSibling,o=t.querySelector(".js-icon-accordion"),r=t.dataset.hash;t.classList.toggle("is-active"),jQuery(s).slideToggle(),o.classList.toggle("fa-chevron-down"),o.classList.toggle("fa-chevron-up"),U("hashAccordionYmc",r,30),(r==="custom_css"||r==="custom_js")&&setTimeout(function(){window.ymcEditors&&(window.ymcEditors.css&&window.ymcEditors.css.refresh(),window.ymcEditors.js&&window.ymcEditors.js.refresh())},300)}function se(){let e=a.querySelectorAll(".tabs-sidebar .nav .nav__item"),t=a.querySelectorAll(".tabs-content .section");if(e.forEach(s=>{s.addEventListener("click",o=>{let r=o.target.closest(".nav__item"),n=r.dataset.hash;U("hashymc",n,30),e.forEach(d=>{d.classList.remove("is-current")}),t.forEach(d=>{n===d.getAttribute("id")?d.classList.add("is-active"):d.classList.remove("is-active")}),r.classList.add("is-current")})}),R("hashymc")!==""){let s=R("hashymc");e.forEach(o=>{s===o.dataset.hash&&(e.forEach(r=>{r.classList.remove("is-current")}),o.classList.add("is-current"),t.forEach(r=>{s===r.getAttribute("id")?r.classList.add("is-active"):r.classList.remove("is-active")}))})}F()}function J(e){e(".js-btn-tooltip").tooltip({classes:{"ui-tooltip":"ymc-tooltip","ui-tooltip-content":"ymc-tooltip-content"},position:{my:"center bottom-20",at:"center",collision:"fit"},content:function(){return e(this).attr("data-tooltip-html")}})}function x(e){e===void 0?f.insertAdjacentHTML("afterbegin",`<div class="preloader"><img src="${Y}/assets/images/preloader.svg" alt="preloader"></div>
                    <div class="overlay"></div>`):f.querySelector(e).insertAdjacentHTML("afterbegin",`<div class="preloader preloader--is-local"><img src="${Y}/assets/images/preloader.svg" alt="preloader"></div>
                    <div class="overlay overlay--is-local"></div>`)}function T(){var e,t;(e=f.querySelector(".preloader"))==null||e.remove(),(t=f.querySelector(".overlay"))==null||t.remove()}function w(e,t,s){typeof e=="string"?this.el=document.querySelector(e):this.el=e,this.tempName=t,this.data=s||null,this.folderPath=Y+"src/admin/js-templates/"}w.prototype.create=function(e){let t=new XMLHttpRequest,s=this;t.open("get",this.folderPath+this.tempName+".hbs",!0),t.onreadystatechange=function(){if(t.readyState===4&&t.status===200){let o=Handlebars.compile(t.response);s.el.innerHTML=o(s.data),e()}},t.send()};w.prototype.createAndWait=function(e){let t=new XMLHttpRequest,s=this;t.open("get",this.folderPath+this.tempName+".hbs",!0),t.onreadystatechange=function(){if(t.readyState===4&&t.status===200){let o=Handlebars.compile(t.response);e(o,s.el)}},t.send()};function W(){jQuery(".js-term-insert .js-term-sortable").sortable({cursor:"move",opacity:1,delay:150,handle:".js-term-handle",scroll:!1,start:function(e,t){t.item[0].classList.add("is-item-dragging"),t.item[0].closest(".terms-inner").classList.add("dragging")},stop:function(e,t){t.item[0].classList.remove("is-item-dragging"),t.item[0].closest(".terms-inner").classList.remove("dragging");let s=[];a.querySelectorAll('.js-term-insert .js-term-sortable input[type="checkbox"]').forEach(o=>{s.push(o.value)}),Ne(s)}})}async function Ne(e){let t=g,s=new URLSearchParams({action:"action_terms_sort",nonce_code:_ymc_fg_object.sortTermAjax_nonce,payload:JSON.stringify({terms_sort:e,post_id:S})});fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()}).then(function(o){if(o.ok===!0)return o.json();console.error("Error occurred:",o.status)}).catch(o=>console.error(o))}function Q(){jQuery(".selected-posts .js-post-sortable").sortable({axis:"y",cursor:"move",opacity:1,delay:150,containment:"parent",start:function(e,t){t.item[0].closest(".js-post-sortable").classList.add("dragging")},stop:function(e,t){t.item[0].closest(".js-post-sortable").classList.remove("dragging")}})}function I(){let e=this.dataset.postId,t=this.querySelector(".post-title").innerText,s={postId:e,postTitle:t};this.classList.add("is-disabled"),new w(".ymc-main #general .selected-posts .list-posts","tmpl-selected-posts").createAndWait(function(r,n){n.insertAdjacentHTML("beforeend",r(s)),a.querySelector("#general .selected-posts .number-posts").innerText=a.querySelectorAll("#general .selected-posts .list-posts .post-selected").length,Q(),z()})}function B(){a.querySelectorAll("#general .feed-posts .js-scroll-posts .js-add-post").forEach(e=>{e.addEventListener("click",I)})}function z(){a.querySelectorAll("#general .selected-posts .post-selected .js-post-remove").forEach(e=>{e.addEventListener("click",function(){let t=this.dataset.postId;this.closest(".post-selected").remove(),a.querySelectorAll("#general .feed-posts .js-add-post").forEach(s=>{t===s.dataset.postId&&s.classList.remove("is-disabled")}),a.querySelector("#general .selected-posts .number-posts").innerText=a.querySelectorAll("#general .selected-posts .list-posts .post-selected").length})})}function A(e,t=document.body,s="seccess",o=3e3){let r=document.createElement("div");r.classList.add("notification",`notification--${s}`),r.innerHTML=e,document.querySelector(t).appendChild(r),setTimeout(()=>r.remove(),o)}function $(){a.querySelectorAll("#general .js-tax-insert .js-tax-settings").forEach(e=>{e.addEventListener("click",Ie)})}function Ie(){var c,i;a.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(m=>m.classList.remove("is-open"));let e=this.closest(".taxonomies-list__item");e.classList.add("is-open");let{taxName:t,taxOriginalName:s,taxLabel:o,taxBg:r,taxColor:n,taxStatus:d}=e.dataset;o=o||s,r=r||"#ffffff",n=n||"#ffffff",tb_show("&#9998; Taxonomy: &#91; "+o+" &#93;","/?TB_inline&inlineId=thickbox-tax-modal&width=800&height=500");let l=f.querySelector("#TB_window #TB_ajaxContent .form-taxonomy");jQuery(l.querySelector(".js-tax-bg")).wpColorPicker("color",r),jQuery(l.querySelector(".js-tax-color")).wpColorPicker("color",n),l.querySelector(".js-tax-name").value=o,(c=f.querySelector("#TB_window #TB_ajaxContent .js-btn-tax-save"))==null||c.addEventListener("click",He),(i=f.querySelector("#TB_window #TB_ajaxContent .js-btn-tax-reset"))==null||i.addEventListener("click",Re)}function He(){let e=a.querySelector("#general .js-tax-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-taxonomy"),s=t.querySelector(".js-tax-bg").value,o=t.querySelector(".js-tax-color").value,r=t.querySelector(".js-tax-name").value,n=e.dataset.taxOriginalName,d=[];e.classList.add("changed"),e.dataset.taxBg=s,e.dataset.taxColor=o,e.dataset.taxLabel=r,e.dataset.taxStatus="changed",e.querySelector(".field-label").innerHTML=r||n,a.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(l=>{d.push({name:l.dataset.taxName,label:l.dataset.taxLabel,background:l.dataset.taxBg,color:l.dataset.taxColor,status:l.dataset.taxStatus})}),ae(d)}function Re(){let e=a.querySelector("#general .js-tax-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-taxonomy"),s=[];jQuery(t.querySelector(".js-tax-bg")).wpColorPicker("color","#ffffff"),jQuery(t.querySelector(".js-tax-color")).wpColorPicker("color","#ffffff"),t.querySelector(".js-tax-name").value=e.dataset.taxOriginalName,e.classList.remove("changed"),e.dataset.taxBg="",e.dataset.taxColor="",e.dataset.taxLabel="",e.dataset.taxStatus="",e.querySelector(".field-label").innerHTML=e.dataset.taxOriginalName,a.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(o=>{s.push({name:o.dataset.taxName,label:o.dataset.taxLabel,background:o.dataset.taxBg,color:o.dataset.taxColor,status:o.dataset.taxStatus})}),ae(s)}async function ae(e){let t="#TB_window #TB_ajaxContent",s=g,o=new URLSearchParams({action:"action_save_taxonomy_attrs",nonce_code:_ymc_fg_object.saveTaxAttrAjax_nonce,payload:JSON.stringify({post_id:S,tax_attrs:e})});try{x(t);let r=await fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()});if(r.ok){let n=await r.json();A(n.message,"#TB_window #TB_ajaxContent","success",2e3)}else console.error("Error HTTP: "+r.status)}catch(r){console.error("Error occurred:",r)}finally{T(t)}}function X(){a.querySelectorAll("#general .js-term-insert .js-term-settings").forEach(e=>{e.addEventListener("click",De)})}function De(){var M,ee,te,oe,re;a.querySelectorAll("#general .js-term-insert .term-item").forEach(H=>H.classList.remove("is-open"));let e=this.closest(".term-item");e.classList.add("is-open");let{termId:t,termName:s,termNameOrig:o,termBackground:r,termColor:n,termClass:d,termDefault:l,termVisible:c,termSlug:i,termTaxonomy:m,termIconAlignment:u,termIconClass:p,termIconColor:y,termIconUrl:j}=e.dataset;r=r||"",n=n||"",d=d||"",l=l||"false",c=c||"true",s=s||o,u=u||"left",p=p||"",y=y||"#ffffff",j=j||"",tb_show("&#9998; Term: &#91; "+s+" &#93;","/?TB_inline&inlineId=thickbox-term-modal&width=800&height=500");let _=f.querySelector("#TB_window #TB_ajaxContent .form-term"),v=_.querySelector(".js-term-bg"),h=_.querySelector(".js-term-color");if(r?jQuery(v).wpColorPicker("color",r):jQuery(v).val("").trigger("change"),n?jQuery(h).wpColorPicker("color",n):jQuery(h).val("").trigger("change"),jQuery(_.querySelector(".js-icon-color")).wpColorPicker("color",y),_.querySelector(".js-term-class").value=d,_.querySelector(".js-term-name").value=s,_.querySelector(".js-term-default").checked=l==="true",_.querySelector(".js-term-visible").checked=c==="true",_.querySelector(".js-icon-class").value=p,_.querySelectorAll(".js-icon-alignment").forEach(H=>{H.checked=H.value===u}),_.querySelector(".js-tax-sequence")){let H=_.querySelector(".js-related-terms-wrapper"),Oe=(M=_.querySelector(".js-tax-sequence"))==null?void 0:M.dataset.taxSequence;H.innerHTML="",Je(Oe,i,t,_,m)}let q=_.querySelector(".js-domain"),C=_.querySelector(".js-icon-preview"),O=_.querySelector(".js-btn-icon-remove");j?C.innerHTML=`<img src="${q.getAttribute("value")}${j}" width="20">`:p?C.innerHTML=`<i class="${p}"></i>`:C.innerHTML="",O.classList.toggle("is-visible",!!p||!!j),(ee=f.querySelector("#TB_window #TB_ajaxContent .js-btn-term-save"))==null||ee.addEventListener("click",Ue),(te=f.querySelector("#TB_window #TB_ajaxContent .js-btn-term-reset"))==null||te.addEventListener("click",Fe),(oe=f.querySelector("#TB_window #TB_ajaxContent .js-enable-custom-icon"))==null||oe.addEventListener("change",Ve),(re=f.querySelector("#TB_window #TB_ajaxContent .js-upload-file"))==null||re.addEventListener("change",Ge),O==null||O.addEventListener("click",Z);let P=f.querySelector("#TB_window #TB_ajaxContent .js-enable-custom-icon");P.checked=!!j,P.dispatchEvent(new Event("change",{bubbles:!0})),We(),Qe(),$e(),Xe()}async function Ue(){let e=a.querySelector("#general .js-term-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-term");e.classList.add("changed");let s=t.querySelector(".js-term-bg").value,o=t.querySelector(".js-term-color").value,r=t.querySelector(".js-term-class").value,n=t.querySelector(".js-term-name").value,d=t.querySelector(".js-term-default").checked,l=t.querySelector(".js-term-visible").checked,c=e.dataset.termNameOrig,i="left";t.querySelectorAll(".js-icon-alignment").forEach(h=>{h.checked&&(i=h.value)});let m=t.querySelector(".js-icon-class").value,u=t.querySelector(".js-icon-url").value,p=t.querySelector(".js-icon-color").value,y=e.querySelector(".checkbox-control").checked,j=t.querySelectorAll('.js-related-terms-list input[type="checkbox"]:checked'),_=Array.from(j).map(h=>parseInt(h.value,10)),v=[];e.querySelectorAll(".field-label").forEach(h=>{h.childNodes.forEach(q=>{q.nodeType===Node.TEXT_NODE&&q.textContent.trim()&&(q.remove(),h.insertAdjacentHTML("afterbegin",n||c))})}),t.querySelectorAll(".js-accordion-terms-header").forEach(h=>{let q=h.nextElementSibling;if(!q)return;let C=q.querySelectorAll('input[type="checkbox"]:checked').length>0;h.classList.toggle("has-checked",C)}),e.dataset.termBackground=s,e.dataset.termColor=o,e.dataset.termClass=r,e.dataset.termName=n,e.dataset.termDefault=d,e.dataset.termVisible=l,e.dataset.termIconAlignment=i,e.dataset.termIconClass=m,e.dataset.termIconUrl=u,e.dataset.termIconColor=p,e.dataset.termChecked=y,e.dataset.termStatus="changed",e.dataset.termRelatedTerms=JSON.stringify(_),a.querySelectorAll("#general .js-term-insert .term-item").forEach(h=>{v.push({term_id:h.dataset.termId,term_taxonomy:h.dataset.termTaxonomy,term_slug:h.dataset.termSlug,term_name_orig:h.dataset.termNameOrig,term_background:h.dataset.termBackground,term_color:h.dataset.termColor,term_class:h.dataset.termClass,term_default:h.dataset.termDefault,term_visible:h.dataset.termVisible,term_name:h.dataset.termName,term_checked:h.dataset.termChecked,term_status:h.dataset.termStatus,icon_class:h.dataset.termIconClass,icon_alignment:h.dataset.termIconAlignment,icon_color:h.dataset.termIconColor,icon_url:h.dataset.termIconUrl,related_terms:h.dataset.termRelatedTerms})}),await ne(v)}async function Fe(){let e=a.querySelector("#general .js-term-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-term"),s=[],{termNameOrig:o}=e.dataset,r=t.querySelector(".js-term-bg"),n=t.querySelector(".js-term-color");jQuery(r).val("").trigger("change"),jQuery(n).val("").trigger("change"),jQuery(t.querySelector(".js-icon-color")).wpColorPicker("color","#ffffff"),t.querySelector(".js-term-class").value="",t.querySelector(".js-term-name").value=o,t.querySelector(".js-term-default").checked=!1,t.querySelector(".js-term-visible").checked=!0,t.querySelector('.js-icon-alignment[value="left"]').checked=!0,t.querySelector(".js-icon-class").value="",t.querySelector(".js-icon-url").value="",t.querySelector(".js-icon-preview").innerHTML="",t.querySelector(".js-btn-icon-remove").classList.remove("is-visible"),t.querySelector(".upload-term-icon .label-file span").innerHTML="Choose a icon",t.querySelectorAll('.js-related-terms-list input[type="checkbox"]').forEach(l=>{l.checked=!1}),t.querySelectorAll(".js-accordion-terms-header").forEach(l=>{l.classList.remove("is-active","has-checked"),l.setAttribute("aria-expanded","false");let c=l.nextElementSibling;c&&(c.style.display="none")}),e.dataset.termRelatedTerms="[]";let d=e.querySelector(".field-label");if(d){let l=Array.from(d.childNodes).find(c=>c.nodeType===Node.TEXT_NODE&&c.textContent.trim()!=="");l&&(l.textContent=`${o} `)}e.classList.remove("changed"),e.dataset.termBackground="",e.dataset.termColor="",e.dataset.termClass="",e.dataset.termName=o,e.dataset.termDefault="false",e.dataset.termVisible="true",e.dataset.termIconAlignment="",e.dataset.termIconClass="",e.dataset.termIconUrl="",e.dataset.termIconColor="",e.dataset.termChecked=e.querySelector(".checkbox-control").checked,e.dataset.termStatus="",a.querySelectorAll("#general .js-term-insert .term-item").forEach(l=>{s.push({term_id:l.dataset.termId,term_slug:l.dataset.termSlug,term_name_orig:l.dataset.termNameOrig,term_background:l.dataset.termBackground,term_color:l.dataset.termColor,term_class:l.dataset.termClass,term_default:l.dataset.termDefault,term_visible:l.dataset.termVisible,term_name:l.dataset.termName,term_checked:l.dataset.termChecked,term_status:l.dataset.termStatus,icon_class:l.dataset.termIconClass,icon_alignment:l.dataset.termIconAlignment,icon_color:l.dataset.termIconColor,icon_url:l.dataset.termIconUrl,related_terms:l.dataset.termRelatedTerms||"[]"})}),await ne(s)}async function ne(e){let t="#TB_window #TB_ajaxContent",s=g,o=new URLSearchParams({action:"action_save_term_attrs",nonce_code:_ymc_fg_object.saveTermAttrAjax_nonce,payload:JSON.stringify({post_id:S,term_attrs:e})});try{x(t);let r=await fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()});if(r.ok){let n=await r.json();A(n.message,"#TB_window #TB_ajaxContent","success",2e3)}else console.error("Error HTTP: "+r.status)}catch(r){console.error("Error occurred:",r)}finally{T(t)}}async function Je(e,t,s,o,r){let n="#TB_window #TB_ajaxContent .js-related-terms-wrapper",d=o.querySelector(".js-related-terms-wrapper"),l=o.querySelector(".js-tax-dependency-chain"),c=g,i=new URLSearchParams({action:"action_update_related_terms",nonce_code:_ymc_fg_object.updateRelatedTerms_nonce,payload:JSON.stringify({post_id:S,sequence:e,current_term:t,current_tax:r,term_id:s})});try{x(n);let m=await fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i.toString()});if(m.ok){let u=await m.json();d.innerHTML=u.data.html,l.innerHTML=u.data.tax_chain,ze(o)}else console.error("Error HTTP: "+m.status)}catch(m){console.error("Error occurred:",m)}finally{T(n)}}function We(){let e=f.querySelectorAll("#TB_window #TB_ajaxContent .tab-button"),t=f.querySelectorAll("#TB_window #TB_ajaxContent .tab-content");e.forEach(s=>{s.addEventListener("click",()=>{e.forEach(o=>o.classList.remove("is-active")),t.forEach(o=>o.classList.remove("is-active")),s.classList.add("is-active"),f.querySelector("#TB_window #TB_ajaxContent #"+s.dataset.tab).classList.add("is-active")})})}function Qe(){var o,r;let e=f.querySelector("#TB_window #TB_ajaxContent"),t=e.querySelectorAll(".tab-button"),s=e.querySelectorAll(".tab-content");t.forEach(n=>n.classList.remove("is-active")),s.forEach(n=>n.classList.remove("is-active")),(o=e.querySelector('.tabs [data-tab="tabTerm"]'))==null||o.classList.add("is-active"),(r=e.querySelector(".tabs #tabTerm"))==null||r.classList.add("is-active")}function $e(){let e=f.querySelector("#TB_window #TB_ajaxContent .form-term .js-field-search-icon"),t=f.querySelectorAll("#TB_window #TB_ajaxContent .form-term .js-icon-item i");e.addEventListener("input",()=>{let s=e.value.toLowerCase();t.forEach(o=>{let r=o.getAttribute("class").replace(/[\s.-]/g," ").toLowerCase();o.style.display=r.includes(s)?"inline-block":"none"})})}function Xe(){let e=f.querySelectorAll("#TB_window #TB_ajaxContent .form-term .js-icon-item i"),t=f.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove");e.forEach(s=>{s.addEventListener("click",()=>{f.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove").classList.add("is-visible"),f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-class").value=s.getAttribute("class"),f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-preview").innerHTML=s.outerHTML,f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-url").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-upload-file").value="",t.addEventListener("click",Z)})})}function Z(){f.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove").classList.remove("is-visible"),f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-class").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-url").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-preview").innerHTML="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-upload-file").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .upload-term-icon .label-file span").innerHTML="Choose a icon"}function Ve(e){let t=f.querySelector("#TB_window #TB_ajaxContent"),s=t.querySelector(".js-upload-icon-wrap"),o=t.querySelector(".js-term-icon-selector"),r=this.checked;s.classList.toggle("is-hidden",!r),o.classList.toggle("is-hidden",r)}async function Ge(e){let t=g,s=e.target.files[0],o="#TB_window #TB_ajaxContent",r=f.querySelector("#TB_window #TB_ajaxContent .form-term"),n=r.querySelector(".js-icon-preview"),d=r.querySelector(".js-btn-icon-remove"),l=r.querySelector(".js-icon-class"),c=r.querySelector(".js-icon-url"),i=e.target.value.split("\\").pop(),m=r.querySelector(".js-domain");if(!s)return;let u=new FormData;u.append("icon",s),u.append("action","action_upload_term_icon"),u.append("post_id",S),u.append("nonce_code",_ymc_fg_object.uploadTermIconAjax_nonce);try{x(o);let p=await fetch(t,{method:"POST",credentials:"same-origin",body:u});if(p.ok){let y=await p.json();y.success&&y.data.url?(n.innerHTML=`<img src="${m.getAttribute("value")}${y.data.url}" width="20">`,l.value="",c.value=y.data.url,d.classList.add("is-visible"),d.addEventListener("click",Z),this.nextElementSibling.querySelector("span").innerHTML=i,A(y.data.message,"#TB_window #TB_ajaxContent","success",2e3)):A(y.data.message,"#TB_window #TB_ajaxContent","error",2e3)}else console.error("Error HTTP: "+p.status)}catch(p){console.error("Error occurred:",p)}finally{T(o)}}function ze(e){let t=e.querySelector(".js-accordion-terms");if(t){let s=function(o){let r=o.nextElementSibling;if(!r)return;let n=r.querySelectorAll('input[type="checkbox"]:checked').length>0;o.classList.toggle("has-checked",n)};t.querySelectorAll(".js-accordion-terms-header").forEach(o=>{o.classList.remove("is-active","has-checked"),o.setAttribute("aria-expanded","false");let r=o.nextElementSibling;r&&(r.style.display="none",s(o),r.querySelectorAll('input[type="checkbox"]').forEach(n=>{n.addEventListener("change",()=>s(o))})),o.replaceWith(o.cloneNode(!0))}),t.querySelectorAll(".js-accordion-terms-header").forEach(o=>{o.addEventListener("click",function(){this.classList.toggle("is-active");let r=this.nextElementSibling,n=this.getAttribute("aria-expanded")==="true";this.setAttribute("aria-expanded",n?"false":"true"),r.style.display=n?"none":"block"})})}}function ce(){var e;(e=L.querySelector(".js-post-types"))==null||e.addEventListener("change",Ze)}function le(){var e;(e=L.querySelector(".js-tax-insert"))==null||e.addEventListener("click",Ke)}function ie(){var e;(e=L.querySelector(".js-tax-clear"))==null||e.addEventListener("click",et)}function de(){var e;(e=L.querySelector(".js-tax-updated"))==null||e.addEventListener("click",tt)}function me(){var e;(e=L.querySelector(".js-terms-updated"))==null||e.addEventListener("click",ot)}async function Ze(){if(confirm("Are you sure change Post Type? IMPORTANT! Post Type Changes remove all taxonomies, terms and selected posts.")){let t=a.querySelectorAll("#general #ymc-post-types option:checked"),s=Array.from(t).map(r=>r.value),o={action:"action_get_taxonomies",nonce_code:_ymc_fg_object.getTaxAjax_nonce,payload:JSON.stringify({post_types:s,post_id:S})};try{x(),_ymc_fg_object.loadedFeedPosts_page=2;let r=await fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(r.ok){let n=await r.json(),d=n.taxonomies,l=n.posts,c={},i={},m=n.found_posts,u=a.querySelector("#general .posts-wrapper .js-scroll-posts"),p=a.querySelector("#general .posts-wrapper .feed-posts .number-posts");p.innerHTML=m,l.length>0?i={isPosts:!0,posts:l}:i={noPosts:!0,no_posts_found:"No posts found"},new w(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(_,v){var q;L.querySelector(".feed-posts .js-scroll-posts").innerHTML="",L.querySelector(".selected-posts .js-post-sortable").innerHTML="",(q=L.querySelector(".js-tax-sequence-wrapper"))==null||q.remove(),E.querySelector(".js-filter-group").innerHTML="";let h=E.querySelector(".js-toggle-filter-builder");h.value="default",h.dispatchEvent(new Event("change")),v.insertAdjacentHTML("beforeend",_(i)),u.querySelectorAll(".js-add-post").forEach(C=>{C.removeEventListener("click",I)}),B()}),Object.keys(d).length>0?c={taxonomies:d,isTax:!0}:c={isTax:!1},new w(".ymc-main .js-tax-insert","tmpl-taxonomy",c).create(function(){T(),d.length===0?a.querySelector(".js-control-bar").classList.add("is-hidden"):a.querySelector(".js-control-bar").classList.remove("is-hidden"),a.querySelector(".terms-wrapper .js-term-insert").innerHTML="",a.querySelector(".terms-wrapper").classList.add("is-hidden"),$()})}else console.error("Error HTTP: "+r.status)}catch(r){console.error("Error occurred:",r)}}else{let t=this.dataset.previousValue.split(",");a.querySelectorAll("#general #ymc-post-types option").forEach(s=>{s.selected=t.includes(s.value)})}}async function Ke(e){if(e.target.nodeName==="INPUT"){let t=e.target.value,s=e.target.dataset.label;if(e.target.checked){let o={action:"action_get_terms",nonce_code:_ymc_fg_object.getTermAjax_nonce,payload:JSON.stringify({slug:t,label:s,post_id:S})};try{x();let r=await fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(r.ok){let d=(await r.json()).data_obj,c={isTerms:d.terms.length>0?!0:[],tax_slug:d.tax_slug,tax_label:d.tax_label,terms:d.terms,no_terms:"No terms found"};new w(".ymc-main .js-term-insert","tmpl-term").createAndWait(function(m,u){T(),u.insertAdjacentHTML("beforeend",m(c)),a.querySelector(".terms-wrapper").classList.remove("is-hidden"),W(),X()})}}catch(r){console.error("Error occurred:",r)}}else confirm("Are you sure you want to disable this taxonomy?")?(a.querySelector(`.js-term-insert .js-tax-${t}`).remove(),a.querySelectorAll(".js-term-insert .cel").length===0&&a.querySelector(".terms-wrapper").classList.add("is-hidden")):e.target.checked=!0}}async function et(e){if(e.preventDefault(),confirm("Are you sure you want to remove all terms of taxonomies?")){let s={action:"action_remove_terms",nonce_code:_ymc_fg_object.removeTermsAjax_nonce,payload:JSON.stringify({post_id:S})};try{x();let o=await fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(s).toString()});if(o.ok){let r=await o.json();T(),a.querySelectorAll(".terms-wrapper .terms-grid .cel").forEach(n=>{n.remove()}),a.querySelector(".terms-wrapper").classList.add("is-hidden"),a.querySelectorAll("#general .js-tax-insert .js-tax-checkbox").forEach(n=>{n.checked=!1})}}catch(o){console.error("Error occurred:",o)}}}async function tt(e){e.preventDefault();let t=a.querySelectorAll("#general #ymc-post-types option:checked"),s=Array.from(t).map(r=>r.value),o={action:"action_updated_taxonomies",nonce_code:_ymc_fg_object.updatedTaxAjax_nonce,payload:JSON.stringify({post_types:s})};try{x();let r=await fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(r.ok){let d=(await r.json()).taxonomies,l=[],c={},i=Object.keys(d).length,m=new w(".ymc-main .js-tax-insert","tmpl-taxonomy");if(a.querySelectorAll(".js-tax-insert .taxonomies-list__item").forEach(u=>{let p=u.dataset.taxName;l.push(p)}),i>0){if(i>l.length)for(let u in d)l.includes(u)||(c={taxonomies:{[u]:d[u]},isTax:!0},m.createAndWait(function(p,y){y.insertAdjacentHTML("beforeend",p(c))}));i<l.length&&l.forEach(u=>{var p,y;Object.keys(d).includes(u)||((p=a.querySelector('.js-tax-insert [data-tax-name="'+u+'"]'))==null||p.remove(),(y=a.querySelector(".js-term-insert .js-tax-"+u))==null||y.remove())}),this.classList.add("is-success"),this.lastChild.textContent="Update completed",setTimeout(()=>{this.classList.remove("is-success"),this.lastChild.textContent="Update taxonomies"},2e3)}T()}}catch(r){console.error("Error occurred:",r)}}async function ot(e){e.preventDefault();let t=g,s=[];L.querySelectorAll(".js-term-insert .term-item").forEach(r=>{s.push({term_id:r.dataset.termId,term_taxonomy:r.dataset.termTaxonomy,term_slug:r.dataset.termSlug,term_name_orig:r.dataset.termNameOrig,term_background:r.dataset.termBackground,term_color:r.dataset.termColor,term_class:r.dataset.termClass,term_default:r.dataset.termDefault,term_visible:r.dataset.termVisible,term_name:r.dataset.termNameOrig,term_checked:r.dataset.termChecked,term_status:r.dataset.termStatus,icon_class:r.dataset.termIconClass,icon_alignment:r.dataset.termIconAlignment,icon_color:r.dataset.termIconColor,icon_url:r.dataset.termIconUrl,related_terms:r.dataset.termRelatedTerms})});let o=new URLSearchParams({action:"action_save_term_attrs",nonce_code:_ymc_fg_object.saveTermAttrAjax_nonce,payload:JSON.stringify({post_id:S,term_attrs:s})});try{x();let r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()});r.ok?(await r.json()).response==="updated"?location.reload():(this.classList.add("is-success"),this.lastChild.textContent="Up to Date",setTimeout(()=>{this.classList.remove("is-success"),this.lastChild.textContent="Update Terms"},2e3)):console.error("Error HTTP: "+r.status)}catch(r){console.error("Error occurred:",r)}finally{T()}}function ue(){let e=a.querySelector(".js-tax-sortable");jQuery(e).sortable({cursor:"move",handle:".js-tax-handle",opacity:1,delay:150,scroll:!1,start:function(t,s){s.item[0].classList.add("is-item-dragging"),e.classList.add("dragging")},stop:function(t,s){s.item[0].classList.remove("is-item-dragging"),e.classList.remove("dragging");let o=[];e.querySelectorAll(".taxonomies-list__item").forEach(r=>{o.push(r.dataset.taxName)}),rt(o)}})}async function rt(e){let t=g,s=new URLSearchParams({action:"action_taxonomies_sort",nonce_code:_ymc_fg_object.sortTaxAjax_nonce,payload:JSON.stringify({tax_sort:e,post_id:S})});fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()}).then(function(o){if(o.ok===!0)return o.json();console.error("Error occurred:",o.status)}).catch(o=>console.error(o))}function pe(){a.querySelectorAll("#general .js-term-insert").forEach(e=>{e.addEventListener("click",function(t){if(t.target.closest(".tax-name")){let s=t.target.closest(".cel").querySelectorAll(".term-item .checkbox-control");t.target.checked?s.forEach(o=>{o.checked=!0}):s.forEach(o=>{o.checked=!1})}})})}function fe(){a.querySelector("#general .posts-wrapper .js-scroll-posts").addEventListener("scroll",K)}function ye(){a.querySelector("#general .posts-wrapper .js-field-search").addEventListener("input",at),a.querySelector("#general .posts-wrapper .js-btn-search").addEventListener("click",st),a.querySelector("#general .posts-wrapper .js-btn-clear").addEventListener("click",he)}function K(){let e=a.querySelector("#general .posts-wrapper .js-scroll-posts"),t={root:e,rootMargin:"0px",threshold:.9};new IntersectionObserver((o,r)=>{o.forEach(n=>{if(n.isIntersecting&&!n.target.classList.contains("is-loaded")){n.target.classList.add("is-loaded");let d=Array.from(a.querySelectorAll("#general #ymc-post-types option:checked")).map(c=>c.value),l={action:"action_selected_posts",nonce_code:_ymc_fg_object.selectPostsAjax_nonce,payload:JSON.stringify({post_types:d,paged:_ymc_fg_object.loadedFeedPosts_page,post_id:S,posts_per_page:20})};x("#general .posts-wrapper .js-scroll-posts"),fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(l).toString()}).then(function(c){if(c.ok===!0)return c.json();console.error("Error occurred:",c.status)}).then(c=>{let i={};c.posts.length>0&&(i={isPosts:!0,posts:c.posts}),new w(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(u,p){T(),p.insertAdjacentHTML("beforeend",u(i)),_ymc_fg_object.loadedFeedPosts_page++,e.querySelectorAll(".js-add-post").forEach(y=>{y.removeEventListener("click",I)}),B()})}).catch(c=>console.error(c))}})},t).observe(e.querySelector("li:last-child"))}async function st(){let e=a.querySelector("#general .posts-wrapper .js-scroll-posts"),t=a.querySelector("#general .posts-wrapper .feed-posts .number-posts"),s=a.querySelector("#general .posts-wrapper .js-field-search").value.toLowerCase();if(s.length>0){let o=a.querySelectorAll("#general #ymc-post-types option:checked"),r=Array.from(o).map(d=>d.value),n={action:"action_search_feed_posts",nonce_code:_ymc_fg_object.searchFeedPostsAjax_nonce,payload:JSON.stringify({post_types:r,post_id:S,phrase:s})};try{x("#general .posts-wrapper .js-scroll-posts"),this.classList.add("button--disabled");let d=await fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});if(d.ok){let l=await d.json(),c={},i=l.found_posts;l.posts.length>0?c={isPosts:!0,posts:l.posts}:c={noPosts:!0,no_posts_found:"No posts found"},t.innerHTML=i,this.classList.remove("button--disabled"),e.removeEventListener("scroll",K),e.scrollTo({top:0,left:0,behavior:"smooth"}),new w(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(u,p){T(),p.innerHTML=u(c),e.querySelectorAll(".js-add-post").forEach(y=>{y.removeEventListener("click",I)}),B()})}}catch(d){console.error("Error occurred:",d)}}}function at(){this.value.length>0?this.nextElementSibling.classList.remove("is-hidden"):(this.nextElementSibling.classList.add("is-hidden"),he().then(e=>{}))}async function he(){let e=a.querySelector("#general .posts-wrapper .js-scroll-posts"),t=a.querySelector("#general .posts-wrapper .feed-posts .number-posts"),s=a.querySelector("#general .posts-wrapper .js-field-search"),o=a.querySelector("#general .posts-wrapper .js-btn-clear"),r=a.querySelectorAll("#general #ymc-post-types option:checked"),n=Array.from(r).map(i=>i.value),d=g,l="#general .posts-wrapper .js-scroll-posts",c=new URLSearchParams({action:"action_selected_posts",nonce_code:_ymc_fg_object.selectPostsAjax_nonce,payload:JSON.stringify({post_types:n,paged:1,post_id:S,posts_per_page:20})});o.classList.add("is-hidden"),s.value="",s.focus();try{x(l);let i=await fetch(d,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c.toString()});if(i.ok){let m=await i.json(),u={},p=m.found_posts;m.posts.length>0?u={isPosts:!0,posts:m.posts}:u={noPosts:!0,no_posts_found:"No posts found"},t.innerHTML=p,e.scrollTo({top:0,left:0,behavior:"smooth"}),new w(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(j,_){_.innerHTML=j(u),_ymc_fg_object.loadedFeedPosts_page=2,e.querySelectorAll(".js-add-post").forEach(v=>{v.removeEventListener("click",I)}),B(),e.addEventListener("scroll",K)})}}catch(i){console.error("Error occurred:",i)}finally{T(l)}}function _e(){a.querySelector("#general .button-expand-wrapper .js-button-expand").addEventListener("click",function(){this.classList.toggle("is-expanded"),a.querySelectorAll("#general .select-posts-display__inner .cel .list-posts").forEach(e=>{e.classList.contains("is-expanded")?e.classList.remove("is-expanded"):e.classList.add("is-expanded")})})}function ge(){a.querySelector("#general .excluded-posts-checkbox .js-excluded-checkbox").addEventListener("click",function(e){let t=a.querySelector("#general .selected-posts .js-post-sortable");this.checked?t.classList.add("is-excluded"):t.classList.remove("is-excluded")})}function xe(){Se(),Te();let e=a.querySelectorAll("#layouts .filter-builder .js-filter-group .filter-item").length;a.querySelector("#layouts .filter-builder .js-add-filter").addEventListener("click",nt(e)),a.querySelector("#layouts .js-toggle-filter-builder").addEventListener("change",Se)}function Te(){a.querySelectorAll("#layouts .filter-builder .js-remove-filter").forEach(e=>{e.addEventListener("click",ct)})}function nt(e){return async function(){let t=a.querySelector(".filter-builder .js-filter-group"),s={action:"action_get_selected_taxonomies",nonce_code:_ymc_fg_object.getSelectTaxAjax_nonce,payload:JSON.stringify({post_id:S})};try{x();let o=await fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(s).toString()});if(o.ok){let r=await o.json(),n=r.taxSelected.length>0,d=r.taxSelected.length>0?"":"is-disabled",l={filterIndex:e,isTaxSelected:n,isDisabledTax:d,taxSelected:r.taxSelected,filtersTypes:r.filtersTypes,placements:r.placements};new w(t,"tmpl-filter-builder").createAndWait(function(i,m){m.insertAdjacentHTML("beforeend",i(l)),Te()}),e++}}catch(o){console.error("Error occurred:",o)}finally{T()}}}function ct(){let e=this.closest(".filter-item");e&&e.remove()}function Se(){let e=a.querySelector(".js-toggle-filter-builder"),t=a.querySelector(".filter-builder"),s=b.querySelector(".js-filter-button-all");e.value==="composite"?t.style.display="block":t.style.display="none",e.value==="default"||e.value==="composite"?s.style.display="block":s.style.display="none"}function je(e){b.querySelector(".js-term-sort-direction").addEventListener("change",lt),b.querySelector(".js-pagination_type").addEventListener("change",it),b.querySelector(".js-post-order-by").addEventListener("change",dt),b.querySelector(".js-add-order-multiple-field").addEventListener("click",mt(0,e)),b.querySelectorAll(".js-remove-order-field").forEach(t=>{t.addEventListener("click",ve)})}function lt(){let e=this.value,t=b.querySelector(".js-term-sort-field"),s=e==="manual";t.style.display=s?"none":"block"}function it(){let e=this.value,t=b.querySelector(".js-navigation-buttons"),s=b.querySelector(".js-load-more-button"),o=e==="numeric",r=e==="loadmore";t.style.display=o?"block":"none",s.style.display=r?"block":"none"}function dt(){let e=this.value,t=b.querySelector(".js-order-fields-meta-key"),s=b.querySelector(".js-order-fields-multiple-fields"),o=e==="meta_key";t.style.display=o?"block":"none";let r=e==="multiple_fields";s.style.display=r?"block":"none"}function mt(e,t){return function(){let s=b.querySelector(".post-order-fields-inner"),o=s.querySelectorAll(".field-group").length;o>0&&(e=o);let n=b.querySelector(".field-multiple-template").innerHTML.replace(/index/g,e);s.insertAdjacentHTML("beforeend",n),e++,J(t),b.querySelectorAll(".js-remove-order-field").forEach(d=>{d.addEventListener("click",ve)})}}function ve(){this.closest(".field-group").remove()}function be(){let e=E.querySelector(".js-selected-post-layout"),t=E.querySelector(".js-grid-settings"),s=E.querySelector(".js-grid-style"),o=E.querySelector(".js-carousel-settings"),r=E.querySelector(".js-default-carousel-settings"),n=E.querySelector(".js-checkbox-custom-carousel-settings");e&&e.addEventListener("change",function(){this.value==="layout_carousel"?(t.style.display="none",s.style.display="none",o.style.display="block"):(t.style.display="block",s.style.display="block",o.style.display="none")}),r&&n.addEventListener("change",function(){this.checked?r.style.display="none":r.style.display="block"}),pt(),ut()}function ut(){let e=E.querySelector(".js-tooltip-trigger"),t=E.querySelector(".js-field-example"),s;function o(){clearTimeout(s),t.classList.add("visible")}function r(){s=setTimeout(()=>{t.classList.remove("visible")},200)}e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",r),t.addEventListener("mouseenter",o),t.addEventListener("mouseleave",r)}function pt(){E.querySelectorAll(".field-description pre code").forEach(e=>{let t=e.innerHTML.split(`
`);for(;t.length&&t[0].trim()==="";)t.shift();for(;t.length&&t[t.length-1].trim()==="";)t.pop();let s=Math.min(...t.filter(o=>o.trim()).map(o=>o.match(/^(\s*)/)[0].length));e.innerHTML=t.map(o=>o.slice(s)).join(`
`)})}function we(){N.querySelector(".js-filter-font-family").addEventListener("change",ft),N.querySelector(".js-post-title-font-family").addEventListener("change",yt),N.querySelector(".js-post-link-font-family").addEventListener("change",ht)}function ft(){let e=this.value,t=N.querySelector(".js-filter-custom-font-fields"),s=e==="custom";t.style.display=s?"block":"none"}function yt(){let e=this.value,t=N.querySelector(".js-post-title-custom-font-fields"),s=e==="custom";t.style.display=s?"block":"none"}function ht(){let e=this.value,t=N.querySelector(".js-post-link-custom-font-fields"),s=e==="custom";t.style.display=s?"block":"none"}function qe(){V.querySelector(".js-autocomplete-enabled").addEventListener("change",_t)}function _t(){let e=V.querySelector(".js-autocomplete-settings");e&&(this.checked?e.classList.remove("is-hidden"):e.classList.add("is-hidden"))}function Ce(){k.querySelector(".js-advanced-query-type").addEventListener("change",gt)}function gt(){let e=this.value,t=k.querySelector(".js-callback-function"),s=k.querySelector(".js-advanced-query"),o=e==="callback",r=e==="advanced";t&&(t.style.display=o?"block":"none"),s&&(s.style.display=r?"block":"none")}function Le(e){e(".js-picker-color").wpColorPicker(),e(".js-picker-color-alpha").wpColorPicker({palettes:!0,alpha:!0,clear:!0})}function Ae(){D("#appearance .js-toggle-switch-filter-state","#appearance .js-is-disabled-filter-options","hide"),D("#appearance .js-toggle-switch-pagination","#appearance .js-is-disabled-pagination","hide"),D("#appearance .js-toggle-switch-popup","#appearance .js-is-enable-popup","show"),D("#search .js-toggle-switch-search-posts","#search .js-is-disabled-search-options","show"),D("#advanced .js-toggle-switch-advanced-query",".js-is-enable-advanced-query","show"),D("#advanced .js-toggle-switch-sort-posts",".js-is-enable-sort-posts","show")}function D(e,t,s="show"){document.querySelectorAll(`${e} .js-toggle-switch input[type="checkbox"]`).forEach(o=>{let n=o.closest(e).querySelector(t);if(!n)return;let d=()=>{let l=o.checked&&s==="show"||!o.checked&&s==="hide";n.style.display=l?"block":"none"};o.addEventListener("change",d),d()})}function Ee(){let e=k.querySelector(".js-preloader-icon"),t=k.querySelector(".js-preloader-filters"),s=k.querySelector(".js-preloader-custom-filters"),o=k.querySelector(".js-preview-preloader"),r=Y+"assets/images/preloaders/",n=c=>{var u;let i=o.querySelector("img");if(!i)return;let m={none:"none",brightness:"brightness(1.4)",contrast:"contrast(1.5)",grayscale:"grayscale(100%)",invert:"invert(100%)",opacity:"opacity(40%)",saturate:"saturate(2)",sepia:"sepia(100%)"};if(c==="custom_filter"){let p=s==null?void 0:s.querySelector("input"),y=((u=p==null?void 0:p.value)==null?void 0:u.trim())||"none";y.startsWith("filter:")&&(y=y.replace(/^filter:\s*/i,"")),i.style.cssText=`filter: ${y};`}else i.style.filter=m[c]||"none"},d=c=>{if(!s)return;let i=s.querySelector("input");c==="custom_filter"?(s.style.display="block",i&&!i.dataset.listenerAttached&&(i.addEventListener("input",()=>{n("custom_filter")}),i.dataset.listenerAttached="true")):s.style.display="none"},l=c=>{if(c==="none")o.innerHTML="";else{let i=document.createElement("img");i.src=r+c+".svg",i.alt=c+" preloader",i.width=70,i.height=70,o.innerHTML="",o.appendChild(i);let m=(t==null?void 0:t.value)||"none";m==="custom_filter"?setTimeout(()=>{n("custom_filter")},0):n(m)}};e==null||e.addEventListener("change",function(){l(this.value)}),t==null||t.addEventListener("change",function(){let c=this.value;d(c),n(c)}),e!=null&&e.value&&e.value!=="none"&&l(e.value),t!=null&&t.value&&d(t.value)}function Pe(e){let t=L.querySelector(".js-tax-sequence-wrapper");if(t){let n=function(){let c=t.querySelectorAll(".js-sequence-taxonomies .taxonomy-by-related-terms"),i=t.querySelectorAll(".js-available-taxonomies .taxonomy-by-related-terms"),m=[],u=t.querySelector(".js-sequence-input");i.forEach(p=>{var y,j,_;(y=p.querySelector(".taxonomy-order"))==null||y.remove(),(j=p.querySelector(".radio-buttons-wrap"))==null||j.remove(),(_=p.querySelector(".js-icon-config"))==null||_.remove()}),c.forEach((p,y)=>{let j=p.querySelector(".taxonomy-order");j||(j=document.createElement("span"),j.className="taxonomy-order",p.append(j)),j.textContent=y+1,m.push(p.getAttribute("data-tax"));let _=p.querySelector(".js-icon-config");_||(_=document.createElement("span"),_.className="icon-config js-icon-config",p.append(_));let v=p.querySelector(".radio-buttons-wrap");if(!v){let h=p.getAttribute("data-tax");v=document.createElement("div"),v.className="radio-buttons-wrap";let q=document.createElement("label"),C=document.createElement("input");C.type="radio",C.name=`tax_mode_${h}`,C.value="single",C.className="input-radio js-tax-radio",q.append(C,"Single");let O=document.createElement("label"),P=document.createElement("input");P.type="radio",P.name=`tax_mode_${h}`,P.value="multiple",P.className="input-radio js-tax-radio",O.append(P,"Multiple"),v.append(q,O),p.append(v);let M=v.querySelector(".header-config");M||(M=document.createElement("div"),M.className="header-config",M.textContent="Mode Taxonomy",v.prepend(M)),C.checked=!0}}),u&&(u.value=m.join(",")),l(),d()},d=function(){let c=t.querySelectorAll(".js-sequence-taxonomies .taxonomy-by-related-terms"),i=t.querySelector(".js-sequence-tax-settings"),m=[];c.forEach(u=>{let p=u.getAttribute("data-tax"),y=u.querySelector(`input[name="tax_mode_${p}"]:checked`),j=y?y.value:"single";m.push({taxonomy:p,mode:j})}),i&&(i.value=JSON.stringify(m))},l=function(){o.children("li").length?o.closest(".sequence-selected").addClass("hide-placeholder"):o.closest(".sequence-selected").removeClass("hide-placeholder")},s=e(".js-available-taxonomies"),o=e(".js-sequence-taxonomies"),r=".js-available-taxonomies, .js-sequence-taxonomies";[s,o].forEach(c=>{if(c.data("ui-sortable"))try{c.sortable("destroy")}catch(i){}}),s.add(o).sortable({connectWith:r,items:"> li",handle:".js-tax-handle",appendTo:"body",zIndex:9999,tolerance:"pointer",placeholder:"ui-sortable-placeholder",helper:function(c,i){let m=i.clone();return m.addClass("taxonomy-by-related-terms"),m.css({width:i.outerWidth(),height:i.outerHeight(),boxSizing:"border-box"}),m},start:function(c,i){i.placeholder.height(i.helper.outerHeight())},stop:function(c,i){setTimeout(n,0)},receive:function(c,i){e(this).hasClass("js-sequence-taxonomies")&&(n(),ke(t))},update:function(c,i){e(this).hasClass("js-sequence-taxonomies")&&i.sender===null&&(n(),ke(t))}}).disableSelection(),t.addEventListener("change",function(c){c.target.matches(".js-tax-radio")&&d()}),t.addEventListener("click",function(c){if(c.target.matches(".js-icon-config")){let m=c.target.closest(".taxonomy-by-related-terms").querySelector(".radio-buttons-wrap");c.target.classList.toggle("is-close"),m&&m.classList.toggle("is-visible")}}),l(),St()}}function St(){let e=L.querySelectorAll('.js-root-source input[type="radio"]'),t=L.querySelector(".js-root-terms");e.forEach(s=>{s.addEventListener("change",()=>{s.value==="manual"?t.classList.add("is-visible"):(t.classList.remove("is-visible"),t.querySelectorAll(".js-root-term").forEach(r=>r.checked=!1))})})}async function ke(e){var i;let t=g,s=".js-root-terms-list",o=e.querySelector(".js-root-terms-list"),r=e.querySelector(".js-sequence-input").value,n=((i=e.querySelector(".js-root-source:checked"))==null?void 0:i.value)||"top_level",d=[];e.querySelectorAll(".js-root-term:checked").forEach(m=>{d.push(parseInt(m.value))});let l={post_id:S,sequence:r,root_source:n,root_terms:d},c=new URLSearchParams({action:"action_update_root_source_terms",nonce_code:_ymc_fg_object.updateRootSourceTerms_nonce,payload:JSON.stringify(l)});try{x(s);let m=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c.toString()});if(m.ok){let u=await m.json();o.innerHTML=u.data.root_terms}else console.error("Error HTTP: "+m.status)}catch(m){console.error("Error occurred:",m)}finally{T(s)}}function Me(){var e;(e=G.querySelector(".export-wrapper .js-button-export-settings"))==null||e.addEventListener("click",async t=>{let s=new Date().getFullYear(),o=new Date().getDate(),r=new Date().getMonth(),n=new Date().getHours(),d=new Date().getMinutes(),l=new Date().getSeconds(),c=new FormData;c.append("action","action_export_settings"),c.append("nonce_code",_ymc_fg_object.exportSettingsAjax_nonce),c.append("post_id",S);try{x(".ymc-main #tools");let i=await fetch(g,{method:"POST",body:c});if(!i.ok){A(`HTTP error! Status: ${i.status}`,"#tools .export-wrapper .notify-wrapper","error",2e3);return}let m=await i.blob(),u=document.createElement("a"),p=`ymc-fg-export-${o}-${r+1}-${s}-${n}:${d}:${l}.json`,y=window.URL.createObjectURL(m);u.href=y,u.download=p,document.body.appendChild(u),u.click(),u.remove(),URL.revokeObjectURL(y),A("Settings exported","#tools .export-wrapper .notify-wrapper","success",2e3)}catch(i){console.error("Error occurred:",i),A("Error occurred","#tools .export-wrapper .notify-wrapper","error",2e3)}finally{T()}})}function Be(e){var t;(t=G.querySelector(".import-wrapper .js-file-import-settings"))==null||t.addEventListener("change",xt)}function xt(){let e=this,t=e.files[0];if(t)if(t.type==="application/json"&&t.name.indexOf("ymc-fg-export-")===0){let s=new FileReader;s.readAsText(t),s.onload=async function(){let o=new FormData;o.append("file",t),o.append("action","action_import_settings"),o.append("post_id",S),o.append("params",s.result),o.append("nonce_code",_ymc_fg_object.importSettingsAjax_nonce);try{x(".ymc-main #tools");let r=await fetch(g,{method:"POST",credentials:"same-origin",body:o});if(!r.ok){A(`HTTP error! Status: ${r.status}`,"#tools .import-wrapper .notify-wrapper","error",2e3);return}let n=await r.json();A(n.data.message,"#tools .import-wrapper .notify-wrapper","success",2e3),e.value="",location.reload()}catch(r){console.error("Error occurred:",r),A("Error occurred","#tools .import-wrapper .notify-wrapper","error",2e3)}finally{T()}}}else A("Invalid file format","#tools .import-wrapper .notify-wrapper","error",2e3)}(function(e){document.addEventListener("DOMContentLoaded",()=>{se(),F(),ce(),le(),ie(),de(),me(),B(),z(),ue(),W(),_e(),pe(),fe(),ye(),Q(),ge(),xe(),je(e),be(),we(),qe(),Ce(),J(e),$(),X(),Le(e),Ae(),Ee(),Me(),Pe(e),Be()})})(jQuery);
