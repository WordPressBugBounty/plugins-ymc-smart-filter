var f=document.querySelector("body.js-ymc-admin"),a=document.querySelector("#ymc_main_meta_box .ymc-main"),S=a.dataset.postId,N=_ymc_fg_object.path,_=_ymc_fg_object.ajax_url,L=a.querySelector("#ymc_main_meta_box .ymc-main #general"),E=a.querySelector("#ymc_main_meta_box .ymc-main #layouts"),b=a.querySelector("#ymc_main_meta_box .ymc-main #appearance"),G=a.querySelector("#ymc_main_meta_box .ymc-main #search"),I=a.querySelector("#ymc_main_meta_box .ymc-main #typography"),P=a.querySelector("#ymc_main_meta_box .ymc-main #advanced"),At=a.querySelector("#ymc_main_meta_box .ymc-main #shortcode"),z=a.querySelector("#ymc_main_meta_box .ymc-main #tools"),Et=a.querySelector("#ymc_main_meta_box .ymc-main #license"),k=a.querySelector("#ymc_main_meta_box .ymc-main #usage");function F(e,t,s){let o="";if(s){let r=new Date;r.setTime(r.getTime()+s*24*60*60*1e3),o="; expires="+r.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/"}function U(e){let t=e+"=",s=document.cookie.split(";");for(let o=0;o<s.length;o++){let r=s[o];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(t)===0)return r.substring(t.length,r.length)}return null}function J(){if(a.querySelectorAll(".tabs-content .js-headline-accordion").forEach(e=>{e.addEventListener("click",De)}),U("hashAccordionYmc")){let e=U("hashAccordionYmc");a.querySelectorAll(`.tabs-content .js-headline-accordion[data-hash="${e}"]`).forEach(t=>{t.classList.add("is-active"),t.nextElementSibling.style.display="block",t.querySelector(".js-icon-accordion").classList.add("fa-chevron-up"),t.querySelector(".js-icon-accordion").classList.remove("fa-chevron-down")})}}function De(e){let t=e.target.closest(".js-headline-accordion"),s=t.nextElementSibling,o=t.querySelector(".js-icon-accordion"),r=t.dataset.hash;t.classList.toggle("is-active"),jQuery(s).slideToggle(),o.classList.toggle("fa-chevron-down"),o.classList.toggle("fa-chevron-up"),F("hashAccordionYmc",r,30),(r==="custom_css"||r==="custom_js")&&setTimeout(function(){window.ymcEditors&&(window.ymcEditors.css&&window.ymcEditors.css.refresh(),window.ymcEditors.js&&window.ymcEditors.js.refresh())},300)}function ae(){let e=a.querySelectorAll(".tabs-sidebar .nav .nav__item"),t=a.querySelectorAll(".tabs-content .section");if(e.forEach(s=>{s.addEventListener("click",o=>{let r=o.target.closest(".nav__item"),n=r.dataset.hash;F("hashymc",n,30),e.forEach(i=>{i.classList.remove("is-current")}),t.forEach(i=>{n===i.getAttribute("id")?i.classList.add("is-active"):i.classList.remove("is-active")}),r.classList.add("is-current")})}),U("hashymc")!==""){let s=U("hashymc");e.forEach(o=>{s===o.dataset.hash&&(e.forEach(r=>{r.classList.remove("is-current")}),o.classList.add("is-current"),t.forEach(r=>{s===r.getAttribute("id")?r.classList.add("is-active"):r.classList.remove("is-active")}))})}J()}function $(e){e(".js-btn-tooltip").tooltip({classes:{"ui-tooltip":"ymc-tooltip","ui-tooltip-content":"ymc-tooltip-content"},position:{my:"center bottom-20",at:"center",collision:"fit"},content:function(){return e(this).attr("data-tooltip-html")}})}function x(e){e===void 0?f.insertAdjacentHTML("afterbegin",`<div class="preloader"><img src="${N}/assets/images/preloader.svg" alt="preloader"></div>
                    <div class="overlay"></div>`):f.querySelector(e).insertAdjacentHTML("afterbegin",`<div class="preloader preloader--is-local"><img src="${N}/assets/images/preloader.svg" alt="preloader"></div>
                    <div class="overlay overlay--is-local"></div>`)}function T(){var e,t;(e=f.querySelector(".preloader"))==null||e.remove(),(t=f.querySelector(".overlay"))==null||t.remove()}function q(e,t,s){typeof e=="string"?this.el=document.querySelector(e):this.el=e,this.tempName=t,this.data=s||null,this.folderPath=N+"src/admin/js-templates/"}q.prototype.create=function(e){let t=new XMLHttpRequest,s=this;t.open("get",this.folderPath+this.tempName+".hbs",!0),t.onreadystatechange=function(){if(t.readyState===4&&t.status===200){let o=Handlebars.compile(t.response);s.el.innerHTML=o(s.data),e()}},t.send()};q.prototype.createAndWait=function(e){let t=new XMLHttpRequest,s=this;t.open("get",this.folderPath+this.tempName+".hbs",!0),t.onreadystatechange=function(){if(t.readyState===4&&t.status===200){let o=Handlebars.compile(t.response);e(o,s.el)}},t.send()};function W(){jQuery(".js-term-insert .js-term-sortable").sortable({cursor:"move",opacity:1,delay:150,handle:".js-term-handle",scroll:!1,start:function(e,t){t.item[0].classList.add("is-item-dragging"),t.item[0].closest(".terms-inner").classList.add("dragging")},stop:function(e,t){t.item[0].classList.remove("is-item-dragging"),t.item[0].closest(".terms-inner").classList.remove("dragging");let s=[];a.querySelectorAll('.js-term-insert .js-term-sortable input[type="checkbox"]').forEach(o=>{s.push(o.value)}),Fe(s)}})}async function Fe(e){let t=_,s=new URLSearchParams({action:"action_terms_sort",nonce_code:_ymc_fg_object.sortTermAjax_nonce,payload:JSON.stringify({terms_sort:e,post_id:S})});fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()}).then(function(o){if(o.ok===!0)return o.json();console.error("Error occurred:",o.status)}).catch(o=>console.error(o))}function Q(){jQuery(".selected-posts .js-post-sortable").sortable({axis:"y",cursor:"move",opacity:1,delay:150,containment:"parent",start:function(e,t){t.item[0].closest(".js-post-sortable").classList.add("dragging")},stop:function(e,t){t.item[0].closest(".js-post-sortable").classList.remove("dragging")}})}function H(){let e=this.dataset.postId,t=this.querySelector(".post-title").innerText,s={postId:e,postTitle:t};this.classList.add("is-disabled"),new q(".ymc-main #general .selected-posts .list-posts","tmpl-selected-posts").createAndWait(function(r,n){n.insertAdjacentHTML("beforeend",r(s)),a.querySelector("#general .selected-posts .number-posts").innerText=a.querySelectorAll("#general .selected-posts .list-posts .post-selected").length,Q(),Z()})}function O(){a.querySelectorAll("#general .feed-posts .js-scroll-posts .js-add-post").forEach(e=>{e.addEventListener("click",H)})}function Z(){a.querySelectorAll("#general .selected-posts .post-selected .js-post-remove").forEach(e=>{e.addEventListener("click",function(){let t=this.dataset.postId;this.closest(".post-selected").remove(),a.querySelectorAll("#general .feed-posts .js-add-post").forEach(s=>{t===s.dataset.postId&&s.classList.remove("is-disabled")}),a.querySelector("#general .selected-posts .number-posts").innerText=a.querySelectorAll("#general .selected-posts .list-posts .post-selected").length})})}function A(e,t=document.body,s="seccess",o=3e3){let r=document.createElement("div");r.classList.add("notification",`notification--${s}`),r.innerHTML=e,document.querySelector(t).appendChild(r),setTimeout(()=>r.remove(),o)}function X(){a.querySelectorAll("#general .js-tax-insert .js-tax-settings").forEach(e=>{e.addEventListener("click",Je)})}function Je(){var c,d;a.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(u=>u.classList.remove("is-open"));let e=this.closest(".taxonomies-list__item");e.classList.add("is-open");let{taxName:t,taxOriginalName:s,taxLabel:o,taxBg:r,taxColor:n,taxStatus:i}=e.dataset;o=o||s,r=r||"#ffffff",n=n||"#ffffff",tb_show("&#9998; Taxonomy: &#91; "+o+" &#93;","/?TB_inline&inlineId=thickbox-tax-modal&width=800&height=500");let l=f.querySelector("#TB_window #TB_ajaxContent .form-taxonomy");jQuery(l.querySelector(".js-tax-bg")).wpColorPicker("color",r),jQuery(l.querySelector(".js-tax-color")).wpColorPicker("color",n),l.querySelector(".js-tax-name").value=o,(c=f.querySelector("#TB_window #TB_ajaxContent .js-btn-tax-save"))==null||c.addEventListener("click",$e),(d=f.querySelector("#TB_window #TB_ajaxContent .js-btn-tax-reset"))==null||d.addEventListener("click",We)}function $e(){let e=a.querySelector("#general .js-tax-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-taxonomy"),s=t.querySelector(".js-tax-bg").value,o=t.querySelector(".js-tax-color").value,r=t.querySelector(".js-tax-name").value,n=e.dataset.taxOriginalName,i=[];e.classList.add("changed"),e.dataset.taxBg=s,e.dataset.taxColor=o,e.dataset.taxLabel=r,e.dataset.taxStatus="changed",e.querySelector(".field-label").innerHTML=r||n,a.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(l=>{i.push({name:l.dataset.taxName,label:l.dataset.taxLabel,background:l.dataset.taxBg,color:l.dataset.taxColor,status:l.dataset.taxStatus})}),ne(i)}function We(){let e=a.querySelector("#general .js-tax-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-taxonomy"),s=[];jQuery(t.querySelector(".js-tax-bg")).wpColorPicker("color","#ffffff"),jQuery(t.querySelector(".js-tax-color")).wpColorPicker("color","#ffffff"),t.querySelector(".js-tax-name").value=e.dataset.taxOriginalName,e.classList.remove("changed"),e.dataset.taxBg="",e.dataset.taxColor="",e.dataset.taxLabel="",e.dataset.taxStatus="",e.querySelector(".field-label").innerHTML=e.dataset.taxOriginalName,a.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(o=>{s.push({name:o.dataset.taxName,label:o.dataset.taxLabel,background:o.dataset.taxBg,color:o.dataset.taxColor,status:o.dataset.taxStatus})}),ne(s)}async function ne(e){let t="#TB_window #TB_ajaxContent",s=_,o=new URLSearchParams({action:"action_save_taxonomy_attrs",nonce_code:_ymc_fg_object.saveTaxAttrAjax_nonce,payload:JSON.stringify({post_id:S,tax_attrs:e})});try{x(t);let r=await fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()});if(r.ok){let n=await r.json();A(n.message,"#TB_window #TB_ajaxContent","success",2e3)}else console.error("Error HTTP: "+r.status)}catch(r){console.error("Error occurred:",r)}finally{T(t)}}function V(){a.querySelectorAll("#general .js-term-insert .js-term-settings").forEach(e=>{e.addEventListener("click",Qe)})}function Qe(){var B,te,oe,re,se;a.querySelectorAll("#general .js-term-insert .term-item").forEach(R=>R.classList.remove("is-open"));let e=this.closest(".term-item");e.classList.add("is-open");let{termId:t,termName:s,termNameOrig:o,termBackground:r,termColor:n,termClass:i,termDefault:l,termVisible:c,termSlug:d,termTaxonomy:u,termIconAlignment:m,termIconClass:p,termIconColor:y,termIconUrl:j}=e.dataset;r=r||"",n=n||"",i=i||"",l=l||"false",c=c||"true",s=s||o,m=m||"left",p=p||"",y=y||"#ffffff",j=j||"",tb_show("&#9998; Term: &#91; "+s+" &#93;","/?TB_inline&inlineId=thickbox-term-modal&width=800&height=500");let g=f.querySelector("#TB_window #TB_ajaxContent .form-term"),v=g.querySelector(".js-term-bg"),h=g.querySelector(".js-term-color");if(r?jQuery(v).wpColorPicker("color",r):jQuery(v).val("").trigger("change"),n?jQuery(h).wpColorPicker("color",n):jQuery(h).val("").trigger("change"),jQuery(g.querySelector(".js-icon-color")).wpColorPicker("color",y),g.querySelector(".js-term-class").value=i,g.querySelector(".js-term-name").value=s,g.querySelector(".js-term-default").checked=l==="true",g.querySelector(".js-term-visible").checked=c==="true",g.querySelector(".js-icon-class").value=p,g.querySelectorAll(".js-icon-alignment").forEach(R=>{R.checked=R.value===m}),g.querySelector(".js-tax-sequence")){let R=g.querySelector(".js-related-terms-wrapper"),Ue=(B=g.querySelector(".js-tax-sequence"))==null?void 0:B.dataset.taxSequence;R.innerHTML="",Ge(Ue,d,t,g,u)}let w=g.querySelector(".js-domain"),C=g.querySelector(".js-icon-preview"),Y=g.querySelector(".js-btn-icon-remove");j?C.innerHTML=`<img src="${w.getAttribute("value")}${j}" width="20">`:p?C.innerHTML=`<i class="${p}"></i>`:C.innerHTML="",Y.classList.toggle("is-visible",!!p||!!j),(te=f.querySelector("#TB_window #TB_ajaxContent .js-btn-term-save"))==null||te.addEventListener("click",Xe),(oe=f.querySelector("#TB_window #TB_ajaxContent .js-btn-term-reset"))==null||oe.addEventListener("click",Ve),(re=f.querySelector("#TB_window #TB_ajaxContent .js-enable-custom-icon"))==null||re.addEventListener("change",tt),(se=f.querySelector("#TB_window #TB_ajaxContent .js-upload-file"))==null||se.addEventListener("change",ot),Y==null||Y.addEventListener("click",K);let M=f.querySelector("#TB_window #TB_ajaxContent .js-enable-custom-icon");M.checked=!!j,M.dispatchEvent(new Event("change",{bubbles:!0})),ze(),Ze(),Ke(),et()}async function Xe(){let e=a.querySelector("#general .js-term-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-term");e.classList.add("changed");let s=t.querySelector(".js-term-bg").value,o=t.querySelector(".js-term-color").value,r=t.querySelector(".js-term-class").value,n=t.querySelector(".js-term-name").value,i=t.querySelector(".js-term-default").checked,l=t.querySelector(".js-term-visible").checked,c=e.dataset.termNameOrig,d="left";t.querySelectorAll(".js-icon-alignment").forEach(h=>{h.checked&&(d=h.value)});let u=t.querySelector(".js-icon-class").value,m=t.querySelector(".js-icon-url").value,p=t.querySelector(".js-icon-color").value,y=e.querySelector(".checkbox-control").checked,j=t.querySelectorAll('.js-related-terms-list input[type="checkbox"]:checked'),g=Array.from(j).map(h=>parseInt(h.value,10)),v=[];e.querySelectorAll(".field-label").forEach(h=>{h.childNodes.forEach(w=>{w.nodeType===Node.TEXT_NODE&&w.textContent.trim()&&(w.remove(),h.insertAdjacentHTML("afterbegin",n||c))})}),t.querySelectorAll(".js-accordion-terms-header").forEach(h=>{let w=h.nextElementSibling;if(!w)return;let C=w.querySelectorAll('input[type="checkbox"]:checked').length>0;h.classList.toggle("has-checked",C)}),e.dataset.termBackground=s,e.dataset.termColor=o,e.dataset.termClass=r,e.dataset.termName=n,e.dataset.termDefault=i,e.dataset.termVisible=l,e.dataset.termIconAlignment=d,e.dataset.termIconClass=u,e.dataset.termIconUrl=m,e.dataset.termIconColor=p,e.dataset.termChecked=y,e.dataset.termStatus="changed",e.dataset.termRelatedTerms=JSON.stringify(g),a.querySelectorAll("#general .js-term-insert .term-item").forEach(h=>{v.push({term_id:h.dataset.termId,term_taxonomy:h.dataset.termTaxonomy,term_slug:h.dataset.termSlug,term_name_orig:h.dataset.termNameOrig,term_background:h.dataset.termBackground,term_color:h.dataset.termColor,term_class:h.dataset.termClass,term_default:h.dataset.termDefault,term_visible:h.dataset.termVisible,term_name:h.dataset.termName,term_checked:h.dataset.termChecked,term_status:h.dataset.termStatus,icon_class:h.dataset.termIconClass,icon_alignment:h.dataset.termIconAlignment,icon_color:h.dataset.termIconColor,icon_url:h.dataset.termIconUrl,related_terms:h.dataset.termRelatedTerms})}),await ce(v)}async function Ve(){let e=a.querySelector("#general .js-term-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-term"),s=[],{termNameOrig:o}=e.dataset,r=t.querySelector(".js-term-bg"),n=t.querySelector(".js-term-color");jQuery(r).val("").trigger("change"),jQuery(n).val("").trigger("change"),jQuery(t.querySelector(".js-icon-color")).wpColorPicker("color","#ffffff"),t.querySelector(".js-term-class").value="",t.querySelector(".js-term-name").value=o,t.querySelector(".js-term-default").checked=!1,t.querySelector(".js-term-visible").checked=!0,t.querySelector('.js-icon-alignment[value="left"]').checked=!0,t.querySelector(".js-icon-class").value="",t.querySelector(".js-icon-url").value="",t.querySelector(".js-icon-preview").innerHTML="",t.querySelector(".js-btn-icon-remove").classList.remove("is-visible"),t.querySelector(".upload-term-icon .label-file span").innerHTML="Choose a icon",t.querySelectorAll('.js-related-terms-list input[type="checkbox"]').forEach(l=>{l.checked=!1}),t.querySelectorAll(".js-accordion-terms-header").forEach(l=>{l.classList.remove("is-active","has-checked"),l.setAttribute("aria-expanded","false");let c=l.nextElementSibling;c&&(c.style.display="none")}),e.dataset.termRelatedTerms="[]";let i=e.querySelector(".field-label");if(i){let l=Array.from(i.childNodes).find(c=>c.nodeType===Node.TEXT_NODE&&c.textContent.trim()!=="");l&&(l.textContent=`${o} `)}e.classList.remove("changed"),e.dataset.termBackground="",e.dataset.termColor="",e.dataset.termClass="",e.dataset.termName=o,e.dataset.termDefault="false",e.dataset.termVisible="true",e.dataset.termIconAlignment="",e.dataset.termIconClass="",e.dataset.termIconUrl="",e.dataset.termIconColor="",e.dataset.termChecked=e.querySelector(".checkbox-control").checked,e.dataset.termStatus="",a.querySelectorAll("#general .js-term-insert .term-item").forEach(l=>{s.push({term_id:l.dataset.termId,term_slug:l.dataset.termSlug,term_name_orig:l.dataset.termNameOrig,term_background:l.dataset.termBackground,term_color:l.dataset.termColor,term_class:l.dataset.termClass,term_default:l.dataset.termDefault,term_visible:l.dataset.termVisible,term_name:l.dataset.termName,term_checked:l.dataset.termChecked,term_status:l.dataset.termStatus,icon_class:l.dataset.termIconClass,icon_alignment:l.dataset.termIconAlignment,icon_color:l.dataset.termIconColor,icon_url:l.dataset.termIconUrl,related_terms:l.dataset.termRelatedTerms||"[]"})}),await ce(s)}async function ce(e){let t="#TB_window #TB_ajaxContent",s=_,o=new URLSearchParams({action:"action_save_term_attrs",nonce_code:_ymc_fg_object.saveTermAttrAjax_nonce,payload:JSON.stringify({post_id:S,term_attrs:e})});try{x(t);let r=await fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()});if(r.ok){let n=await r.json();A(n.message,"#TB_window #TB_ajaxContent","success",2e3)}else console.error("Error HTTP: "+r.status)}catch(r){console.error("Error occurred:",r)}finally{T(t)}}async function Ge(e,t,s,o,r){let n="#TB_window #TB_ajaxContent .js-related-terms-wrapper",i=o.querySelector(".js-related-terms-wrapper"),l=o.querySelector(".js-tax-dependency-chain"),c=_,d=new URLSearchParams({action:"action_update_related_terms",nonce_code:_ymc_fg_object.updateRelatedTerms_nonce,payload:JSON.stringify({post_id:S,sequence:e,current_term:t,current_tax:r,term_id:s})});try{x(n);let u=await fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:d.toString()});if(u.ok){let m=await u.json();i.innerHTML=m.data.html,l.innerHTML=m.data.tax_chain,rt(o)}else console.error("Error HTTP: "+u.status)}catch(u){console.error("Error occurred:",u)}finally{T(n)}}function ze(){let e=f.querySelectorAll("#TB_window #TB_ajaxContent .tab-button"),t=f.querySelectorAll("#TB_window #TB_ajaxContent .tab-content");e.forEach(s=>{s.addEventListener("click",()=>{e.forEach(o=>o.classList.remove("is-active")),t.forEach(o=>o.classList.remove("is-active")),s.classList.add("is-active"),f.querySelector("#TB_window #TB_ajaxContent #"+s.dataset.tab).classList.add("is-active")})})}function Ze(){var o,r;let e=f.querySelector("#TB_window #TB_ajaxContent"),t=e.querySelectorAll(".tab-button"),s=e.querySelectorAll(".tab-content");t.forEach(n=>n.classList.remove("is-active")),s.forEach(n=>n.classList.remove("is-active")),(o=e.querySelector('.tabs [data-tab="tabTerm"]'))==null||o.classList.add("is-active"),(r=e.querySelector(".tabs #tabTerm"))==null||r.classList.add("is-active")}function Ke(){let e=f.querySelector("#TB_window #TB_ajaxContent .form-term .js-field-search-icon"),t=f.querySelectorAll("#TB_window #TB_ajaxContent .form-term .js-icon-item i");e.addEventListener("input",()=>{let s=e.value.toLowerCase();t.forEach(o=>{let r=o.getAttribute("class").replace(/[\s.-]/g," ").toLowerCase();o.style.display=r.includes(s)?"inline-block":"none"})})}function et(){let e=f.querySelectorAll("#TB_window #TB_ajaxContent .form-term .js-icon-item i"),t=f.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove");e.forEach(s=>{s.addEventListener("click",()=>{f.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove").classList.add("is-visible"),f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-class").value=s.getAttribute("class"),f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-preview").innerHTML=s.outerHTML,f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-url").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-upload-file").value="",t.addEventListener("click",K)})})}function K(){f.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove").classList.remove("is-visible"),f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-class").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-url").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-preview").innerHTML="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-upload-file").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .upload-term-icon .label-file span").innerHTML="Choose a icon"}function tt(e){let t=f.querySelector("#TB_window #TB_ajaxContent"),s=t.querySelector(".js-upload-icon-wrap"),o=t.querySelector(".js-term-icon-selector"),r=this.checked;s.classList.toggle("is-hidden",!r),o.classList.toggle("is-hidden",r)}async function ot(e){let t=_,s=e.target.files[0],o="#TB_window #TB_ajaxContent",r=f.querySelector("#TB_window #TB_ajaxContent .form-term"),n=r.querySelector(".js-icon-preview"),i=r.querySelector(".js-btn-icon-remove"),l=r.querySelector(".js-icon-class"),c=r.querySelector(".js-icon-url"),d=e.target.value.split("\\").pop(),u=r.querySelector(".js-domain");if(!s)return;let m=new FormData;m.append("icon",s),m.append("action","action_upload_term_icon"),m.append("post_id",S),m.append("nonce_code",_ymc_fg_object.uploadTermIconAjax_nonce);try{x(o);let p=await fetch(t,{method:"POST",credentials:"same-origin",body:m});if(p.ok){let y=await p.json();y.success&&y.data.url?(n.innerHTML=`<img src="${u.getAttribute("value")}${y.data.url}" width="20">`,l.value="",c.value=y.data.url,i.classList.add("is-visible"),i.addEventListener("click",K),this.nextElementSibling.querySelector("span").innerHTML=d,A(y.data.message,"#TB_window #TB_ajaxContent","success",2e3)):A(y.data.message,"#TB_window #TB_ajaxContent","error",2e3)}else console.error("Error HTTP: "+p.status)}catch(p){console.error("Error occurred:",p)}finally{T(o)}}function rt(e){let t=e.querySelector(".js-accordion-terms");if(t){let s=function(o){let r=o.nextElementSibling;if(!r)return;let n=r.querySelectorAll('input[type="checkbox"]:checked').length>0;o.classList.toggle("has-checked",n)};t.querySelectorAll(".js-accordion-terms-header").forEach(o=>{o.classList.remove("is-active","has-checked"),o.setAttribute("aria-expanded","false");let r=o.nextElementSibling;r&&(r.style.display="none",s(o),r.querySelectorAll('input[type="checkbox"]').forEach(n=>{n.addEventListener("change",()=>s(o))})),o.replaceWith(o.cloneNode(!0))}),t.querySelectorAll(".js-accordion-terms-header").forEach(o=>{o.addEventListener("click",function(){this.classList.toggle("is-active");let r=this.nextElementSibling,n=this.getAttribute("aria-expanded")==="true";this.setAttribute("aria-expanded",n?"false":"true"),r.style.display=n?"none":"block"})})}}function le(){var e;(e=L.querySelector(".js-post-types"))==null||e.addEventListener("change",st)}function ie(){var e;(e=L.querySelector(".js-tax-insert"))==null||e.addEventListener("click",at)}function de(){var e;(e=L.querySelector(".js-tax-clear"))==null||e.addEventListener("click",nt)}function ue(){var e;(e=L.querySelector(".js-tax-updated"))==null||e.addEventListener("click",ct)}function me(){var e;(e=L.querySelector(".js-terms-updated"))==null||e.addEventListener("click",lt)}async function st(){if(confirm("Are you sure change Post Type? IMPORTANT! Post Type Changes remove all taxonomies, terms and selected posts.")){let t=a.querySelectorAll("#general #ymc-post-types option:checked"),s=Array.from(t).map(r=>r.value),o={action:"action_get_taxonomies",nonce_code:_ymc_fg_object.getTaxAjax_nonce,payload:JSON.stringify({post_types:s,post_id:S})};try{x(),_ymc_fg_object.loadedFeedPosts_page=2;let r=await fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(r.ok){let n=await r.json(),i=n.taxonomies,l=n.posts,c={},d={},u=n.found_posts,m=a.querySelector("#general .posts-wrapper .js-scroll-posts"),p=a.querySelector("#general .posts-wrapper .feed-posts .number-posts");p.innerHTML=u,l.length>0?d={isPosts:!0,posts:l}:d={noPosts:!0,no_posts_found:"No posts found"},new q(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(g,v){var w;L.querySelector(".feed-posts .js-scroll-posts").innerHTML="",L.querySelector(".selected-posts .js-post-sortable").innerHTML="",(w=L.querySelector(".js-tax-sequence-wrapper"))==null||w.remove(),E.querySelector(".js-filter-group").innerHTML="";let h=E.querySelector(".js-toggle-filter-builder");h.value="default",h.dispatchEvent(new Event("change")),v.insertAdjacentHTML("beforeend",g(d)),m.querySelectorAll(".js-add-post").forEach(C=>{C.removeEventListener("click",H)}),O()}),Object.keys(i).length>0?c={taxonomies:i,isTax:!0}:c={isTax:!1},new q(".ymc-main .js-tax-insert","tmpl-taxonomy",c).create(function(){T(),i.length===0?a.querySelector(".js-control-bar").classList.add("is-hidden"):a.querySelector(".js-control-bar").classList.remove("is-hidden"),a.querySelector(".terms-wrapper .js-term-insert").innerHTML="",a.querySelector(".terms-wrapper").classList.add("is-hidden"),X()})}else console.error("Error HTTP: "+r.status)}catch(r){console.error("Error occurred:",r)}}else{let t=this.dataset.previousValue.split(",");a.querySelectorAll("#general #ymc-post-types option").forEach(s=>{s.selected=t.includes(s.value)})}}async function at(e){if(e.target.nodeName==="INPUT"){let t=e.target.value,s=e.target.dataset.label;if(e.target.checked){let o={action:"action_get_terms",nonce_code:_ymc_fg_object.getTermAjax_nonce,payload:JSON.stringify({slug:t,label:s,post_id:S})};try{x();let r=await fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(r.ok){let i=(await r.json()).data_obj,c={isTerms:i.terms.length>0?!0:[],tax_slug:i.tax_slug,tax_label:i.tax_label,terms:i.terms,no_terms:"No terms found"};new q(".ymc-main .js-term-insert","tmpl-term").createAndWait(function(u,m){T(),m.insertAdjacentHTML("beforeend",u(c)),a.querySelector(".terms-wrapper").classList.remove("is-hidden"),W(),V()})}}catch(r){console.error("Error occurred:",r)}}else confirm("Are you sure you want to disable this taxonomy?")?(a.querySelector(`.js-term-insert .js-tax-${t}`).remove(),a.querySelectorAll(".js-term-insert .cel").length===0&&a.querySelector(".terms-wrapper").classList.add("is-hidden")):e.target.checked=!0}}async function nt(e){if(e.preventDefault(),confirm("Are you sure you want to remove all terms of taxonomies?")){let s={action:"action_remove_terms",nonce_code:_ymc_fg_object.removeTermsAjax_nonce,payload:JSON.stringify({post_id:S})};try{x();let o=await fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(s).toString()});if(o.ok){let r=await o.json();T(),a.querySelectorAll(".terms-wrapper .terms-grid .cel").forEach(n=>{n.remove()}),a.querySelector(".terms-wrapper").classList.add("is-hidden"),a.querySelectorAll("#general .js-tax-insert .js-tax-checkbox").forEach(n=>{n.checked=!1})}}catch(o){console.error("Error occurred:",o)}}}async function ct(e){e.preventDefault();let t=a.querySelectorAll("#general #ymc-post-types option:checked"),s=Array.from(t).map(r=>r.value),o={action:"action_updated_taxonomies",nonce_code:_ymc_fg_object.updatedTaxAjax_nonce,payload:JSON.stringify({post_types:s})};try{x();let r=await fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(r.ok){let i=(await r.json()).taxonomies,l=[],c={},d=Object.keys(i).length,u=new q(".ymc-main .js-tax-insert","tmpl-taxonomy");if(a.querySelectorAll(".js-tax-insert .taxonomies-list__item").forEach(m=>{let p=m.dataset.taxName;l.push(p)}),d>0){if(d>l.length)for(let m in i)l.includes(m)||(c={taxonomies:{[m]:i[m]},isTax:!0},u.createAndWait(function(p,y){y.insertAdjacentHTML("beforeend",p(c))}));d<l.length&&l.forEach(m=>{var p,y;Object.keys(i).includes(m)||((p=a.querySelector('.js-tax-insert [data-tax-name="'+m+'"]'))==null||p.remove(),(y=a.querySelector(".js-term-insert .js-tax-"+m))==null||y.remove())}),this.classList.add("is-success"),this.lastChild.textContent="Update completed",setTimeout(()=>{this.classList.remove("is-success"),this.lastChild.textContent="Update taxonomies"},2e3)}T()}}catch(r){console.error("Error occurred:",r)}}async function lt(e){e.preventDefault();let t=_,s=[];L.querySelectorAll(".js-term-insert .term-item").forEach(r=>{s.push({term_id:r.dataset.termId,term_taxonomy:r.dataset.termTaxonomy,term_slug:r.dataset.termSlug,term_name_orig:r.dataset.termNameOrig,term_background:r.dataset.termBackground,term_color:r.dataset.termColor,term_class:r.dataset.termClass,term_default:r.dataset.termDefault,term_visible:r.dataset.termVisible,term_name:r.dataset.termNameOrig,term_checked:r.dataset.termChecked,term_status:r.dataset.termStatus,icon_class:r.dataset.termIconClass,icon_alignment:r.dataset.termIconAlignment,icon_color:r.dataset.termIconColor,icon_url:r.dataset.termIconUrl,related_terms:r.dataset.termRelatedTerms})});let o=new URLSearchParams({action:"action_save_term_attrs",nonce_code:_ymc_fg_object.saveTermAttrAjax_nonce,payload:JSON.stringify({post_id:S,term_attrs:s})});try{x();let r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()});r.ok?(await r.json()).response==="updated"?location.reload():(this.classList.add("is-success"),this.lastChild.textContent="Up to Date",setTimeout(()=>{this.classList.remove("is-success"),this.lastChild.textContent="Update Terms"},2e3)):console.error("Error HTTP: "+r.status)}catch(r){console.error("Error occurred:",r)}finally{T()}}function pe(){let e=a.querySelector(".js-tax-sortable");jQuery(e).sortable({cursor:"move",handle:".js-tax-handle",opacity:1,delay:150,scroll:!1,start:function(t,s){s.item[0].classList.add("is-item-dragging"),e.classList.add("dragging")},stop:function(t,s){s.item[0].classList.remove("is-item-dragging"),e.classList.remove("dragging");let o=[];e.querySelectorAll(".taxonomies-list__item").forEach(r=>{o.push(r.dataset.taxName)}),it(o)}})}async function it(e){let t=_,s=new URLSearchParams({action:"action_taxonomies_sort",nonce_code:_ymc_fg_object.sortTaxAjax_nonce,payload:JSON.stringify({tax_sort:e,post_id:S})});fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()}).then(function(o){if(o.ok===!0)return o.json();console.error("Error occurred:",o.status)}).catch(o=>console.error(o))}function fe(){a.querySelectorAll("#general .js-term-insert").forEach(e=>{e.addEventListener("click",function(t){if(t.target.closest(".tax-name")){let s=t.target.closest(".cel").querySelectorAll(".term-item .checkbox-control");t.target.checked?s.forEach(o=>{o.checked=!0}):s.forEach(o=>{o.checked=!1})}})})}function ye(){a.querySelector("#general .posts-wrapper .js-scroll-posts").addEventListener("scroll",ee)}function he(){a.querySelector("#general .posts-wrapper .js-field-search").addEventListener("input",ut),a.querySelector("#general .posts-wrapper .js-btn-search").addEventListener("click",dt),a.querySelector("#general .posts-wrapper .js-btn-clear").addEventListener("click",ge)}function ee(){let e=a.querySelector("#general .posts-wrapper .js-scroll-posts"),t={root:e,rootMargin:"0px",threshold:.9};new IntersectionObserver((o,r)=>{o.forEach(n=>{if(n.isIntersecting&&!n.target.classList.contains("is-loaded")){n.target.classList.add("is-loaded");let i=Array.from(a.querySelectorAll("#general #ymc-post-types option:checked")).map(c=>c.value),l={action:"action_selected_posts",nonce_code:_ymc_fg_object.selectPostsAjax_nonce,payload:JSON.stringify({post_types:i,paged:_ymc_fg_object.loadedFeedPosts_page,post_id:S,posts_per_page:20})};x("#general .posts-wrapper .js-scroll-posts"),fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(l).toString()}).then(function(c){if(c.ok===!0)return c.json();console.error("Error occurred:",c.status)}).then(c=>{let d={};c.posts.length>0&&(d={isPosts:!0,posts:c.posts}),new q(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(m,p){T(),p.insertAdjacentHTML("beforeend",m(d)),_ymc_fg_object.loadedFeedPosts_page++,e.querySelectorAll(".js-add-post").forEach(y=>{y.removeEventListener("click",H)}),O()})}).catch(c=>console.error(c))}})},t).observe(e.querySelector("li:last-child"))}async function dt(){let e=a.querySelector("#general .posts-wrapper .js-scroll-posts"),t=a.querySelector("#general .posts-wrapper .feed-posts .number-posts"),s=a.querySelector("#general .posts-wrapper .js-field-search").value.toLowerCase();if(s.length>0){let o=a.querySelectorAll("#general #ymc-post-types option:checked"),r=Array.from(o).map(i=>i.value),n={action:"action_search_feed_posts",nonce_code:_ymc_fg_object.searchFeedPostsAjax_nonce,payload:JSON.stringify({post_types:r,post_id:S,phrase:s})};try{x("#general .posts-wrapper .js-scroll-posts"),this.classList.add("button--disabled");let i=await fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});if(i.ok){let l=await i.json(),c={},d=l.found_posts;l.posts.length>0?c={isPosts:!0,posts:l.posts}:c={noPosts:!0,no_posts_found:"No posts found"},t.innerHTML=d,this.classList.remove("button--disabled"),e.removeEventListener("scroll",ee),e.scrollTo({top:0,left:0,behavior:"smooth"}),new q(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(m,p){T(),p.innerHTML=m(c),e.querySelectorAll(".js-add-post").forEach(y=>{y.removeEventListener("click",H)}),O()})}}catch(i){console.error("Error occurred:",i)}}}function ut(){this.value.length>0?this.nextElementSibling.classList.remove("is-hidden"):(this.nextElementSibling.classList.add("is-hidden"),ge().then(e=>{}))}async function ge(){let e=a.querySelector("#general .posts-wrapper .js-scroll-posts"),t=a.querySelector("#general .posts-wrapper .feed-posts .number-posts"),s=a.querySelector("#general .posts-wrapper .js-field-search"),o=a.querySelector("#general .posts-wrapper .js-btn-clear"),r=a.querySelectorAll("#general #ymc-post-types option:checked"),n=Array.from(r).map(d=>d.value),i=_,l="#general .posts-wrapper .js-scroll-posts",c=new URLSearchParams({action:"action_selected_posts",nonce_code:_ymc_fg_object.selectPostsAjax_nonce,payload:JSON.stringify({post_types:n,paged:1,post_id:S,posts_per_page:20})});o.classList.add("is-hidden"),s.value="",s.focus();try{x(l);let d=await fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c.toString()});if(d.ok){let u=await d.json(),m={},p=u.found_posts;u.posts.length>0?m={isPosts:!0,posts:u.posts}:m={noPosts:!0,no_posts_found:"No posts found"},t.innerHTML=p,e.scrollTo({top:0,left:0,behavior:"smooth"}),new q(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(j,g){g.innerHTML=j(m),_ymc_fg_object.loadedFeedPosts_page=2,e.querySelectorAll(".js-add-post").forEach(v=>{v.removeEventListener("click",H)}),O(),e.addEventListener("scroll",ee)})}}catch(d){console.error("Error occurred:",d)}finally{T(l)}}function _e(){a.querySelector("#general .button-expand-wrapper .js-button-expand").addEventListener("click",function(){this.classList.toggle("is-expanded"),a.querySelectorAll("#general .select-posts-display__inner .cel .list-posts").forEach(e=>{e.classList.contains("is-expanded")?e.classList.remove("is-expanded"):e.classList.add("is-expanded")})})}function Se(){a.querySelector("#general .excluded-posts-checkbox .js-excluded-checkbox").addEventListener("click",function(e){let t=a.querySelector("#general .selected-posts .js-post-sortable");this.checked?t.classList.add("is-excluded"):t.classList.remove("is-excluded")})}function Te(){xe(),je();let e=a.querySelectorAll("#layouts .filter-builder .js-filter-group .filter-item").length;a.querySelector("#layouts .filter-builder .js-add-filter").addEventListener("click",mt(e)),a.querySelector("#layouts .js-toggle-filter-builder").addEventListener("change",xe)}function je(){a.querySelectorAll("#layouts .filter-builder .js-remove-filter").forEach(e=>{e.addEventListener("click",pt)})}function mt(e){return async function(){let t=a.querySelector(".filter-builder .js-filter-group"),s={action:"action_get_selected_taxonomies",nonce_code:_ymc_fg_object.getSelectTaxAjax_nonce,payload:JSON.stringify({post_id:S})};try{x();let o=await fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(s).toString()});if(o.ok){let r=await o.json(),n=r.taxSelected.length>0,i=r.taxSelected.length>0?"":"is-disabled",l={filterIndex:e,isTaxSelected:n,isDisabledTax:i,taxSelected:r.taxSelected,filtersTypes:r.filtersTypes,placements:r.placements};new q(t,"tmpl-filter-builder").createAndWait(function(d,u){u.insertAdjacentHTML("beforeend",d(l)),je()}),e++}}catch(o){console.error("Error occurred:",o)}finally{T()}}}function pt(){let e=this.closest(".filter-item");e&&e.remove()}function xe(){let e=a.querySelector(".js-toggle-filter-builder"),t=a.querySelector(".filter-builder"),s=b.querySelector(".js-filter-button-all");e.value==="composite"?t.style.display="block":t.style.display="none",e.value==="default"||e.value==="composite"?s.style.display="block":s.style.display="none"}function ve(e){b.querySelector(".js-term-sort-direction").addEventListener("change",ft),b.querySelector(".js-pagination_type").addEventListener("change",yt),b.querySelector(".js-post-order-by").addEventListener("change",ht),b.querySelector(".js-add-order-multiple-field").addEventListener("click",gt(0,e)),b.querySelectorAll(".js-remove-order-field").forEach(t=>{t.addEventListener("click",be)})}function ft(){let e=this.value,t=b.querySelector(".js-term-sort-field"),s=e==="manual";t.style.display=s?"none":"block"}function yt(){let e=this.value,t=b.querySelector(".js-navigation-buttons"),s=b.querySelector(".js-load-more-button"),o=e==="numeric",r=e==="loadmore";t.style.display=o?"block":"none",s.style.display=r?"block":"none"}function ht(){let e=this.value,t=b.querySelector(".js-order-fields-meta-key"),s=b.querySelector(".js-order-fields-multiple-fields"),o=e==="meta_key";t.style.display=o?"block":"none";let r=e==="multiple_fields";s.style.display=r?"block":"none"}function gt(e,t){return function(){let s=b.querySelector(".post-order-fields-inner"),o=s.querySelectorAll(".field-group").length;o>0&&(e=o);let n=b.querySelector(".field-multiple-template").innerHTML.replace(/index/g,e);s.insertAdjacentHTML("beforeend",n),e++,$(t),b.querySelectorAll(".js-remove-order-field").forEach(i=>{i.addEventListener("click",be)})}}function be(){this.closest(".field-group").remove()}function qe(){let e=E.querySelector(".js-selected-post-layout"),t=E.querySelector(".js-grid-settings"),s=E.querySelector(".js-grid-style"),o=E.querySelector(".js-carousel-settings"),r=E.querySelector(".js-default-carousel-settings"),n=E.querySelector(".js-checkbox-custom-carousel-settings");e&&e.addEventListener("change",function(){this.value==="layout_carousel"?(t.style.display="none",s.style.display="none",o.style.display="block"):(t.style.display="block",s.style.display="block",o.style.display="none")}),r&&n.addEventListener("change",function(){this.checked?r.style.display="none":r.style.display="block"}),St(),_t()}function _t(){let e=E.querySelector(".js-tooltip-trigger"),t=E.querySelector(".js-field-example"),s;function o(){clearTimeout(s),t.classList.add("visible")}function r(){s=setTimeout(()=>{t.classList.remove("visible")},200)}e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",r),t.addEventListener("mouseenter",o),t.addEventListener("mouseleave",r)}function St(){E.querySelectorAll(".field-description pre code").forEach(e=>{let t=e.innerHTML.split(`
`);for(;t.length&&t[0].trim()==="";)t.shift();for(;t.length&&t[t.length-1].trim()==="";)t.pop();let s=Math.min(...t.filter(o=>o.trim()).map(o=>o.match(/^(\s*)/)[0].length));e.innerHTML=t.map(o=>o.slice(s)).join(`
`)})}function we(){I.querySelector(".js-filter-font-family").addEventListener("change",xt),I.querySelector(".js-post-title-font-family").addEventListener("change",Tt),I.querySelector(".js-post-link-font-family").addEventListener("change",jt)}function xt(){let e=this.value,t=I.querySelector(".js-filter-custom-font-fields"),s=e==="custom";t.style.display=s?"block":"none"}function Tt(){let e=this.value,t=I.querySelector(".js-post-title-custom-font-fields"),s=e==="custom";t.style.display=s?"block":"none"}function jt(){let e=this.value,t=I.querySelector(".js-post-link-custom-font-fields"),s=e==="custom";t.style.display=s?"block":"none"}function Ce(){G.querySelector(".js-autocomplete-enabled").addEventListener("change",vt)}function vt(){let e=G.querySelector(".js-autocomplete-settings");e&&(this.checked?e.classList.remove("is-hidden"):e.classList.add("is-hidden"))}function Le(){P.querySelector(".js-advanced-query-type").addEventListener("change",bt)}function bt(){let e=this.value,t=P.querySelector(".js-callback-function"),s=P.querySelector(".js-advanced-query"),o=e==="callback",r=e==="advanced";t&&(t.style.display=o?"block":"none"),s&&(s.style.display=r?"block":"none")}function Ae(e){e(".js-picker-color").wpColorPicker(),e(".js-picker-color-alpha").wpColorPicker({palettes:!0,alpha:!0,clear:!0})}function Ee(){D("#appearance .js-toggle-switch-filter-state","#appearance .js-is-disabled-filter-options","hide"),D("#appearance .js-toggle-switch-pagination","#appearance .js-is-disabled-pagination","hide"),D("#appearance .js-toggle-switch-popup","#appearance .js-is-enable-popup","show"),D("#search .js-toggle-switch-search-posts","#search .js-is-disabled-search-options","show"),D("#advanced .js-toggle-switch-advanced-query",".js-is-enable-advanced-query","show"),D("#advanced .js-toggle-switch-sort-posts",".js-is-enable-sort-posts","show")}function D(e,t,s="show"){document.querySelectorAll(`${e} .js-toggle-switch input[type="checkbox"]`).forEach(o=>{let n=o.closest(e).querySelector(t);if(!n)return;let i=()=>{let l=o.checked&&s==="show"||!o.checked&&s==="hide";n.style.display=l?"block":"none"};o.addEventListener("change",i),i()})}function ke(){let e=P.querySelector(".js-preloader-icon"),t=P.querySelector(".js-preloader-filters"),s=P.querySelector(".js-preloader-custom-filters"),o=P.querySelector(".js-preview-preloader"),r=N+"assets/images/preloaders/",n=c=>{var m;let d=o.querySelector("img");if(!d)return;let u={none:"none",brightness:"brightness(1.4)",contrast:"contrast(1.5)",grayscale:"grayscale(100%)",invert:"invert(100%)",opacity:"opacity(40%)",saturate:"saturate(2)",sepia:"sepia(100%)"};if(c==="custom_filter"){let p=s==null?void 0:s.querySelector("input"),y=((m=p==null?void 0:p.value)==null?void 0:m.trim())||"none";y.startsWith("filter:")&&(y=y.replace(/^filter:\s*/i,"")),d.style.cssText=`filter: ${y};`}else d.style.filter=u[c]||"none"},i=c=>{if(!s)return;let d=s.querySelector("input");c==="custom_filter"?(s.style.display="block",d&&!d.dataset.listenerAttached&&(d.addEventListener("input",()=>{n("custom_filter")}),d.dataset.listenerAttached="true")):s.style.display="none"},l=c=>{if(c==="none")o.innerHTML="";else{let d=document.createElement("img");d.src=r+c+".svg",d.alt=c+" preloader",d.width=70,d.height=70,o.innerHTML="",o.appendChild(d);let u=(t==null?void 0:t.value)||"none";u==="custom_filter"?setTimeout(()=>{n("custom_filter")},0):n(u)}};e==null||e.addEventListener("change",function(){l(this.value)}),t==null||t.addEventListener("change",function(){let c=this.value;i(c),n(c)}),e!=null&&e.value&&e.value!=="none"&&l(e.value),t!=null&&t.value&&i(t.value)}function Me(e){let t=L.querySelector(".js-tax-sequence-wrapper");if(t){let n=function(){let c=t.querySelectorAll(".js-sequence-taxonomies .taxonomy-by-related-terms"),d=t.querySelectorAll(".js-available-taxonomies .taxonomy-by-related-terms"),u=[],m=t.querySelector(".js-sequence-input");d.forEach(p=>{var y,j,g;(y=p.querySelector(".taxonomy-order"))==null||y.remove(),(j=p.querySelector(".radio-buttons-wrap"))==null||j.remove(),(g=p.querySelector(".js-icon-config"))==null||g.remove()}),c.forEach((p,y)=>{let j=p.querySelector(".taxonomy-order");j||(j=document.createElement("span"),j.className="taxonomy-order",p.append(j)),j.textContent=y+1,u.push(p.getAttribute("data-tax"));let g=p.querySelector(".js-icon-config");g||(g=document.createElement("span"),g.className="icon-config js-icon-config",p.append(g));let v=p.querySelector(".radio-buttons-wrap");if(!v){let h=p.getAttribute("data-tax");v=document.createElement("div"),v.className="radio-buttons-wrap";let w=document.createElement("label"),C=document.createElement("input");C.type="radio",C.name=`tax_mode_${h}`,C.value="single",C.className="input-radio js-tax-radio",w.append(C,"Single");let Y=document.createElement("label"),M=document.createElement("input");M.type="radio",M.name=`tax_mode_${h}`,M.value="multiple",M.className="input-radio js-tax-radio",Y.append(M,"Multiple"),v.append(w,Y),p.append(v);let B=v.querySelector(".header-config");B||(B=document.createElement("div"),B.className="header-config",B.textContent="Mode Taxonomy",v.prepend(B)),C.checked=!0}}),m&&(m.value=u.join(",")),l(),i()},i=function(){let c=t.querySelectorAll(".js-sequence-taxonomies .taxonomy-by-related-terms"),d=t.querySelector(".js-sequence-tax-settings"),u=[];c.forEach(m=>{let p=m.getAttribute("data-tax"),y=m.querySelector(`input[name="tax_mode_${p}"]:checked`),j=y?y.value:"single";u.push({taxonomy:p,mode:j})}),d&&(d.value=JSON.stringify(u))},l=function(){o.children("li").length?o.closest(".sequence-selected").addClass("hide-placeholder"):o.closest(".sequence-selected").removeClass("hide-placeholder")},s=e(".js-available-taxonomies"),o=e(".js-sequence-taxonomies"),r=".js-available-taxonomies, .js-sequence-taxonomies";[s,o].forEach(c=>{if(c.data("ui-sortable"))try{c.sortable("destroy")}catch(d){}}),s.add(o).sortable({connectWith:r,items:"> li",handle:".js-tax-handle",appendTo:"body",zIndex:9999,tolerance:"pointer",placeholder:"ui-sortable-placeholder",helper:function(c,d){let u=d.clone();return u.addClass("taxonomy-by-related-terms"),u.css({width:d.outerWidth(),height:d.outerHeight(),boxSizing:"border-box"}),u},start:function(c,d){d.placeholder.height(d.helper.outerHeight())},stop:function(c,d){setTimeout(n,0)},receive:function(c,d){e(this).hasClass("js-sequence-taxonomies")&&(n(),Pe(t))},update:function(c,d){e(this).hasClass("js-sequence-taxonomies")&&d.sender===null&&(n(),Pe(t))}}).disableSelection(),t.addEventListener("change",function(c){c.target.matches(".js-tax-radio")&&i()}),t.addEventListener("click",function(c){if(c.target.matches(".js-icon-config")){let u=c.target.closest(".taxonomy-by-related-terms").querySelector(".radio-buttons-wrap");c.target.classList.toggle("is-close"),u&&u.classList.toggle("is-visible")}}),l(),qt()}}function qt(){let e=L.querySelectorAll('.js-root-source input[type="radio"]'),t=L.querySelector(".js-root-terms");e.forEach(s=>{s.addEventListener("change",()=>{s.value==="manual"?t.classList.add("is-visible"):(t.classList.remove("is-visible"),t.querySelectorAll(".js-root-term").forEach(r=>r.checked=!1))})})}async function Pe(e){var d;let t=_,s=".js-root-terms-list",o=e.querySelector(".js-root-terms-list"),r=e.querySelector(".js-sequence-input").value,n=((d=e.querySelector(".js-root-source:checked"))==null?void 0:d.value)||"top_level",i=[];e.querySelectorAll(".js-root-term:checked").forEach(u=>{i.push(parseInt(u.value))});let l={post_id:S,sequence:r,root_source:n,root_terms:i},c=new URLSearchParams({action:"action_update_root_source_terms",nonce_code:_ymc_fg_object.updateRootSourceTerms_nonce,payload:JSON.stringify(l)});try{x(s);let u=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c.toString()});if(u.ok){let m=await u.json();o.innerHTML=m.data.root_terms}else console.error("Error HTTP: "+u.status)}catch(u){console.error("Error occurred:",u)}finally{T(s)}}function Be(){var e;(e=z.querySelector(".export-wrapper .js-button-export-settings"))==null||e.addEventListener("click",async t=>{let s=new Date().getFullYear(),o=new Date().getDate(),r=new Date().getMonth(),n=new Date().getHours(),i=new Date().getMinutes(),l=new Date().getSeconds(),c=new FormData;c.append("action","action_export_settings"),c.append("nonce_code",_ymc_fg_object.exportSettingsAjax_nonce),c.append("post_id",S);try{x(".ymc-main #tools");let d=await fetch(_,{method:"POST",body:c});if(!d.ok){A(`HTTP error! Status: ${d.status}`,"#tools .export-wrapper .notify-wrapper","error",2e3);return}let u=await d.blob(),m=document.createElement("a"),p=`ymc-fg-export-${o}-${r+1}-${s}-${n}:${i}:${l}.json`,y=window.URL.createObjectURL(u);m.href=y,m.download=p,document.body.appendChild(m),m.click(),m.remove(),URL.revokeObjectURL(y),A("Settings exported","#tools .export-wrapper .notify-wrapper","success",2e3)}catch(d){console.error("Error occurred:",d),A("Error occurred","#tools .export-wrapper .notify-wrapper","error",2e3)}finally{T()}})}function Oe(e){var t;(t=z.querySelector(".import-wrapper .js-file-import-settings"))==null||t.addEventListener("change",wt)}function wt(){let e=this,t=e.files[0];if(t)if(t.type==="application/json"&&t.name.indexOf("ymc-fg-export-")===0){let s=new FileReader;s.readAsText(t),s.onload=async function(){let o=new FormData;o.append("file",t),o.append("action","action_import_settings"),o.append("post_id",S),o.append("params",s.result),o.append("nonce_code",_ymc_fg_object.importSettingsAjax_nonce);try{x(".ymc-main #tools");let r=await fetch(_,{method:"POST",credentials:"same-origin",body:o});if(!r.ok){A(`HTTP error! Status: ${r.status}`,"#tools .import-wrapper .notify-wrapper","error",2e3);return}let n=await r.json();A(n.data.message,"#tools .import-wrapper .notify-wrapper","success",2e3),e.value="",location.reload()}catch(r){console.error("Error occurred:",r),A("Error occurred","#tools .import-wrapper .notify-wrapper","error",2e3)}finally{T()}}}else A("Invalid file format","#tools .import-wrapper .notify-wrapper","error",2e3)}function Ne(){let e=k.querySelector(".js-pagination-load-usage-pages");if(!e||!k.querySelector(".js-tbody-usage-table"))return;let s=e.querySelector(".ymc-prev"),o=e.querySelector(".ymc-next");e.addEventListener("click",r=>{let n=r.target.closest("button");if(!n)return;let i=parseInt(e.dataset.current,10),l=parseInt(e.dataset.max,10);n.classList.contains("ymc-next")&&i<l&&i++,n.classList.contains("ymc-prev")&&i>1&&i--,i!==parseInt(e.dataset.current,10)&&Re(i)})}function Ie(){let e=k.querySelector(".js-button-scan-content"),t=k.querySelector(".js-scan-status");!e||!t||e.addEventListener("click",()=>{e.disabled=!0,t.innerHTML='<div class="headline-status"><strong>Scanning content\u2026</strong></div>',He(1,{totalProcessed:0,totalUpdated:0,totalPosts:0,updatedByType:{}})})}function He(e=1,t){fetch(_,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"action_scan_existing_posts",nonce_code:_ymc_fg_object.scanExistingPostsAjax_nonce,page:e})}).then(s=>s.json()).then(s=>{if(!s.success){console.error(s),updateScanStatus("Error during scan"),Ye(!1);return}let o=s.data;if(!t.totalPosts&&o.total&&(t.totalPosts=o.total),t.totalProcessed+=o.processed,t.totalUpdated+=o.updated,o.updated_by_type)for(let[r,n]of Object.entries(o.updated_by_type))t.updatedByType[r]||(t.updatedByType[r]=0),t.updatedByType[r]+=n;Ct(t,o.page),o.has_more?He(o.next_page,t):Ye(!0,t)})}function Ct(e,t){let s=k.querySelector(".js-scan-status");if(!s)return;let o=e.totalPosts?Math.min(100,Math.round(e.totalProcessed/e.totalPosts*100)):0;s.innerHTML=`
		<div class="headline-status"><strong>Scanning\u2026</strong></div>
		<div class="processed-staus">Processed: ${e.totalProcessed}</div>
		<div class="processed-staus">Updated: ${e.totalUpdated}</div>
		<p>Progress: ${o}%</p>
		<progress value="${o}" max="100"></progress>
		<div class="processed-staus">Batch: ${t}</div>`}function Ye(e,t={}){let s=k.querySelector(".js-button-scan-content"),o=k.querySelector(".js-scan-status");if(s&&(s.disabled=!1),!o)return;if(!e){o.innerHTML='<div class="error-status">Scan failed.</div>';return}let r="";if(t.updatedByType&&Object.keys(t.updatedByType).length){r='<ul class="scan-breakdown">';for(let[n,i]of Object.entries(t.updatedByType))r+=`<li>Added ${n}: ${i}</li>`;r+="</ul>"}o.innerHTML=`
		<div class="headline-status"><strong>Scan completed</strong></div>
		<div class="success-staus">Total processed: ${t.totalProcessed}</div>
		<div class="success-staus">Total updated: ${t.totalUpdated}</div>
		${r}`,t.totalUpdated>0?Lt():o.insertAdjacentHTML("beforeend",'<div class="info-status">No changes detected.</div>')}function Lt(){if(!k.querySelector(".js-pagination-load-usage-pages")){setTimeout(()=>{location.reload()},300);return}Re(1)}async function Re(e){let t=k.querySelector(".js-pagination-load-usage-pages"),s=k.querySelector(".js-tbody-usage-table");if(!t||!s)return;let o=parseInt(t.dataset.max,10),r=t.querySelector(".ymc-prev"),n=t.querySelector(".ymc-next"),i=new FormData;i.append("action","action_load_usage_page"),i.append("nonce_code",_ymc_fg_object.usegeFiltersPaginAjax_nonce),i.append("filter_id",s.dataset.filterId),i.append("page",e),r.disabled=!0,n.disabled=!0,x("#usage .js-tbody-usage-table");try{let c=await(await fetch(_,{method:"POST",credentials:"same-origin",body:i})).json();if(c.success){s.innerHTML=c.data.html,t.dataset.current=e;let d=t.querySelector(".ymc-page-info");d&&(d.textContent=`${e} / ${o}`),r.disabled=e<=1,n.disabled=e>=o}}catch(l){console.error("YMC Usage AJAX error:",l)}finally{T()}}(function(e){document.addEventListener("DOMContentLoaded",()=>{ae(),J(),le(),ie(),de(),ue(),me(),O(),Z(),pe(),W(),_e(),fe(),ye(),he(),Q(),Se(),Te(),ve(e),qe(),we(),Ce(),Le(),$(e),X(),V(),Ae(e),Ee(),ke(),Be(),Me(e),Oe(),Ne(),Ie()})})(jQuery);
