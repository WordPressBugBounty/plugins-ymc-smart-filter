var f=document.querySelector("body.js-ymc-admin"),n=document.querySelector("#ymc_main_meta_box .ymc-main"),S=n.dataset.postId,O=_ymc_fg_object.path,g=_ymc_fg_object.ajax_url,M=n.querySelector("#ymc_main_meta_box .ymc-main #general"),A=n.querySelector("#ymc_main_meta_box .ymc-main #layouts"),w=n.querySelector("#ymc_main_meta_box .ymc-main #appearance"),V=n.querySelector("#ymc_main_meta_box .ymc-main #search"),Y=n.querySelector("#ymc_main_meta_box .ymc-main #typography"),E=n.querySelector("#ymc_main_meta_box .ymc-main #advanced"),_t=n.querySelector("#ymc_main_meta_box .ymc-main #shortcode"),G=n.querySelector("#ymc_main_meta_box .ymc-main #tools"),gt=n.querySelector("#ymc_main_meta_box .ymc-main #license");function F(e,t,r){let o="";if(r){let s=new Date;s.setTime(s.getTime()+r*24*60*60*1e3),o="; expires="+s.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/"}function H(e){let t=e+"=",r=document.cookie.split(";");for(let o=0;o<r.length;o++){let s=r[o];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null}function U(){if(n.querySelectorAll(".tabs-content .js-headline-accordion").forEach(e=>{e.addEventListener("click",Me)}),H("hashAccordionYmc")){let e=H("hashAccordionYmc");n.querySelectorAll(`.tabs-content .js-headline-accordion[data-hash="${e}"]`).forEach(t=>{t.classList.add("is-active"),t.nextElementSibling.style.display="block",t.querySelector(".js-icon-accordion").classList.add("fa-chevron-up"),t.querySelector(".js-icon-accordion").classList.remove("fa-chevron-down")})}}function Me(e){let t=e.target.closest(".js-headline-accordion"),r=t.nextElementSibling,o=t.querySelector(".js-icon-accordion"),s=t.dataset.hash;t.classList.toggle("is-active"),jQuery(r).slideToggle(),o.classList.toggle("fa-chevron-down"),o.classList.toggle("fa-chevron-up"),F("hashAccordionYmc",s,30),(s==="custom_css"||s==="custom_js")&&setTimeout(function(){window.ymcEditors&&(window.ymcEditors.css&&window.ymcEditors.css.refresh(),window.ymcEditors.js&&window.ymcEditors.js.refresh())},300)}function oe(){let e=n.querySelectorAll(".tabs-sidebar .nav .nav__item"),t=n.querySelectorAll(".tabs-content .section");if(e.forEach(r=>{r.addEventListener("click",o=>{let s=o.target.closest(".nav__item"),a=s.dataset.hash;F("hashymc",a,30),e.forEach(i=>{i.classList.remove("is-current")}),t.forEach(i=>{a===i.getAttribute("id")?i.classList.add("is-active"):i.classList.remove("is-active")}),s.classList.add("is-current")})}),H("hashymc")!==""){let r=H("hashymc");e.forEach(o=>{r===o.dataset.hash&&(e.forEach(s=>{s.classList.remove("is-current")}),o.classList.add("is-current"),t.forEach(s=>{r===s.getAttribute("id")?s.classList.add("is-active"):s.classList.remove("is-active")}))})}U()}function J(e){e(".js-btn-tooltip").tooltip({classes:{"ui-tooltip":"ymc-tooltip","ui-tooltip-content":"ymc-tooltip-content"},position:{my:"center bottom-20",at:"center",collision:"fit"},content:function(){return e(this).attr("data-tooltip-html")}})}function j(e){e===void 0?f.insertAdjacentHTML("afterbegin",`<div class="preloader"><img src="${O}/assets/images/preloader.svg" alt="preloader"></div>
                    <div class="overlay"></div>`):f.querySelector(e).insertAdjacentHTML("afterbegin",`<div class="preloader preloader--is-local"><img src="${O}/assets/images/preloader.svg" alt="preloader"></div>
                    <div class="overlay overlay--is-local"></div>`)}function T(){var e,t;(e=f.querySelector(".preloader"))==null||e.remove(),(t=f.querySelector(".overlay"))==null||t.remove()}function q(e,t,r){typeof e=="string"?this.el=document.querySelector(e):this.el=e,this.tempName=t,this.data=r||null,this.folderPath=O+"src/admin/js-templates/"}q.prototype.create=function(e){let t=new XMLHttpRequest,r=this;t.open("get",this.folderPath+this.tempName+".hbs",!0),t.onreadystatechange=function(){if(t.readyState===4&&t.status===200){let o=Handlebars.compile(t.response);r.el.innerHTML=o(r.data),e()}},t.send()};q.prototype.createAndWait=function(e){let t=new XMLHttpRequest,r=this;t.open("get",this.folderPath+this.tempName+".hbs",!0),t.onreadystatechange=function(){if(t.readyState===4&&t.status===200){let o=Handlebars.compile(t.response);e(o,r.el)}},t.send()};function W(){jQuery(".js-term-insert .js-term-sortable").sortable({cursor:"move",opacity:1,delay:150,handle:".js-term-handle",scroll:!1,start:function(e,t){t.item[0].classList.add("is-item-dragging"),t.item[0].closest(".terms-inner").classList.add("dragging")},stop:function(e,t){t.item[0].classList.remove("is-item-dragging"),t.item[0].closest(".terms-inner").classList.remove("dragging");let r=[];n.querySelectorAll('.js-term-insert .js-term-sortable input[type="checkbox"]').forEach(o=>{r.push(o.value)}),Be(r)}})}async function Be(e){let t=g,r=new URLSearchParams({action:"action_terms_sort",nonce_code:_ymc_fg_object.sortTermAjax_nonce,payload:JSON.stringify({terms_sort:e,post_id:S})});fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}).then(function(o){if(o.ok===!0)return o.json();console.error("Error occurred:",o.status)}).catch(o=>console.error(o))}function $(){jQuery(".selected-posts .js-post-sortable").sortable({axis:"y",cursor:"move",opacity:1,delay:150,containment:"parent",start:function(e,t){t.item[0].closest(".js-post-sortable").classList.add("dragging")},stop:function(e,t){t.item[0].closest(".js-post-sortable").classList.remove("dragging")}})}function N(){let e=this.dataset.postId,t=this.querySelector(".post-title").innerText,r={postId:e,postTitle:t};this.classList.add("is-disabled"),new q(".ymc-main #general .selected-posts .list-posts","tmpl-selected-posts").createAndWait(function(s,a){a.insertAdjacentHTML("beforeend",s(r)),n.querySelector("#general .selected-posts .number-posts").innerText=n.querySelectorAll("#general .selected-posts .list-posts .post-selected").length,$(),z()})}function B(){n.querySelectorAll("#general .feed-posts .js-scroll-posts .js-add-post").forEach(e=>{e.addEventListener("click",N)})}function z(){n.querySelectorAll("#general .selected-posts .post-selected .js-post-remove").forEach(e=>{e.addEventListener("click",function(){let t=this.dataset.postId;this.closest(".post-selected").remove(),n.querySelectorAll("#general .feed-posts .js-add-post").forEach(r=>{t===r.dataset.postId&&r.classList.remove("is-disabled")}),n.querySelector("#general .selected-posts .number-posts").innerText=n.querySelectorAll("#general .selected-posts .list-posts .post-selected").length})})}function C(e,t=document.body,r="seccess",o=3e3){let s=document.createElement("div");s.classList.add("notification",`notification--${r}`),s.innerHTML=e,document.querySelector(t).appendChild(s),setTimeout(()=>s.remove(),o)}function Q(){n.querySelectorAll("#general .js-tax-insert .js-tax-settings").forEach(e=>{e.addEventListener("click",Oe)})}function Oe(){var c,l;n.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(d=>d.classList.remove("is-open"));let e=this.closest(".taxonomies-list__item");e.classList.add("is-open");let{taxName:t,taxOriginalName:r,taxLabel:o,taxBg:s,taxColor:a,taxStatus:i}=e.dataset;o=o||r,s=s||"#ffffff",a=a||"#ffffff",tb_show("&#9998; Taxonomy: &#91; "+o+" &#93;","/?TB_inline&inlineId=thickbox-tax-modal&width=800&height=500");let u=f.querySelector("#TB_window #TB_ajaxContent .form-taxonomy");jQuery(u.querySelector(".js-tax-bg")).wpColorPicker("color",s),jQuery(u.querySelector(".js-tax-color")).wpColorPicker("color",a),u.querySelector(".js-tax-name").value=o,(c=f.querySelector("#TB_window #TB_ajaxContent .js-btn-tax-save"))==null||c.addEventListener("click",Ye),(l=f.querySelector("#TB_window #TB_ajaxContent .js-btn-tax-reset"))==null||l.addEventListener("click",Ne)}function Ye(){let e=n.querySelector("#general .js-tax-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-taxonomy"),r=t.querySelector(".js-tax-bg").value,o=t.querySelector(".js-tax-color").value,s=t.querySelector(".js-tax-name").value,a=e.dataset.taxOriginalName,i=[];e.classList.add("changed"),e.dataset.taxBg=r,e.dataset.taxColor=o,e.dataset.taxLabel=s,e.dataset.taxStatus="changed",e.querySelector(".field-label").innerHTML=s||a,n.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(u=>{i.push({name:u.dataset.taxName,label:u.dataset.taxLabel,background:u.dataset.taxBg,color:u.dataset.taxColor,status:u.dataset.taxStatus})}),re(i)}function Ne(){let e=n.querySelector("#general .js-tax-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-taxonomy"),r=[];jQuery(t.querySelector(".js-tax-bg")).wpColorPicker("color","#ffffff"),jQuery(t.querySelector(".js-tax-color")).wpColorPicker("color","#ffffff"),t.querySelector(".js-tax-name").value=e.dataset.taxOriginalName,e.classList.remove("changed"),e.dataset.taxBg="",e.dataset.taxColor="",e.dataset.taxLabel="",e.dataset.taxStatus="",e.querySelector(".field-label").innerHTML=e.dataset.taxOriginalName,n.querySelectorAll("#general .js-tax-insert .taxonomies-list__item").forEach(o=>{r.push({name:o.dataset.taxName,label:o.dataset.taxLabel,background:o.dataset.taxBg,color:o.dataset.taxColor,status:o.dataset.taxStatus})}),re(r)}async function re(e){let t="#TB_window #TB_ajaxContent",r=g,o=new URLSearchParams({action:"action_save_taxonomy_attrs",nonce_code:_ymc_fg_object.saveTaxAttrAjax_nonce,payload:JSON.stringify({post_id:S,tax_attrs:e})});try{j(t);let s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()});if(s.ok){let a=await s.json();C(a.message,"#TB_window #TB_ajaxContent","success",2e3)}else console.error("Error HTTP: "+s.status)}catch(s){console.error("Error occurred:",s)}finally{T(t)}}function X(){n.querySelectorAll("#general .js-term-insert .js-term-settings").forEach(e=>{e.addEventListener("click",Ie)})}function Ie(){var D,k,P,ee,te;n.querySelectorAll("#general .js-term-insert .term-item").forEach(I=>I.classList.remove("is-open"));let e=this.closest(".term-item");e.classList.add("is-open");let{termId:t,termName:r,termNameOrig:o,termBackground:s,termColor:a,termClass:i,termDefault:u,termVisible:c,termSlug:l,termTaxonomy:d,termIconAlignment:m,termIconClass:p,termIconColor:y,termIconUrl:x}=e.dataset;s=s||"#095c81",a=a||"#ffffff",i=i||"",u=u||"false",c=c||"true",r=r||o,m=m||"left",p=p||"",y=y||"#ffffff",x=x||"",tb_show("&#9998; Term: &#91; "+r+" &#93;","/?TB_inline&inlineId=thickbox-term-modal&width=800&height=500");let _=f.querySelector("#TB_window #TB_ajaxContent .form-term");if(jQuery(_.querySelector(".js-term-bg")).wpColorPicker("color",s),jQuery(_.querySelector(".js-term-color")).wpColorPicker("color",a),jQuery(_.querySelector(".js-icon-color")).wpColorPicker("color",y),_.querySelector(".js-term-class").value=i,_.querySelector(".js-term-name").value=r,_.querySelector(".js-term-default").checked=u==="true",_.querySelector(".js-term-visible").checked=c==="true",_.querySelector(".js-icon-class").value=p,_.querySelectorAll(".js-icon-alignment").forEach(I=>{I.checked=I.value===m}),_.querySelector(".js-tax-sequence")){let I=_.querySelector(".js-related-terms-wrapper"),Pe=(D=_.querySelector(".js-tax-sequence"))==null?void 0:D.dataset.taxSequence;I.innerHTML="",De(Pe,l,t,_,d)}let b=_.querySelector(".js-domain"),h=_.querySelector(".js-icon-preview"),v=_.querySelector(".js-btn-icon-remove");x?h.innerHTML=`<img src="${b.getAttribute("value")}${x}" width="20">`:p?h.innerHTML=`<i class="${p}"></i>`:h.innerHTML="",v.classList.toggle("is-visible",!!p||!!x),(k=f.querySelector("#TB_window #TB_ajaxContent .js-btn-term-save"))==null||k.addEventListener("click",He),(P=f.querySelector("#TB_window #TB_ajaxContent .js-btn-term-reset"))==null||P.addEventListener("click",Re),(ee=f.querySelector("#TB_window #TB_ajaxContent .js-enable-custom-icon"))==null||ee.addEventListener("change",$e),(te=f.querySelector("#TB_window #TB_ajaxContent .js-upload-file"))==null||te.addEventListener("change",Qe),v==null||v.addEventListener("click",Z);let L=f.querySelector("#TB_window #TB_ajaxContent .js-enable-custom-icon");L.checked=!!x,L.dispatchEvent(new Event("change",{bubbles:!0})),Fe(),Ue(),Je(),We()}async function He(){let e=n.querySelector("#general .js-term-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-term");e.classList.add("changed");let r=t.querySelector(".js-term-bg").value,o=t.querySelector(".js-term-color").value,s=t.querySelector(".js-term-class").value,a=t.querySelector(".js-term-name").value,i=t.querySelector(".js-term-default").checked,u=t.querySelector(".js-term-visible").checked,c=e.dataset.termNameOrig,l="left";t.querySelectorAll(".js-icon-alignment").forEach(h=>{h.checked&&(l=h.value)});let d=t.querySelector(".js-icon-class").value,m=t.querySelector(".js-icon-url").value,p=t.querySelector(".js-icon-color").value,y=e.querySelector(".checkbox-control").checked,x=t.querySelectorAll('.js-related-terms-list input[type="checkbox"]:checked'),_=Array.from(x).map(h=>parseInt(h.value,10)),b=[];e.querySelectorAll(".field-label").forEach(h=>{h.childNodes.forEach(v=>{v.nodeType===Node.TEXT_NODE&&v.textContent.trim()&&(v.remove(),h.insertAdjacentHTML("afterbegin",a||c))})}),t.querySelectorAll(".js-accordion-terms-header").forEach(h=>{let v=h.nextElementSibling;if(!v)return;let L=v.querySelectorAll('input[type="checkbox"]:checked').length>0;h.classList.toggle("has-checked",L)}),e.dataset.termBackground=r,e.dataset.termColor=o,e.dataset.termClass=s,e.dataset.termName=a,e.dataset.termDefault=i,e.dataset.termVisible=u,e.dataset.termIconAlignment=l,e.dataset.termIconClass=d,e.dataset.termIconUrl=m,e.dataset.termIconColor=p,e.dataset.termChecked=y,e.dataset.termStatus="changed",e.dataset.termRelatedTerms=JSON.stringify(_),n.querySelectorAll("#general .js-term-insert .term-item").forEach(h=>{b.push({term_id:h.dataset.termId,term_taxonomy:h.dataset.termTaxonomy,term_slug:h.dataset.termSlug,term_name_orig:h.dataset.termNameOrig,term_background:h.dataset.termBackground,term_color:h.dataset.termColor,term_class:h.dataset.termClass,term_default:h.dataset.termDefault,term_visible:h.dataset.termVisible,term_name:h.dataset.termName,term_checked:h.dataset.termChecked,term_status:h.dataset.termStatus,icon_class:h.dataset.termIconClass,icon_alignment:h.dataset.termIconAlignment,icon_color:h.dataset.termIconColor,icon_url:h.dataset.termIconUrl,related_terms:h.dataset.termRelatedTerms})}),await se(b)}async function Re(){let e=n.querySelector("#general .js-term-insert .is-open"),t=f.querySelector("#TB_window #TB_ajaxContent .form-term"),r=[],{termNameOrig:o}=e.dataset;jQuery(t.querySelector(".js-term-bg")).wpColorPicker("color","#095c81"),jQuery(t.querySelector(".js-term-color")).wpColorPicker("color","#ffffff"),jQuery(t.querySelector(".js-icon-color")).wpColorPicker("color","#ffffff"),t.querySelector(".js-term-class").value="",t.querySelector(".js-term-name").value=o,t.querySelector(".js-term-default").checked=!1,t.querySelector(".js-term-visible").checked=!0,t.querySelector('.js-icon-alignment[value="left"]').checked=!0,t.querySelector(".js-icon-class").value="",t.querySelector(".js-icon-url").value="",t.querySelector(".js-icon-preview").innerHTML="",t.querySelector(".js-btn-icon-remove").classList.remove("is-visible"),t.querySelector(".upload-term-icon .label-file span").innerHTML="Choose a icon",t.querySelectorAll('.js-related-terms-list input[type="checkbox"]').forEach(a=>{a.checked=!1}),t.querySelectorAll(".js-accordion-terms-header").forEach(a=>{a.classList.remove("is-active","has-checked"),a.setAttribute("aria-expanded","false");let i=a.nextElementSibling;i&&(i.style.display="none")}),e.dataset.termRelatedTerms="[]";let s=e.querySelector(".field-label");if(s){let a=Array.from(s.childNodes).find(i=>i.nodeType===Node.TEXT_NODE&&i.textContent.trim()!=="");a&&(a.textContent=`${o} `)}e.classList.remove("changed"),e.dataset.termBackground="",e.dataset.termColor="",e.dataset.termClass="",e.dataset.termName=o,e.dataset.termDefault="false",e.dataset.termVisible="true",e.dataset.termIconAlignment="",e.dataset.termIconClass="",e.dataset.termIconUrl="",e.dataset.termIconColor="",e.dataset.termChecked=e.querySelector(".checkbox-control").checked,e.dataset.termStatus="",n.querySelectorAll("#general .js-term-insert .term-item").forEach(a=>{r.push({term_id:a.dataset.termId,term_slug:a.dataset.termSlug,term_name_orig:a.dataset.termNameOrig,term_background:a.dataset.termBackground,term_color:a.dataset.termColor,term_class:a.dataset.termClass,term_default:a.dataset.termDefault,term_visible:a.dataset.termVisible,term_name:a.dataset.termName,term_checked:a.dataset.termChecked,term_status:a.dataset.termStatus,icon_class:a.dataset.termIconClass,icon_alignment:a.dataset.termIconAlignment,icon_color:a.dataset.termIconColor,icon_url:a.dataset.termIconUrl,related_terms:a.dataset.termRelatedTerms||"[]"})}),await se(r)}async function se(e){let t="#TB_window #TB_ajaxContent",r=g,o=new URLSearchParams({action:"action_save_term_attrs",nonce_code:_ymc_fg_object.saveTermAttrAjax_nonce,payload:JSON.stringify({post_id:S,term_attrs:e})});try{j(t);let s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()});if(s.ok){let a=await s.json();C(a.message,"#TB_window #TB_ajaxContent","success",2e3)}else console.error("Error HTTP: "+s.status)}catch(s){console.error("Error occurred:",s)}finally{T(t)}}async function De(e,t,r,o,s){let a="#TB_window #TB_ajaxContent .js-related-terms-wrapper",i=o.querySelector(".js-related-terms-wrapper"),u=o.querySelector(".js-tax-dependency-chain"),c=g,l=new URLSearchParams({action:"action_update_related_terms",nonce_code:_ymc_fg_object.updateRelatedTerms_nonce,payload:JSON.stringify({post_id:S,sequence:e,current_term:t,current_tax:s,term_id:r})});try{j(a);let d=await fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l.toString()});if(d.ok){let m=await d.json();i.innerHTML=m.data.html,u.innerHTML=m.data.tax_chain,Xe(o)}else console.error("Error HTTP: "+d.status)}catch(d){console.error("Error occurred:",d)}finally{T(a)}}function Fe(){let e=f.querySelectorAll("#TB_window #TB_ajaxContent .tab-button"),t=f.querySelectorAll("#TB_window #TB_ajaxContent .tab-content");e.forEach(r=>{r.addEventListener("click",()=>{e.forEach(o=>o.classList.remove("is-active")),t.forEach(o=>o.classList.remove("is-active")),r.classList.add("is-active"),f.querySelector("#TB_window #TB_ajaxContent #"+r.dataset.tab).classList.add("is-active")})})}function Ue(){var o,s;let e=f.querySelector("#TB_window #TB_ajaxContent"),t=e.querySelectorAll(".tab-button"),r=e.querySelectorAll(".tab-content");t.forEach(a=>a.classList.remove("is-active")),r.forEach(a=>a.classList.remove("is-active")),(o=e.querySelector('.tabs [data-tab="tabTerm"]'))==null||o.classList.add("is-active"),(s=e.querySelector(".tabs #tabTerm"))==null||s.classList.add("is-active")}function Je(){let e=f.querySelector("#TB_window #TB_ajaxContent .form-term .js-field-search-icon"),t=f.querySelectorAll("#TB_window #TB_ajaxContent .form-term .js-icon-item i");e.addEventListener("input",()=>{let r=e.value.toLowerCase();t.forEach(o=>{let s=o.getAttribute("class").replace(/[\s.-]/g," ").toLowerCase();o.style.display=s.includes(r)?"inline-block":"none"})})}function We(){let e=f.querySelectorAll("#TB_window #TB_ajaxContent .form-term .js-icon-item i"),t=f.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove");e.forEach(r=>{r.addEventListener("click",()=>{f.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove").classList.add("is-visible"),f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-class").value=r.getAttribute("class"),f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-preview").innerHTML=r.outerHTML,f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-url").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-upload-file").value="",t.addEventListener("click",Z)})})}function Z(){f.querySelector("#TB_window #TB_ajaxContent .form-term .js-btn-icon-remove").classList.remove("is-visible"),f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-class").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-url").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-icon-preview").innerHTML="",f.querySelector("#TB_window #TB_ajaxContent .form-term .js-upload-file").value="",f.querySelector("#TB_window #TB_ajaxContent .form-term .upload-term-icon .label-file span").innerHTML="Choose a icon"}function $e(e){let t=f.querySelector("#TB_window #TB_ajaxContent"),r=t.querySelector(".js-upload-icon-wrap"),o=t.querySelector(".js-term-icon-selector"),s=this.checked;r.classList.toggle("is-hidden",!s),o.classList.toggle("is-hidden",s)}async function Qe(e){let t=g,r=e.target.files[0],o="#TB_window #TB_ajaxContent",s=f.querySelector("#TB_window #TB_ajaxContent .form-term"),a=s.querySelector(".js-icon-preview"),i=s.querySelector(".js-btn-icon-remove"),u=s.querySelector(".js-icon-class"),c=s.querySelector(".js-icon-url"),l=e.target.value.split("\\").pop(),d=s.querySelector(".js-domain");if(!r)return;let m=new FormData;m.append("icon",r),m.append("action","action_upload_term_icon"),m.append("post_id",S),m.append("nonce_code",_ymc_fg_object.uploadTermIconAjax_nonce);try{j(o);let p=await fetch(t,{method:"POST",credentials:"same-origin",body:m});if(p.ok){let y=await p.json();y.success&&y.data.url?(a.innerHTML=`<img src="${d.getAttribute("value")}${y.data.url}" width="20">`,u.value="",c.value=y.data.url,i.classList.add("is-visible"),i.addEventListener("click",Z),this.nextElementSibling.querySelector("span").innerHTML=l,C(y.data.message,"#TB_window #TB_ajaxContent","success",2e3)):C(y.data.message,"#TB_window #TB_ajaxContent","error",2e3)}else console.error("Error HTTP: "+p.status)}catch(p){console.error("Error occurred:",p)}finally{T(o)}}function Xe(e){let t=e.querySelector(".js-accordion-terms");if(t){let r=function(o){let s=o.nextElementSibling;if(!s)return;let a=s.querySelectorAll('input[type="checkbox"]:checked').length>0;o.classList.toggle("has-checked",a)};t.querySelectorAll(".js-accordion-terms-header").forEach(o=>{o.classList.remove("is-active","has-checked"),o.setAttribute("aria-expanded","false");let s=o.nextElementSibling;s&&(s.style.display="none",r(o),s.querySelectorAll('input[type="checkbox"]').forEach(a=>{a.addEventListener("change",()=>r(o))})),o.replaceWith(o.cloneNode(!0))}),t.querySelectorAll(".js-accordion-terms-header").forEach(o=>{o.addEventListener("click",function(){this.classList.toggle("is-active");let s=this.nextElementSibling,a=this.getAttribute("aria-expanded")==="true";this.setAttribute("aria-expanded",a?"false":"true"),s.style.display=a?"none":"block"})})}}function ae(){n.querySelector("#general .js-post-types").addEventListener("change",Ve)}function ne(){n.querySelector("#general .js-tax-insert").addEventListener("click",Ge)}function ce(){n.querySelector("#general .js-tax-clear").addEventListener("click",ze)}function le(){n.querySelector("#general .js-tax-updated").addEventListener("click",Ze)}async function Ve(){if(confirm("Are you sure change Post Type? IMPORTANT! Post Type Changes remove all taxonomies, terms and selected posts.")){let t=n.querySelectorAll("#general #ymc-post-types option:checked"),r=Array.from(t).map(s=>s.value),o={action:"action_get_taxonomies",nonce_code:_ymc_fg_object.getTaxAjax_nonce,payload:JSON.stringify({post_types:r,post_id:S})};try{j(),_ymc_fg_object.loadedFeedPosts_page=2;let s=await fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(s.ok){let a=await s.json(),i=a.taxonomies,u=a.posts,c={},l={},d=a.found_posts,m=n.querySelector("#general .posts-wrapper .js-scroll-posts"),p=n.querySelector("#general .posts-wrapper .feed-posts .number-posts");p.innerHTML=d,u.length>0?l={isPosts:!0,posts:u}:l={noPosts:!0,no_posts_found:"No posts found"},new q(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(_,b){var v;M.querySelector(".feed-posts .js-scroll-posts").innerHTML="",M.querySelector(".selected-posts .js-post-sortable").innerHTML="",(v=M.querySelector(".js-tax-sequence-wrapper"))==null||v.remove(),A.querySelector(".js-filter-group").innerHTML="";let h=A.querySelector(".js-toggle-filter-builder");h.value="default",h.dispatchEvent(new Event("change")),b.insertAdjacentHTML("beforeend",_(l)),m.querySelectorAll(".js-add-post").forEach(L=>{L.removeEventListener("click",N)}),B()}),Object.keys(i).length>0?c={taxonomies:i,isTax:!0}:c={isTax:!1},new q(".ymc-main .js-tax-insert","tmpl-taxonomy",c).create(function(){T(),i.length===0?n.querySelector(".js-control-bar").classList.add("is-hidden"):n.querySelector(".js-control-bar").classList.remove("is-hidden"),n.querySelector(".terms-wrapper .js-term-insert").innerHTML="",n.querySelector(".terms-wrapper").classList.add("is-hidden"),Q()})}else console.error("Error HTTP: "+s.status)}catch(s){console.error("Error occurred:",s)}}else{let t=this.dataset.previousValue.split(",");n.querySelectorAll("#general #ymc-post-types option").forEach(r=>{r.selected=t.includes(r.value)})}}async function Ge(e){if(e.target.nodeName==="INPUT"){let t=e.target.value,r=e.target.dataset.label;if(e.target.checked){let o={action:"action_get_terms",nonce_code:_ymc_fg_object.getTermAjax_nonce,payload:JSON.stringify({slug:t,label:r,post_id:S})};try{j();let s=await fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(s.ok){let i=(await s.json()).data_obj,c={isTerms:i.terms.length>0?!0:[],tax_slug:i.tax_slug,tax_label:i.tax_label,terms:i.terms,no_terms:"No terms found"};new q(".ymc-main .js-term-insert","tmpl-term").createAndWait(function(d,m){T(),m.insertAdjacentHTML("beforeend",d(c)),n.querySelector(".terms-wrapper").classList.remove("is-hidden"),W(),X()})}}catch(s){console.error("Error occurred:",s)}}else confirm("Are you sure you want to disable this taxonomy?")?(n.querySelector(`.js-term-insert .js-tax-${t}`).remove(),n.querySelectorAll(".js-term-insert .cel").length===0&&n.querySelector(".terms-wrapper").classList.add("is-hidden")):e.target.checked=!0}}async function ze(e){if(e.preventDefault(),confirm("Are you sure you want to remove all terms of taxonomies?")){let r={action:"action_remove_terms",nonce_code:_ymc_fg_object.removeTermsAjax_nonce,payload:JSON.stringify({post_id:S})};try{j();let o=await fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(r).toString()});if(o.ok){let s=await o.json();T(),n.querySelectorAll(".terms-wrapper .terms-grid .cel").forEach(a=>{a.remove()}),n.querySelector(".terms-wrapper").classList.add("is-hidden"),n.querySelectorAll("#general .js-tax-insert .js-tax-checkbox").forEach(a=>{a.checked=!1})}}catch(o){console.error("Error occurred:",o)}}}async function Ze(e){e.preventDefault();let t=n.querySelectorAll("#general #ymc-post-types option:checked"),r=Array.from(t).map(s=>s.value),o={action:"action_updated_taxonomies",nonce_code:_ymc_fg_object.updatedTaxAjax_nonce,payload:JSON.stringify({post_types:r})};try{j();let s=await fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()});if(s.ok){let i=(await s.json()).taxonomies,u=[],c={},l=Object.keys(i).length,d=new q(".ymc-main .js-tax-insert","tmpl-taxonomy");if(n.querySelectorAll(".js-tax-insert .taxonomies-list__item").forEach(m=>{let p=m.dataset.taxName;u.push(p)}),l>0){if(l>u.length)for(let m in i)u.includes(m)||(c={taxonomies:{[m]:i[m]},isTax:!0},d.createAndWait(function(p,y){y.insertAdjacentHTML("beforeend",p(c))}));l<u.length&&u.forEach(m=>{var p,y;Object.keys(i).includes(m)||((p=n.querySelector('.js-tax-insert [data-tax-name="'+m+'"]'))==null||p.remove(),(y=n.querySelector(".js-term-insert .js-tax-"+m))==null||y.remove())})}T()}}catch(s){console.error("Error occurred:",s)}}function ie(){let e=n.querySelector(".js-tax-sortable");jQuery(e).sortable({cursor:"move",handle:".js-tax-handle",opacity:1,delay:150,scroll:!1,start:function(t,r){r.item[0].classList.add("is-item-dragging"),e.classList.add("dragging")},stop:function(t,r){r.item[0].classList.remove("is-item-dragging"),e.classList.remove("dragging");let o=[];e.querySelectorAll(".taxonomies-list__item").forEach(s=>{o.push(s.dataset.taxName)}),Ke(o)}})}async function Ke(e){let t=g,r=new URLSearchParams({action:"action_taxonomies_sort",nonce_code:_ymc_fg_object.sortTaxAjax_nonce,payload:JSON.stringify({tax_sort:e,post_id:S})});fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}).then(function(o){if(o.ok===!0)return o.json();console.error("Error occurred:",o.status)}).catch(o=>console.error(o))}function de(){n.querySelectorAll("#general .js-term-insert").forEach(e=>{e.addEventListener("click",function(t){if(t.target.closest(".tax-name")){let r=t.target.closest(".cel").querySelectorAll(".term-item .checkbox-control");t.target.checked?r.forEach(o=>{o.checked=!0}):r.forEach(o=>{o.checked=!1})}})})}function me(){n.querySelector("#general .posts-wrapper .js-scroll-posts").addEventListener("scroll",K)}function ue(){n.querySelector("#general .posts-wrapper .js-field-search").addEventListener("input",tt),n.querySelector("#general .posts-wrapper .js-btn-search").addEventListener("click",et),n.querySelector("#general .posts-wrapper .js-btn-clear").addEventListener("click",pe)}function K(){let e=n.querySelector("#general .posts-wrapper .js-scroll-posts"),t={root:e,rootMargin:"0px",threshold:.9};new IntersectionObserver((o,s)=>{o.forEach(a=>{if(a.isIntersecting&&!a.target.classList.contains("is-loaded")){a.target.classList.add("is-loaded");let i=Array.from(n.querySelectorAll("#general #ymc-post-types option:checked")).map(c=>c.value),u={action:"action_selected_posts",nonce_code:_ymc_fg_object.selectPostsAjax_nonce,payload:JSON.stringify({post_types:i,paged:_ymc_fg_object.loadedFeedPosts_page,post_id:S,posts_per_page:20})};j("#general .posts-wrapper .js-scroll-posts"),fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(u).toString()}).then(function(c){if(c.ok===!0)return c.json();console.error("Error occurred:",c.status)}).then(c=>{let l={};c.posts.length>0&&(l={isPosts:!0,posts:c.posts}),new q(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(m,p){T(),p.insertAdjacentHTML("beforeend",m(l)),_ymc_fg_object.loadedFeedPosts_page++,e.querySelectorAll(".js-add-post").forEach(y=>{y.removeEventListener("click",N)}),B()})}).catch(c=>console.error(c))}})},t).observe(e.querySelector("li:last-child"))}async function et(){let e=n.querySelector("#general .posts-wrapper .js-scroll-posts"),t=n.querySelector("#general .posts-wrapper .feed-posts .number-posts"),r=n.querySelector("#general .posts-wrapper .js-field-search").value.toLowerCase();if(r.length>0){let o=n.querySelectorAll("#general #ymc-post-types option:checked"),s=Array.from(o).map(i=>i.value),a={action:"action_search_feed_posts",nonce_code:_ymc_fg_object.searchFeedPostsAjax_nonce,payload:JSON.stringify({post_types:s,post_id:S,phrase:r})};try{j("#general .posts-wrapper .js-scroll-posts"),this.classList.add("button--disabled");let i=await fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(a).toString()});if(i.ok){let u=await i.json(),c={},l=u.found_posts;u.posts.length>0?c={isPosts:!0,posts:u.posts}:c={noPosts:!0,no_posts_found:"No posts found"},t.innerHTML=l,this.classList.remove("button--disabled"),e.removeEventListener("scroll",K),e.scrollTo({top:0,left:0,behavior:"smooth"}),new q(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(m,p){T(),p.innerHTML=m(c),e.querySelectorAll(".js-add-post").forEach(y=>{y.removeEventListener("click",N)}),B()})}}catch(i){console.error("Error occurred:",i)}}}function tt(){this.value.length>0?this.nextElementSibling.classList.remove("is-hidden"):(this.nextElementSibling.classList.add("is-hidden"),pe().then(e=>{}))}async function pe(){let e=n.querySelector("#general .posts-wrapper .js-scroll-posts"),t=n.querySelector("#general .posts-wrapper .feed-posts .number-posts"),r=n.querySelector("#general .posts-wrapper .js-field-search"),o=n.querySelector("#general .posts-wrapper .js-btn-clear"),s=n.querySelectorAll("#general #ymc-post-types option:checked"),a=Array.from(s).map(l=>l.value),i=g,u="#general .posts-wrapper .js-scroll-posts",c=new URLSearchParams({action:"action_selected_posts",nonce_code:_ymc_fg_object.selectPostsAjax_nonce,payload:JSON.stringify({post_types:a,paged:1,post_id:S,posts_per_page:20})});o.classList.add("is-hidden"),r.value="",r.focus();try{j(u);let l=await fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c.toString()});if(l.ok){let d=await l.json(),m={},p=d.found_posts;d.posts.length>0?m={isPosts:!0,posts:d.posts}:m={noPosts:!0,no_posts_found:"No posts found"},t.innerHTML=p,e.scrollTo({top:0,left:0,behavior:"smooth"}),new q(".ymc-main #general .js-scroll-posts","tmpl-feed-posts").createAndWait(function(x,_){_.innerHTML=x(m),_ymc_fg_object.loadedFeedPosts_page=2,e.querySelectorAll(".js-add-post").forEach(b=>{b.removeEventListener("click",N)}),B(),e.addEventListener("scroll",K)})}}catch(l){console.error("Error occurred:",l)}finally{T(u)}}function fe(){n.querySelector("#general .button-expand-wrapper .js-button-expand").addEventListener("click",function(){this.classList.toggle("is-expanded"),n.querySelectorAll("#general .select-posts-display__inner .cel .list-posts").forEach(e=>{e.classList.contains("is-expanded")?e.classList.remove("is-expanded"):e.classList.add("is-expanded")})})}function ye(){n.querySelector("#general .excluded-posts-checkbox .js-excluded-checkbox").addEventListener("click",function(e){let t=n.querySelector("#general .selected-posts .js-post-sortable");this.checked?t.classList.add("is-excluded"):t.classList.remove("is-excluded")})}function _e(){he(),ge();let e=n.querySelectorAll("#layouts .filter-builder .js-filter-group .filter-item").length;n.querySelector("#layouts .filter-builder .js-add-filter").addEventListener("click",ot(e)),n.querySelector("#layouts .js-toggle-filter-builder").addEventListener("change",he)}function ge(){n.querySelectorAll("#layouts .filter-builder .js-remove-filter").forEach(e=>{e.addEventListener("click",rt)})}function ot(e){return async function(){let t=n.querySelector(".filter-builder .js-filter-group"),r={action:"action_get_selected_taxonomies",nonce_code:_ymc_fg_object.getSelectTaxAjax_nonce,payload:JSON.stringify({post_id:S})};try{j();let o=await fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(r).toString()});if(o.ok){let s=await o.json(),a=s.taxSelected.length>0,i=s.taxSelected.length>0?"":"is-disabled",u={filterIndex:e,isTaxSelected:a,isDisabledTax:i,taxSelected:s.taxSelected,filtersTypes:s.filtersTypes,placements:s.placements};new q(t,"tmpl-filter-builder").createAndWait(function(l,d){d.insertAdjacentHTML("beforeend",l(u)),ge()}),e++}}catch(o){console.error("Error occurred:",o)}finally{T()}}}function rt(){let e=this.closest(".filter-item");e&&e.remove()}function he(){let e=n.querySelector(".js-toggle-filter-builder"),t=n.querySelector(".filter-builder"),r=w.querySelector(".js-filter-button-all");e.value==="composite"?t.style.display="block":t.style.display="none",e.value==="default"||e.value==="composite"?r.style.display="block":r.style.display="none"}function Se(e){w.querySelector(".js-term-sort-direction").addEventListener("change",st),w.querySelector(".js-pagination_type").addEventListener("change",at),w.querySelector(".js-post-order-by").addEventListener("change",nt),w.querySelector(".js-add-order-multiple-field").addEventListener("click",ct(0,e)),w.querySelectorAll(".js-remove-order-field").forEach(t=>{t.addEventListener("click",xe)})}function st(){let e=this.value,t=w.querySelector(".js-term-sort-field"),r=e==="manual";t.style.display=r?"none":"block"}function at(){let e=this.value,t=w.querySelector(".js-navigation-buttons"),r=w.querySelector(".js-load-more-button"),o=e==="numeric",s=e==="loadmore";t.style.display=o?"block":"none",r.style.display=s?"block":"none"}function nt(){let e=this.value,t=w.querySelector(".js-order-fields-meta-key"),r=w.querySelector(".js-order-fields-multiple-fields"),o=e==="meta_key";t.style.display=o?"block":"none";let s=e==="multiple_fields";r.style.display=s?"block":"none"}function ct(e,t){return function(){let r=w.querySelector(".post-order-fields-inner"),o=r.querySelectorAll(".field-group").length;o>0&&(e=o);let a=w.querySelector(".field-multiple-template").innerHTML.replace(/index/g,e);r.insertAdjacentHTML("beforeend",a),e++,J(t),w.querySelectorAll(".js-remove-order-field").forEach(i=>{i.addEventListener("click",xe)})}}function xe(){this.closest(".field-group").remove()}function je(){let e=A.querySelector(".js-selected-post-layout"),t=A.querySelector(".js-grid-settings"),r=A.querySelector(".js-grid-style"),o=A.querySelector(".js-carousel-settings"),s=A.querySelector(".js-default-carousel-settings"),a=A.querySelector(".js-checkbox-custom-carousel-settings");e&&e.addEventListener("change",function(){this.value==="layout_carousel"?(t.style.display="none",r.style.display="none",o.style.display="block"):(t.style.display="block",r.style.display="block",o.style.display="none")}),s&&a.addEventListener("change",function(){this.checked?s.style.display="none":s.style.display="block"}),it(),lt()}function lt(){let e=A.querySelector(".js-tooltip-trigger"),t=A.querySelector(".js-field-example"),r;function o(){clearTimeout(r),t.classList.add("visible")}function s(){r=setTimeout(()=>{t.classList.remove("visible")},200)}e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",s),t.addEventListener("mouseenter",o),t.addEventListener("mouseleave",s)}function it(){A.querySelectorAll(".field-description pre code").forEach(e=>{let t=e.innerHTML.split(`
`);for(;t.length&&t[0].trim()==="";)t.shift();for(;t.length&&t[t.length-1].trim()==="";)t.pop();let r=Math.min(...t.filter(o=>o.trim()).map(o=>o.match(/^(\s*)/)[0].length));e.innerHTML=t.map(o=>o.slice(r)).join(`
`)})}function Te(){Y.querySelector(".js-filter-font-family").addEventListener("change",dt),Y.querySelector(".js-post-title-font-family").addEventListener("change",mt),Y.querySelector(".js-post-link-font-family").addEventListener("change",ut)}function dt(){let e=this.value,t=Y.querySelector(".js-filter-custom-font-fields"),r=e==="custom";t.style.display=r?"block":"none"}function mt(){let e=this.value,t=Y.querySelector(".js-post-title-custom-font-fields"),r=e==="custom";t.style.display=r?"block":"none"}function ut(){let e=this.value,t=Y.querySelector(".js-post-link-custom-font-fields"),r=e==="custom";t.style.display=r?"block":"none"}function ve(){V.querySelector(".js-autocomplete-enabled").addEventListener("change",pt)}function pt(){let e=V.querySelector(".js-autocomplete-settings");e&&(this.checked?e.classList.remove("is-hidden"):e.classList.add("is-hidden"))}function be(){E.querySelector(".js-advanced-query-type").addEventListener("change",ft)}function ft(){let e=this.value,t=E.querySelector(".js-callback-function"),r=E.querySelector(".js-advanced-query"),o=e==="callback",s=e==="advanced";t&&(t.style.display=o?"block":"none"),r&&(r.style.display=s?"block":"none")}function we(e){e(".js-picker-color").wpColorPicker(),e(".js-picker-color-alpha").wpColorPicker({palettes:!0,alpha:!0,clear:!0})}function qe(){R("#appearance .js-toggle-switch-filter-state","#appearance .js-is-disabled-filter-options","hide"),R("#appearance .js-toggle-switch-pagination","#appearance .js-is-disabled-pagination","hide"),R("#appearance .js-toggle-switch-popup","#appearance .js-is-enable-popup","show"),R("#search .js-toggle-switch-search-posts","#search .js-is-disabled-search-options","show"),R("#advanced .js-toggle-switch-advanced-query",".js-is-enable-advanced-query","show"),R("#advanced .js-toggle-switch-sort-posts",".js-is-enable-sort-posts","show")}function R(e,t,r="show"){document.querySelectorAll(`${e} .js-toggle-switch input[type="checkbox"]`).forEach(o=>{let a=o.closest(e).querySelector(t);if(!a)return;let i=()=>{let u=o.checked&&r==="show"||!o.checked&&r==="hide";a.style.display=u?"block":"none"};o.addEventListener("change",i),i()})}function Ce(){let e=E.querySelector(".js-preloader-icon"),t=E.querySelector(".js-preloader-filters"),r=E.querySelector(".js-preloader-custom-filters"),o=E.querySelector(".js-preview-preloader"),s=O+"assets/images/preloaders/",a=c=>{var m;let l=o.querySelector("img");if(!l)return;let d={none:"none",brightness:"brightness(1.4)",contrast:"contrast(1.5)",grayscale:"grayscale(100%)",invert:"invert(100%)",opacity:"opacity(40%)",saturate:"saturate(2)",sepia:"sepia(100%)"};if(c==="custom_filter"){let p=r==null?void 0:r.querySelector("input"),y=((m=p==null?void 0:p.value)==null?void 0:m.trim())||"none";y.startsWith("filter:")&&(y=y.replace(/^filter:\s*/i,"")),l.style.cssText=`filter: ${y};`}else l.style.filter=d[c]||"none"},i=c=>{if(!r)return;let l=r.querySelector("input");c==="custom_filter"?(r.style.display="block",l&&!l.dataset.listenerAttached&&(l.addEventListener("input",()=>{a("custom_filter")}),l.dataset.listenerAttached="true")):r.style.display="none"},u=c=>{if(c==="none")o.innerHTML="";else{let l=document.createElement("img");l.src=s+c+".svg",l.alt=c+" preloader",l.width=70,l.height=70,o.innerHTML="",o.appendChild(l);let d=(t==null?void 0:t.value)||"none";d==="custom_filter"?setTimeout(()=>{a("custom_filter")},0):a(d)}};e==null||e.addEventListener("change",function(){u(this.value)}),t==null||t.addEventListener("change",function(){let c=this.value;i(c),a(c)}),e!=null&&e.value&&e.value!=="none"&&u(e.value),t!=null&&t.value&&i(t.value)}function Ae(e){let t=M.querySelector(".js-tax-sequence-wrapper");if(t){let a=function(){let c=t.querySelectorAll(".js-sequence-taxonomies .taxonomy-by-related-terms"),l=t.querySelectorAll(".js-available-taxonomies .taxonomy-by-related-terms"),d=[],m=t.querySelector(".js-sequence-input");l.forEach(p=>{var y,x,_;(y=p.querySelector(".taxonomy-order"))==null||y.remove(),(x=p.querySelector(".radio-buttons-wrap"))==null||x.remove(),(_=p.querySelector(".js-icon-config"))==null||_.remove()}),c.forEach((p,y)=>{let x=p.querySelector(".taxonomy-order");x||(x=document.createElement("span"),x.className="taxonomy-order",p.append(x)),x.textContent=y+1,d.push(p.getAttribute("data-tax"));let _=p.querySelector(".js-icon-config");_||(_=document.createElement("span"),_.className="icon-config js-icon-config",p.append(_));let b=p.querySelector(".radio-buttons-wrap");if(!b){let h=p.getAttribute("data-tax");b=document.createElement("div"),b.className="radio-buttons-wrap";let v=document.createElement("label"),L=document.createElement("input");L.type="radio",L.name=`tax_mode_${h}`,L.value="single",L.className="input-radio js-tax-radio",v.append(L,"Single");let D=document.createElement("label"),k=document.createElement("input");k.type="radio",k.name=`tax_mode_${h}`,k.value="multiple",k.className="input-radio js-tax-radio",D.append(k,"Multiple"),b.append(v,D),p.append(b);let P=b.querySelector(".header-config");P||(P=document.createElement("div"),P.className="header-config",P.textContent="Mode Taxonomy",b.prepend(P)),L.checked=!0}}),m&&(m.value=d.join(",")),u(),i()},i=function(){let c=t.querySelectorAll(".js-sequence-taxonomies .taxonomy-by-related-terms"),l=t.querySelector(".js-sequence-tax-settings"),d=[];c.forEach(m=>{let p=m.getAttribute("data-tax"),y=m.querySelector(`input[name="tax_mode_${p}"]:checked`),x=y?y.value:"single";d.push({taxonomy:p,mode:x})}),l&&(l.value=JSON.stringify(d))},u=function(){o.children("li").length?o.closest(".sequence-selected").addClass("hide-placeholder"):o.closest(".sequence-selected").removeClass("hide-placeholder")},r=e(".js-available-taxonomies"),o=e(".js-sequence-taxonomies"),s=".js-available-taxonomies, .js-sequence-taxonomies";[r,o].forEach(c=>{if(c.data("ui-sortable"))try{c.sortable("destroy")}catch(l){}}),r.add(o).sortable({connectWith:s,items:"> li",handle:".js-tax-handle",appendTo:"body",zIndex:9999,tolerance:"pointer",placeholder:"ui-sortable-placeholder",helper:function(c,l){let d=l.clone();return d.addClass("taxonomy-by-related-terms"),d.css({width:l.outerWidth(),height:l.outerHeight(),boxSizing:"border-box"}),d},start:function(c,l){l.placeholder.height(l.helper.outerHeight())},stop:function(c,l){setTimeout(a,0)},receive:function(c,l){e(this).hasClass("js-sequence-taxonomies")&&(a(),Le(t))},update:function(c,l){e(this).hasClass("js-sequence-taxonomies")&&l.sender===null&&(a(),Le(t))}}).disableSelection(),t.addEventListener("change",function(c){c.target.matches(".js-tax-radio")&&i()}),t.addEventListener("click",function(c){if(c.target.matches(".js-icon-config")){let d=c.target.closest(".taxonomy-by-related-terms").querySelector(".radio-buttons-wrap");c.target.classList.toggle("is-close"),d&&d.classList.toggle("is-visible")}}),u(),yt()}}function yt(){let e=M.querySelectorAll('.js-root-source input[type="radio"]'),t=M.querySelector(".js-root-terms");e.forEach(r=>{r.addEventListener("change",()=>{r.value==="manual"?t.classList.add("is-visible"):(t.classList.remove("is-visible"),t.querySelectorAll(".js-root-term").forEach(s=>s.checked=!1))})})}async function Le(e){var l;let t=g,r=".js-root-terms-list",o=e.querySelector(".js-root-terms-list"),s=e.querySelector(".js-sequence-input").value,a=((l=e.querySelector(".js-root-source:checked"))==null?void 0:l.value)||"top_level",i=[];e.querySelectorAll(".js-root-term:checked").forEach(d=>{i.push(parseInt(d.value))});let u={post_id:S,sequence:s,root_source:a,root_terms:i},c=new URLSearchParams({action:"action_update_root_source_terms",nonce_code:_ymc_fg_object.updateRootSourceTerms_nonce,payload:JSON.stringify(u)});try{j(r);let d=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c.toString()});if(d.ok){let m=await d.json();o.innerHTML=m.data.root_terms}else console.error("Error HTTP: "+d.status)}catch(d){console.error("Error occurred:",d)}finally{T(r)}}function Ee(){var e;(e=G.querySelector(".export-wrapper .js-button-export-settings"))==null||e.addEventListener("click",async t=>{let r=new Date().getFullYear(),o=new Date().getDate(),s=new Date().getMonth(),a=new Date().getHours(),i=new Date().getMinutes(),u=new Date().getSeconds(),c=new FormData;c.append("action","action_export_settings"),c.append("nonce_code",_ymc_fg_object.exportSettingsAjax_nonce),c.append("post_id",S);try{j(".ymc-main #tools");let l=await fetch(g,{method:"POST",body:c});if(!l.ok){C(`HTTP error! Status: ${l.status}`,"#tools .export-wrapper .notify-wrapper","error",2e3);return}let d=await l.blob(),m=document.createElement("a"),p=`ymc-fg-export-${o}-${s+1}-${r}-${a}:${i}:${u}.json`,y=window.URL.createObjectURL(d);m.href=y,m.download=p,document.body.appendChild(m),m.click(),m.remove(),URL.revokeObjectURL(y),C("Settings exported","#tools .export-wrapper .notify-wrapper","success",2e3)}catch(l){console.error("Error occurred:",l),C("Error occurred","#tools .export-wrapper .notify-wrapper","error",2e3)}finally{T()}})}function ke(e){var t;(t=G.querySelector(".import-wrapper .js-file-import-settings"))==null||t.addEventListener("change",ht)}function ht(){let e=this,t=e.files[0];if(t)if(t.type==="application/json"&&t.name.indexOf("ymc-fg-export-")===0){let r=new FileReader;r.readAsText(t),r.onload=async function(){let o=new FormData;o.append("file",t),o.append("action","action_import_settings"),o.append("post_id",S),o.append("params",r.result),o.append("nonce_code",_ymc_fg_object.importSettingsAjax_nonce);try{j(".ymc-main #tools");let s=await fetch(g,{method:"POST",credentials:"same-origin",body:o});if(!s.ok){C(`HTTP error! Status: ${s.status}`,"#tools .import-wrapper .notify-wrapper","error",2e3);return}let a=await s.json();C(a.data.message,"#tools .import-wrapper .notify-wrapper","success",2e3),e.value="",location.reload()}catch(s){console.error("Error occurred:",s),C("Error occurred","#tools .import-wrapper .notify-wrapper","error",2e3)}finally{T()}}}else C("Invalid file format","#tools .import-wrapper .notify-wrapper","error",2e3)}(function(e){document.addEventListener("DOMContentLoaded",()=>{oe(),U(),ae(),ne(),ce(),le(),B(),z(),ie(),W(),fe(),de(),me(),ue(),$(),ye(),_e(),Se(e),je(),Te(),ve(),be(),J(e),Q(),X(),we(e),qe(),Ce(),Ee(),Ae(e),ke()})})(jQuery);
